(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Qe,x,on,an,ce,Ct,sn,un,ln,kt,pt,ht,Oe={},dn=[],Yn=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,Ze=Array.isArray;function oe(t,e){for(var n in e)t[n]=e[n];return t}function Pt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function qn(t,e,n){var o,i,s,l={};for(s in e)s=="key"?o=e[s]:s=="ref"?i=e[s]:l[s]=e[s];if(arguments.length>2&&(l.children=arguments.length>3?Qe.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)l[s]===void 0&&(l[s]=t.defaultProps[s]);return Be(t,l,o,i,null)}function Be(t,e,n,o,i){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++on,__i:-1,__u:0};return i==null&&x.vnode!=null&&x.vnode(s),s}function X(t){return t.children}function te(t,e){this.props=t,this.context=e}function ge(t,e){if(e==null)return t.__?ge(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?ge(t):null}function cn(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return cn(t)}}function Ht(t){(!t.__d&&(t.__d=!0)&&ce.push(t)&&!Ue.__r++||Ct!=x.debounceRendering)&&((Ct=x.debounceRendering)||sn)(Ue)}function Ue(){for(var t,e,n,o,i,s,l,p=1;ce.length;)ce.length>p&&ce.sort(un),t=ce.shift(),p=ce.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,s=[],l=[],e.__P&&((n=oe({},o)).__v=o.__v+1,x.vnode&&x.vnode(n),St(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,s,i??ge(o),!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,pn(s,n,l),o.__e=o.__=null,n.__e!=i&&cn(n)));Ue.__r=0}function fn(t,e,n,o,i,s,l,p,v,_,w){var r,a,u,f,d,h,c,y=o&&o.__k||dn,b=e.length;for(v=Un(n,e,y,v,b),r=0;r<b;r++)(u=n.__k[r])!=null&&(a=u.__i==-1?Oe:y[u.__i]||Oe,u.__i=r,h=St(t,u,a,i,s,l,p,v,_,w),f=u.__e,u.ref&&a.ref!=u.ref&&(a.ref&&xt(a.ref,null,u),w.push(u.ref,u.__c||f,u)),d==null&&f!=null&&(d=f),(c=!!(4&u.__u))||a.__k===u.__k?v=_n(u,v,t,c):typeof u.type=="function"&&h!==void 0?v=h:f&&(v=f.nextSibling),u.__u&=-7);return n.__e=d,v}function Un(t,e,n,o,i){var s,l,p,v,_,w=n.length,r=w,a=0;for(t.__k=new Array(i),s=0;s<i;s++)(l=e[s])!=null&&typeof l!="boolean"&&typeof l!="function"?(v=s+a,(l=t.__k[s]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?Be(null,l,null,null,null):Ze(l)?Be(X,{children:l},null,null,null):l.constructor==null&&l.__b>0?Be(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=t,l.__b=t.__b+1,p=null,(_=l.__i=Vn(l,n,v,r))!=-1&&(r--,(p=n[_])&&(p.__u|=2)),p==null||p.__v==null?(_==-1&&(i>w?a--:i<w&&a++),typeof l.type!="function"&&(l.__u|=4)):_!=v&&(_==v-1?a--:_==v+1?a++:(_>v?a--:a++,l.__u|=4))):t.__k[s]=null;if(r)for(s=0;s<w;s++)(p=n[s])!=null&&(2&p.__u)==0&&(p.__e==o&&(o=ge(p)),mn(p,p));return o}function _n(t,e,n,o){var i,s;if(typeof t.type=="function"){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,e=_n(i[s],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=ge(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Vn(t,e,n,o){var i,s,l,p=t.key,v=t.type,_=e[n],w=_!=null&&(2&_.__u)==0;if(_===null&&t.key==null||w&&p==_.key&&v==_.type)return n;if(o>(w?1:0)){for(i=n-1,s=n+1;i>=0||s<e.length;)if((_=e[l=i>=0?i--:s++])!=null&&(2&_.__u)==0&&p==_.key&&v==_.type)return l}return-1}function Ft(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||Yn.test(e)?n:n+"px"}function We(t,e,n,o,i){var s,l;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Ft(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||Ft(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(ln,"$1")),l=e.toLowerCase(),e=l in t||e=="onFocusOut"||e=="onFocusIn"?l.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?o?n.u=o.u:(n.u=kt,t.addEventListener(e,s?ht:pt,s)):t.removeEventListener(e,s?ht:pt,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Lt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=kt++;else if(e.t<n.u)return;return n(x.event?x.event(e):e)}}}function St(t,e,n,o,i,s,l,p,v,_){var w,r,a,u,f,d,h,c,y,b,k,P,T,D,E,S,N,C=e.type;if(e.constructor!=null)return null;128&n.__u&&(v=!!(32&n.__u),s=[p=e.__e=n.__e]),(w=x.__b)&&w(e);e:if(typeof C=="function")try{if(c=e.props,y="prototype"in C&&C.prototype.render,b=(w=C.contextType)&&o[w.__c],k=w?b?b.props.value:w.__:o,n.__c?h=(r=e.__c=n.__c).__=r.__E:(y?e.__c=r=new C(c,k):(e.__c=r=new te(c,k),r.constructor=C,r.render=jn),b&&b.sub(r),r.props=c,r.state||(r.state={}),r.context=k,r.__n=o,a=r.__d=!0,r.__h=[],r._sb=[]),y&&r.__s==null&&(r.__s=r.state),y&&C.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=oe({},r.__s)),oe(r.__s,C.getDerivedStateFromProps(c,r.__s))),u=r.props,f=r.state,r.__v=e,a)y&&C.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),y&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(y&&C.getDerivedStateFromProps==null&&c!==u&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(c,k),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(c,r.__s,k)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(r.props=c,r.state=r.__s,r.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(B){B&&(B.__=e)}),P=0;P<r._sb.length;P++)r.__h.push(r._sb[P]);r._sb=[],r.__h.length&&l.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(c,r.__s,k),y&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(u,f,d)})}if(r.context=k,r.props=c,r.__P=t,r.__e=!1,T=x.__r,D=0,y){for(r.state=r.__s,r.__d=!1,T&&T(e),w=r.render(r.props,r.state,r.context),E=0;E<r._sb.length;E++)r.__h.push(r._sb[E]);r._sb=[]}else do r.__d=!1,T&&T(e),w=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++D<25);r.state=r.__s,r.getChildContext!=null&&(o=oe(oe({},o),r.getChildContext())),y&&!a&&r.getSnapshotBeforeUpdate!=null&&(d=r.getSnapshotBeforeUpdate(u,f)),S=w,w!=null&&w.type===X&&w.key==null&&(S=hn(w.props.children)),p=fn(t,Ze(S)?S:[S],e,n,o,i,s,l,p,v,_),r.base=e.__e,e.__u&=-161,r.__h.length&&l.push(r),h&&(r.__E=r.__=null)}catch(B){if(e.__v=null,v||s!=null)if(B.then){for(e.__u|=v?160:128;p&&p.nodeType==8&&p.nextSibling;)p=p.nextSibling;s[s.indexOf(p)]=null,e.__e=p}else{for(N=s.length;N--;)Pt(s[N]);mt(e)}else e.__e=n.__e,e.__k=n.__k,B.then||mt(e);x.__e(B,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):p=e.__e=Kn(n.__e,e,n,o,i,s,l,v,_);return(w=x.diffed)&&w(e),128&e.__u?void 0:p}function mt(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(mt)}function pn(t,e,n){for(var o=0;o<n.length;o++)xt(n[o],n[++o],n[++o]);x.__c&&x.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){x.__e(s,i.__v)}})}function hn(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:Ze(t)?t.map(hn):oe({},t)}function Kn(t,e,n,o,i,s,l,p,v){var _,w,r,a,u,f,d,h=n.props,c=e.props,y=e.type;if(y=="svg"?i="http://www.w3.org/2000/svg":y=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((u=s[_])&&"setAttribute"in u==!!y&&(y?u.localName==y:u.nodeType==3)){t=u,s[_]=null;break}}if(t==null){if(y==null)return document.createTextNode(c);t=document.createElementNS(i,y,c.is&&c),p&&(x.__m&&x.__m(e,s),p=!1),s=null}if(y==null)h===c||p&&t.data==c||(t.data=c);else{if(s=s&&Qe.call(t.childNodes),h=n.props||Oe,!p&&s!=null)for(h={},_=0;_<t.attributes.length;_++)h[(u=t.attributes[_]).name]=u.value;for(_ in h)if(u=h[_],_!="children"){if(_=="dangerouslySetInnerHTML")r=u;else if(!(_ in c)){if(_=="value"&&"defaultValue"in c||_=="checked"&&"defaultChecked"in c)continue;We(t,_,null,u,i)}}for(_ in c)u=c[_],_=="children"?a=u:_=="dangerouslySetInnerHTML"?w=u:_=="value"?f=u:_=="checked"?d=u:p&&typeof u!="function"||h[_]===u||We(t,_,u,h[_],i);if(w)p||r&&(w.__html==r.__html||w.__html==t.innerHTML)||(t.innerHTML=w.__html),e.__k=[];else if(r&&(t.innerHTML=""),fn(e.type=="template"?t.content:t,Ze(a)?a:[a],e,n,o,y=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,l,s?s[0]:n.__k&&ge(n,0),p,v),s!=null)for(_=s.length;_--;)Pt(s[_]);p||(_="value",y=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[_]||y=="progress"&&!f||y=="option"&&f!=h[_])&&We(t,_,f,h[_],i),_="checked",d!=null&&d!=t[_]&&We(t,_,d,h[_],i))}return t}function xt(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){x.__e(i,n)}}function mn(t,e,n){var o,i;if(x.unmount&&x.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||xt(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){x.__e(s,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&mn(o[i],e,n||typeof t.type!="function");n||Pt(t.__e),t.__c=t.__=t.__e=void 0}function jn(t,e,n){return this.constructor(t,n)}function Xn(t,e,n){var o,i,s,l;e==document&&(e=document.documentElement),x.__&&x.__(t,e),i=(o=!1)?null:e.__k,s=[],l=[],St(e,t=e.__k=qn(X,null,[t]),i||Oe,Oe,e.namespaceURI,i?null:e.firstChild?Qe.call(e.childNodes):null,s,i?i.__e:e.firstChild,o,l),pn(s,t,l)}Qe=dn.slice,x={__e:function(t,e,n,o){for(var i,s,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),l=i.__d),l)return i.__E=i}catch(p){t=p}throw t}},on=0,an=function(t){return t!=null&&t.constructor==null},te.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=oe({},this.state),typeof t=="function"&&(t=t(oe({},n),this.props)),t&&oe(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Ht(this))},te.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Ht(this))},te.prototype.render=X,ce=[],sn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,un=function(t,e){return t.__v.__b-e.__v.__b},Ue.__r=0,ln=/(PointerCapture)$|Capture$/i,kt=0,pt=Lt(!1),ht=Lt(!0);var Qn=0;function g(t,e,n,o,i,s){e||(e={});var l,p,v=e;if("ref"in v)for(p in v={},e)p=="ref"?l=e[p]:v[p]=e[p];var _={type:t,props:v,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Qn,__i:-1,__u:0,__source:i,__self:s};if(typeof t=="function"&&(l=t.defaultProps))for(p in l)v[p]===void 0&&(v[p]=l[p]);return x.vnode&&x.vnode(_),_}var $e,L,at,Nt,Ce=0,vn=[],W=x,Wt=W.__b,Rt=W.__r,Bt=W.diffed,Gt=W.__c,Yt=W.unmount,qt=W.__;function Dt(t,e){W.__h&&W.__h(L,t,Ce||e),Ce=0;var n=L.__H||(L.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Ge(t){return Ce=1,Zn(gn,t)}function Zn(t,e,n){var o=Dt($e++,2);if(o.t=t,!o.__c&&(o.__=[gn(void 0,e),function(p){var v=o.__N?o.__N[0]:o.__[0],_=o.t(v,p);v!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=L,!L.__f)){var i=function(p,v,_){if(!o.__c.__H)return!0;var w=o.__c.__H.__.filter(function(a){return!!a.__c});if(w.every(function(a){return!a.__N}))return!s||s.call(this,p,v,_);var r=o.__c.props!==p;return w.forEach(function(a){if(a.__N){var u=a.__[0];a.__=a.__N,a.__N=void 0,u!==a.__[0]&&(r=!0)}}),s&&s.call(this,p,v,_)||r};L.__f=!0;var s=L.shouldComponentUpdate,l=L.componentWillUpdate;L.componentWillUpdate=function(p,v,_){if(this.__e){var w=s;s=void 0,i(p,v,_),s=w}l&&l.call(this,p,v,_)},L.shouldComponentUpdate=i}return o.__N||o.__}function ye(t,e){var n=Dt($e++,3);!W.__s&&yn(n.__H,e)&&(n.__=t,n.u=e,L.__H.__h.push(n))}function Jn(t){return Ce=5,Je(function(){return{current:t}},[])}function Je(t,e){var n=Dt($e++,7);return yn(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Ut(t,e){return Ce=8,Je(function(){return t},e)}function zn(){for(var t;t=vn.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ye),t.__H.__h.forEach(vt),t.__H.__h=[]}catch(e){t.__H.__h=[],W.__e(e,t.__v)}}W.__b=function(t){L=null,Wt&&Wt(t)},W.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),qt&&qt(t,e)},W.__r=function(t){Rt&&Rt(t),$e=0;var e=(L=t.__c).__H;e&&(at===L?(e.__h=[],L.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Ye),e.__h.forEach(vt),e.__h=[],$e=0)),at=L},W.diffed=function(t){Bt&&Bt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(vn.push(e)!==1&&Nt===W.requestAnimationFrame||((Nt=W.requestAnimationFrame)||er)(zn)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),at=L=null},W.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ye),n.__h=n.__h.filter(function(o){return!o.__||vt(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],W.__e(o,n.__v)}}),Gt&&Gt(t,e)},W.unmount=function(t){Yt&&Yt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Ye(o)}catch(i){e=i}}),n.__H=void 0,e&&W.__e(e,n.__v))};var Vt=typeof requestAnimationFrame=="function";function er(t){var e,n=function(){clearTimeout(o),Vt&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);Vt&&(e=requestAnimationFrame(n))}function Ye(t){var e=L,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),L=e}function vt(t){var e=L;t.__c=t.__(),L=e}function yn(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function gn(t,e){return typeof e=="function"?e(t):e}var tr=Symbol.for("preact-signals");function ze(){if(se>1)se--;else{for(var t,e=!1;Te!==void 0;){var n=Te;for(Te=void 0,yt++;n!==void 0;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Pn(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=o}}if(yt=0,se--,e)throw t}}function wn(t){if(se>0)return t();se++;try{return t()}finally{ze()}}var M=void 0;function bn(t){var e=M;M=void 0;try{return t()}finally{M=e}}var Te=void 0,se=0,yt=0,Ve=0;function kn(t){if(M!==void 0){var e=t.n;if(e===void 0||e.t!==M)return e={i:0,S:t,p:M.s,n:void 0,t:M,e:void 0,x:void 0,r:e},M.s!==void 0&&(M.s.n=e),M.s=e,t.n=e,32&M.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=M.s,e.n=void 0,M.s.n=e,M.s=e),e}}function q(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}q.prototype.brand=tr;q.prototype.h=function(){return!0};q.prototype.S=function(t){var e=this,n=this.t;n!==t&&t.e===void 0&&(t.x=n,this.t=t,n!==void 0?n.e=t:bn(function(){var o;(o=e.W)==null||o.call(e)}))};q.prototype.U=function(t){var e=this;if(this.t!==void 0){var n=t.e,o=t.x;n!==void 0&&(n.x=o,t.e=void 0),o!==void 0&&(o.e=n,t.x=void 0),t===this.t&&(this.t=o,o===void 0&&bn(function(){var i;(i=e.Z)==null||i.call(e)}))}};q.prototype.subscribe=function(t){var e=this;return be(function(){var n=e.value,o=M;M=void 0;try{t(n)}finally{M=o}},{name:"sub"})};q.prototype.valueOf=function(){return this.value};q.prototype.toString=function(){return this.value+""};q.prototype.toJSON=function(){return this.value};q.prototype.peek=function(){var t=M;M=void 0;try{return this.value}finally{M=t}};Object.defineProperty(q.prototype,"value",{get:function(){var t=kn(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(yt>100)throw new Error("Cycle detected");this.v=t,this.i++,Ve++,se++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{ze()}}}});function et(t,e){return new q(t,e)}function Pn(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function Sn(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function xn(t){for(var e=t.s,n=void 0;e!==void 0;){var o=e.p;e.i===-1?(e.S.U(e),o!==void 0&&(o.n=e.n),e.n!==void 0&&(e.n.p=o)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=o}t.s=n}function fe(t,e){q.call(this,void 0),this.x=t,this.s=void 0,this.g=Ve-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}fe.prototype=new q;fe.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ve))return!0;if(this.g=Ve,this.f|=1,this.i>0&&!Pn(this))return this.f&=-2,!0;var t=M;try{Sn(this),M=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return M=t,xn(this),this.f&=-2,!0};fe.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}q.prototype.S.call(this,t)};fe.prototype.U=function(t){if(this.t!==void 0&&(q.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};fe.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(fe.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=kn(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function ne(t,e){return new fe(t,e)}function Dn(t){var e=t.u;if(t.u=void 0,typeof e=="function"){se++;var n=M;M=void 0;try{e()}catch(o){throw t.f&=-2,t.f|=8,Tt(t),o}finally{M=n,ze()}}}function Tt(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Dn(t)}function nr(t){if(M!==this)throw new Error("Out-of-order effect");xn(this),M=t,this.f&=-2,8&this.f&&Tt(this),ze()}function we(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e?.name}we.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};we.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Dn(this),Sn(this),se++;var t=M;return M=this,nr.bind(this,t)};we.prototype.N=function(){2&this.f||(this.f|=2,this.o=Te,Te=this)};we.prototype.d=function(){this.f|=8,1&this.f||Tt(this)};we.prototype.dispose=function(){this.d()};function be(t,e){var n=new we(t,e);try{n.c()}catch(i){throw n.d(),i}var o=n.d.bind(n);return o[Symbol.dispose]=o,o}var Tn,st,An=[];be(function(){Tn=this.N})();function ke(t,e){x[t]=e.bind(null,x[t]||function(){})}function Ke(t){st&&st(),st=t&&t.S()}function In(t){var e=this,n=t.data,o=or(n);o.value=n;var i=Je(function(){for(var p=e,v=e.__v;v=v.__;)if(v.__c){v.__c.__$f|=4;break}var _=ne(function(){var u=o.value.value;return u===0?0:u===!0?"":u||""}),w=ne(function(){return!Array.isArray(_.value)&&!an(_.value)}),r=be(function(){if(this.N=Mn,w.value){var u=_.value;p.__v&&p.__v.__e&&p.__v.__e.nodeType===3&&(p.__v.__e.data=u)}}),a=e.__$u.d;return e.__$u.d=function(){r(),a.call(this)},[w,_]},[]),s=i[0],l=i[1];return s.value?l.peek():l.value}In.displayName="ReactiveTextNode";Object.defineProperties(q.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:In},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});ke("__b",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof e.type=="string"){var n,o=e.props;for(var i in o)if(i!=="children"){var s=o[i];s instanceof q&&(n||(e.__np=n={}),n[i]=s,o[i]=s.peek())}}t(e)});ke("__r",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(e.type.displayName||e.type.name||"Unknown"),e.type!==X){Ke();var n,o=e.__c;o&&(o.__$f&=-2,(n=o.__$u)===void 0&&(o.__$u=n=(function(i){var s;return be(function(){s=this}),s.c=function(){o.__$f|=1,o.setState({})},s})())),Ke(n)}t(e)});ke("__e",function(t,e,n,o){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Ke(),t(e,n,o)});ke("diffed",function(t,e){typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Ke();var n;if(typeof e.type=="string"&&(n=e.__e)){var o=e.__np,i=e.props;if(o){var s=n.U;if(s)for(var l in s){var p=s[l];p!==void 0&&!(l in o)&&(p.d(),s[l]=void 0)}else s={},n.U=s;for(var v in o){var _=s[v],w=o[v];_===void 0?(_=rr(n,v,w,i),s[v]=_):_.o(w,i)}}}t(e)});function rr(t,e,n,o){var i=e in t&&t.ownerSVGElement===void 0,s=et(n);return{o:function(l,p){s.value=l,o=p},d:be(function(){this.N=Mn;var l=s.value.value;o[e]!==l&&(o[e]=l,i?t[e]=l:l?t.setAttribute(e,l):t.removeAttribute(e))})}}ke("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var o=n.U;if(o){n.U=void 0;for(var i in o){var s=o[i];s&&s.d()}}}}else{var l=e.__c;if(l){var p=l.__$u;p&&(l.__$u=void 0,p.d())}}t(e)});ke("__h",function(t,e,n,o){(o<3||o===9)&&(e.__$f|=2),t(e,n,o)});te.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u,o=n&&n.s!==void 0;for(var i in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var s=2&this.__$f;if(!(o||s||4&this.__$f)||1&this.__$f)return!0}else if(!(o||4&this.__$f)||3&this.__$f)return!0;for(var l in t)if(l!=="__source"&&t[l]!==this.props[l])return!0;for(var p in this.props)if(!(p in t))return!0;return!1};function or(t,e){return Ge(function(){return et(t,e)})[0]}var ir=function(t){queueMicrotask(function(){queueMicrotask(t)})};function ar(){wn(function(){for(var t;t=An.shift();)Tn.call(t)})}function Mn(){An.push(this)===1&&(x.requestAnimationFrame||ir)(ar)}const I=(t,e,n=0,o=!1)=>{const i=[{color:"black",background:"white"},{color:"white",background:"black"},{color:"white",background:"darkred"},{color:"white",background:"green"},{color:"white",background:"blue"},{color:"white",background:"maroon"},{color:"white",background:"purple"},{color:"white",background:"olive"},{color:"white",background:"navy"},{color:"white",background:"teal"},{color:"black",background:"orange"},{color:"black",background:"gray"},{color:"black",background:"skyblue"},{color:"black",background:"goldenrod"},{color:"black",background:"silver"}];(typeof n!="number"||n<0||n>i.length-1)&&(n=0),e&&typeof e=="object"&&"timestampStarted"in e&&"timestampPaused"in e?console.log(`%c${t.padStart(25," ")}`,`
          color: ${i[n].color};
          background-color: ${i[n].background};
          padding: 4px;
          font-weight: bold;
          ${o?`border: 2px solid ${i[n].color};`:""}
          `,`      now: ${new Date(Date.now()).toLocaleTimeString("cs-CZ",{second:"2-digit",fractionalSecondDigits:2})}`,`  started: ${e.timestampStarted===null?null:new Date(e.timestampStarted).toLocaleTimeString("cs-CZ",{second:"2-digit",fractionalSecondDigits:2})}`,`   paused: ${e.timestampPaused===null?null:new Date(e.timestampPaused).toLocaleTimeString("cs-CZ",{second:"2-digit",fractionalSecondDigits:2})}`):console.log(`%c${t.padStart(25," ")}`,`
          color: ${i[n].color};
          background-color: ${i[n].background};
          padding: 4px;
          font-weight: bold;
          ${o?`border: 2px solid ${i[n].color};`:""}
          `,e)},sr=t=>(localStorage.setItem("timerState",JSON.stringify(t)),t),ur=t=>{try{const e=JSON.parse(localStorage.getItem("timerState"));return Object.keys(t).every(i=>e.hasOwnProperty(i))?(I("state loaded successfully",e,1),e):(I("loaded state was invalid, initial state returned",t,2),t)}catch{return I("initial state saved (there was an error loading the state)",t,3),t}};var Pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ut={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var Kt;function lr(){return Kt||(Kt=1,(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||n;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var a=this||n;if(r=parseFloat(r),a.ctx||w(),typeof r<"u"&&r>=0&&r<=1){if(a._volume=r,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r,n.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),d=0;d<f.length;d++){var h=a._howls[u]._soundById(f[d]);h&&h._node&&(h._node.volume=h._volume*r)}return a}return a._volume},mute:function(r){var a=this||n;a.ctx||w(),a._muted=r,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r?0:a._volume,n.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),d=0;d<f.length;d++){var h=a._howls[u]._soundById(f[d]);h&&h._node&&(h._node.muted=r?!0:h._muted)}return a},stop:function(){for(var r=this||n,a=0;a<r._howls.length;a++)r._howls[a].stop();return r},unload:function(){for(var r=this||n,a=r._howls.length-1;a>=0;a--)r._howls[a].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,w()),r},codecs:function(r){return(this||n)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||n;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var a=new Audio;a.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||n,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return r}if(!a||typeof a.canPlayType!="function")return r;var u=a.canPlayType("audio/mpeg;").replace(/^no$/,""),f=r._navigator?r._navigator.userAgent:"",d=f.match(/OPR\/(\d+)/g),h=d&&parseInt(d[0].split("/")[1],10)<33,c=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,y=f.match(/Version\/(.*?) /),b=c&&y&&parseInt(y[1],10)<15;return r._codecs={mp3:!!(!h&&(u||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||n;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var a=function(u){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,r._releaseHtml5Audio(f)}catch{r.noAudio=!0;break}for(var d=0;d<r._howls.length;d++)if(!r._howls[d]._webAudio)for(var h=r._howls[d]._getSoundIds(),c=0;c<h.length;c++){var y=r._howls[d]._soundById(h[c]);y&&y._node&&!y._node._unlocked&&(y._node._unlocked=!0,y._node.load())}r._autoResume();var b=r.ctx.createBufferSource();b.buffer=r._scratchBuffer,b.connect(r.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),b.onended=function(){b.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var k=0;k<r._howls.length;k++)r._howls[k]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),r}},_obtainHtml5Audio:function(){var r=this||n;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var a=this||n;return r._unlocked&&a._html5AudioPool.push(r),a},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!n.usingWebAudio)){for(var a=0;a<r._howls.length;a++)if(r._howls[a]._webAudio){for(var u=0;u<r._howls[a]._sounds.length;u++)if(!r._howls[a]._sounds[u]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(r.autoSuspend){r._suspendTimer=null,r.state="suspending";var f=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(f,f)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!n.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var a=0;a<r._howls.length;a++)r._howls[a]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var n=new e,o=function(r){var a=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(r)};o.prototype={init:function(r){var a=this;return n.ctx||w(),a._autoplay=r.autoplay||!1,a._format=typeof r.format!="string"?r.format:[r.format],a._html5=r.html5||!1,a._muted=r.mute||!1,a._loop=r.loop||!1,a._pool=r.pool||5,a._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,a._rate=r.rate||1,a._sprite=r.sprite||{},a._src=typeof r.src!="string"?r.src:[r.src],a._volume=r.volume!==void 0?r.volume:1,a._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=r.onend?[{fn:r.onend}]:[],a._onfade=r.onfade?[{fn:r.onfade}]:[],a._onload=r.onload?[{fn:r.onload}]:[],a._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],a._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],a._onpause=r.onpause?[{fn:r.onpause}]:[],a._onplay=r.onplay?[{fn:r.onplay}]:[],a._onstop=r.onstop?[{fn:r.onstop}]:[],a._onmute=r.onmute?[{fn:r.onmute}]:[],a._onvolume=r.onvolume?[{fn:r.onvolume}]:[],a._onrate=r.onrate?[{fn:r.onrate}]:[],a._onseek=r.onseek?[{fn:r.onseek}]:[],a._onunlock=r.onunlock?[{fn:r.onunlock}]:[],a._onresume=[],a._webAudio=n.usingWebAudio&&!a._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var r=this,a=null;if(n.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var u=0;u<r._src.length;u++){var f,d;if(r._format&&r._format[u])f=r._format[u];else{if(d=r._src[u],typeof d!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(d),f||(f=/\.([^.]+)$/.exec(d.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&n.codecs(f)){a=r._src[u];break}}if(!a){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=a,r._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new i(r),r._webAudio&&l(r),r},play:function(r,a){var u=this,f=null;if(typeof r=="number")f=r,r=null;else{if(typeof r=="string"&&u._state==="loaded"&&!u._sprite[r])return null;if(typeof r>"u"&&(r="__default",!u._playLock)){for(var d=0,h=0;h<u._sounds.length;h++)u._sounds[h]._paused&&!u._sounds[h]._ended&&(d++,f=u._sounds[h]._id);d===1?r=null:f=null}}var c=f?u._soundById(f):u._inactiveSound();if(!c)return null;if(f&&!r&&(r=c._sprite||"__default"),u._state!=="loaded"){c._sprite=r,c._ended=!1;var y=c._id;return u._queue.push({event:"play",action:function(){u.play(y)}}),y}if(f&&!c._paused)return a||u._loadQueue("play"),c._id;u._webAudio&&n._autoResume();var b=Math.max(0,c._seek>0?c._seek:u._sprite[r][0]/1e3),k=Math.max(0,(u._sprite[r][0]+u._sprite[r][1])/1e3-b),P=k*1e3/Math.abs(c._rate),T=u._sprite[r][0]/1e3,D=(u._sprite[r][0]+u._sprite[r][1])/1e3;c._sprite=r,c._ended=!1;var E=function(){c._paused=!1,c._seek=b,c._start=T,c._stop=D,c._loop=!!(c._loop||u._sprite[r][2])};if(b>=D){u._ended(c);return}var S=c._node;if(u._webAudio){var N=function(){u._playLock=!1,E(),u._refreshBuffer(c);var G=c._muted||u._muted?0:c._volume;S.gain.setValueAtTime(G,n.ctx.currentTime),c._playStart=n.ctx.currentTime,typeof S.bufferSource.start>"u"?c._loop?S.bufferSource.noteGrainOn(0,b,86400):S.bufferSource.noteGrainOn(0,b,k):c._loop?S.bufferSource.start(0,b,86400):S.bufferSource.start(0,b,k),P!==1/0&&(u._endTimers[c._id]=setTimeout(u._ended.bind(u,c),P)),a||setTimeout(function(){u._emit("play",c._id),u._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?N():(u._playLock=!0,u.once("resume",N),u._clearTimer(c._id))}else{var C=function(){S.currentTime=b,S.muted=c._muted||u._muted||n._muted||S.muted,S.volume=c._volume*n.volume(),S.playbackRate=c._rate;try{var G=S.play();if(G&&typeof Promise<"u"&&(G instanceof Promise||typeof G.then=="function")?(u._playLock=!0,E(),G.then(function(){u._playLock=!1,S._unlocked=!0,a?u._loadQueue():u._emit("play",c._id)}).catch(function(){u._playLock=!1,u._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),c._ended=!0,c._paused=!0})):a||(u._playLock=!1,E(),u._emit("play",c._id)),S.playbackRate=c._rate,S.paused){u._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||c._loop?u._endTimers[c._id]=setTimeout(u._ended.bind(u,c),P):(u._endTimers[c._id]=function(){u._ended(c),S.removeEventListener("ended",u._endTimers[c._id],!1)},S.addEventListener("ended",u._endTimers[c._id],!1))}catch(_e){u._emit("playerror",c._id,_e)}};S.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(S.src=u._src,S.load());var B=window&&window.ejecta||!S.readyState&&n._navigator.isCocoonJS;if(S.readyState>=3||B)C();else{u._playLock=!0,u._state="loading";var le=function(){u._state="loaded",C(),S.removeEventListener(n._canPlayEvent,le,!1)};S.addEventListener(n._canPlayEvent,le,!1),u._clearTimer(c._id)}}return c._id},pause:function(r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(r)}}),a;for(var u=a._getSoundIds(r),f=0;f<u.length;f++){a._clearTimer(u[f]);var d=a._soundById(u[f]);if(d&&!d._paused&&(d._seek=a.seek(u[f]),d._rateSeek=0,d._paused=!0,a._stopFade(u[f]),d._node))if(a._webAudio){if(!d._node.bufferSource)continue;typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),a._cleanBuffer(d._node)}else(!isNaN(d._node.duration)||d._node.duration===1/0)&&d._node.pause();arguments[1]||a._emit("pause",d?d._id:null)}return a},stop:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(r)}}),u;for(var f=u._getSoundIds(r),d=0;d<f.length;d++){u._clearTimer(f[d]);var h=u._soundById(f[d]);h&&(h._seek=h._start||0,h._rateSeek=0,h._paused=!0,h._ended=!0,u._stopFade(f[d]),h._node&&(u._webAudio?h._node.bufferSource&&(typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),u._cleanBuffer(h._node)):(!isNaN(h._node.duration)||h._node.duration===1/0)&&(h._node.currentTime=h._start||0,h._node.pause(),h._node.duration===1/0&&u._clearSound(h._node))),a||u._emit("stop",h._id))}return u},mute:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(r,a)}}),u;if(typeof a>"u")if(typeof r=="boolean")u._muted=r;else return u._muted;for(var f=u._getSoundIds(a),d=0;d<f.length;d++){var h=u._soundById(f[d]);h&&(h._muted=r,h._interval&&u._stopFade(h._id),u._webAudio&&h._node?h._node.gain.setValueAtTime(r?0:h._volume,n.ctx.currentTime):h._node&&(h._node.muted=n._muted?!0:r),u._emit("mute",h._id))}return u},volume:function(){var r=this,a=arguments,u,f;if(a.length===0)return r._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var d=r._getSoundIds(),h=d.indexOf(a[0]);h>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length>=2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var c;if(typeof u<"u"&&u>=0&&u<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;typeof f>"u"&&(r._volume=u),f=r._getSoundIds(f);for(var y=0;y<f.length;y++)c=r._soundById(f[y]),c&&(c._volume=u,a[2]||r._stopFade(f[y]),r._webAudio&&c._node&&!c._muted?c._node.gain.setValueAtTime(u,n.ctx.currentTime):c._node&&!c._muted&&(c._node.volume=u*n.volume()),r._emit("volume",c._id))}else return c=f?r._soundById(f):r._sounds[0],c?c._volume:0;return r},fade:function(r,a,u,f){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"fade",action:function(){d.fade(r,a,u,f)}}),d;r=Math.min(Math.max(0,parseFloat(r)),1),a=Math.min(Math.max(0,parseFloat(a)),1),u=parseFloat(u),d.volume(r,f);for(var h=d._getSoundIds(f),c=0;c<h.length;c++){var y=d._soundById(h[c]);if(y){if(f||d._stopFade(h[c]),d._webAudio&&!y._muted){var b=n.ctx.currentTime,k=b+u/1e3;y._volume=r,y._node.gain.setValueAtTime(r,b),y._node.gain.linearRampToValueAtTime(a,k)}d._startFadeInterval(y,r,a,u,h[c],typeof f>"u")}}return d},_startFadeInterval:function(r,a,u,f,d,h){var c=this,y=a,b=u-a,k=Math.abs(b/.01),P=Math.max(4,k>0?f/k:f),T=Date.now();r._fadeTo=u,r._interval=setInterval(function(){var D=(Date.now()-T)/f;T=Date.now(),y+=b*D,y=Math.round(y*100)/100,b<0?y=Math.max(u,y):y=Math.min(u,y),c._webAudio?r._volume=y:c.volume(y,r._id,!0),h&&(c._volume=y),(u<a&&y<=u||u>a&&y>=u)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,c.volume(u,r._id),c._emit("fade",r._id))},P)},_stopFade:function(r){var a=this,u=a._soundById(r);return u&&u._interval&&(a._webAudio&&u._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(u._interval),u._interval=null,a.volume(u._fadeTo,r),u._fadeTo=null,a._emit("fade",r)),a},loop:function(){var r=this,a=arguments,u,f,d;if(a.length===0)return r._loop;if(a.length===1)if(typeof a[0]=="boolean")u=a[0],r._loop=u;else return d=r._soundById(parseInt(a[0],10)),d?d._loop:!1;else a.length===2&&(u=a[0],f=parseInt(a[1],10));for(var h=r._getSoundIds(f),c=0;c<h.length;c++)d=r._soundById(h[c]),d&&(d._loop=u,r._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=u,u&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop,r.playing(h[c])&&(r.pause(h[c],!0),r.play(h[c],!0)))));return r},rate:function(){var r=this,a=arguments,u,f;if(a.length===0)f=r._sounds[0]._id;else if(a.length===1){var d=r._getSoundIds(),h=d.indexOf(a[0]);h>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var c;if(typeof u=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;typeof f>"u"&&(r._rate=u),f=r._getSoundIds(f);for(var y=0;y<f.length;y++)if(c=r._soundById(f[y]),c){r.playing(f[y])&&(c._rateSeek=r.seek(f[y]),c._playStart=r._webAudio?n.ctx.currentTime:c._playStart),c._rate=u,r._webAudio&&c._node&&c._node.bufferSource?c._node.bufferSource.playbackRate.setValueAtTime(u,n.ctx.currentTime):c._node&&(c._node.playbackRate=u);var b=r.seek(f[y]),k=(r._sprite[c._sprite][0]+r._sprite[c._sprite][1])/1e3-b,P=k*1e3/Math.abs(c._rate);(r._endTimers[f[y]]||!c._paused)&&(r._clearTimer(f[y]),r._endTimers[f[y]]=setTimeout(r._ended.bind(r,c),P)),r._emit("rate",c._id)}}else return c=r._soundById(f),c?c._rate:r._rate;return r},seek:function(){var r=this,a=arguments,u,f;if(a.length===0)r._sounds.length&&(f=r._sounds[0]._id);else if(a.length===1){var d=r._getSoundIds(),h=d.indexOf(a[0]);h>=0?f=parseInt(a[0],10):r._sounds.length&&(f=r._sounds[0]._id,u=parseFloat(a[0]))}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var c=r._soundById(f);if(c)if(typeof u=="number"&&u>=0){var y=r.playing(f);y&&r.pause(f,!0),c._seek=u,c._ended=!1,r._clearTimer(f),!r._webAudio&&c._node&&!isNaN(c._node.duration)&&(c._node.currentTime=u);var b=function(){y&&r.play(f,!0),r._emit("seek",f)};if(y&&!r._webAudio){var k=function(){r._playLock?setTimeout(k,0):b()};setTimeout(k,0)}else b()}else if(r._webAudio){var P=r.playing(f)?n.ctx.currentTime-c._playStart:0,T=c._rateSeek?c._rateSeek-c._seek:0;return c._seek+(T+P*Math.abs(c._rate))}else return c._node.currentTime;return r},playing:function(r){var a=this;if(typeof r=="number"){var u=a._soundById(r);return u?!u._paused:!1}for(var f=0;f<a._sounds.length;f++)if(!a._sounds[f]._paused)return!0;return!1},duration:function(r){var a=this,u=a._duration,f=a._soundById(r);return f&&(u=a._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var r=this,a=r._sounds,u=0;u<a.length;u++)a[u]._paused||r.stop(a[u]._id),r._webAudio||(r._clearSound(a[u]._node),a[u]._node.removeEventListener("error",a[u]._errorFn,!1),a[u]._node.removeEventListener(n._canPlayEvent,a[u]._loadFn,!1),a[u]._node.removeEventListener("ended",a[u]._endFn,!1),n._releaseHtml5Audio(a[u]._node)),delete a[u]._node,r._clearTimer(a[u]._id);var f=n._howls.indexOf(r);f>=0&&n._howls.splice(f,1);var d=!0;for(u=0;u<n._howls.length;u++)if(n._howls[u]._src===r._src||r._src.indexOf(n._howls[u]._src)>=0){d=!1;break}return s&&d&&delete s[r._src],n.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,a,u,f){var d=this,h=d["_on"+r];return typeof a=="function"&&h.push(f?{id:u,fn:a,once:f}:{id:u,fn:a}),d},off:function(r,a,u){var f=this,d=f["_on"+r],h=0;if(typeof a=="number"&&(u=a,a=null),a||u)for(h=0;h<d.length;h++){var c=u===d[h].id;if(a===d[h].fn&&c||!a&&c){d.splice(h,1);break}}else if(r)f["_on"+r]=[];else{var y=Object.keys(f);for(h=0;h<y.length;h++)y[h].indexOf("_on")===0&&Array.isArray(f[y[h]])&&(f[y[h]]=[])}return f},once:function(r,a,u){var f=this;return f.on(r,a,u,1),f},_emit:function(r,a,u){for(var f=this,d=f["_on"+r],h=d.length-1;h>=0;h--)(!d[h].id||d[h].id===a||r==="load")&&(setTimeout((function(c){c.call(this,a,u)}).bind(f,d[h].fn),0),d[h].once&&f.off(r,d[h].fn,d[h].id));return f._loadQueue(r),f},_loadQueue:function(r){var a=this;if(a._queue.length>0){var u=a._queue[0];u.event===r&&(a._queue.shift(),a._loadQueue()),r||u.action()}return a},_ended:function(r){var a=this,u=r._sprite;if(!a._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(a._ended.bind(a,r),100),a;var f=!!(r._loop||a._sprite[u][2]);if(a._emit("end",r._id),!a._webAudio&&f&&a.stop(r._id,!0).play(r._id),a._webAudio&&f){a._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=n.ctx.currentTime;var d=(r._stop-r._start)*1e3/Math.abs(r._rate);a._endTimers[r._id]=setTimeout(a._ended.bind(a,r),d)}return a._webAudio&&!f&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,a._clearTimer(r._id),a._cleanBuffer(r._node),n._autoSuspend()),!a._webAudio&&!f&&a.stop(r._id,!0),a},_clearTimer:function(r){var a=this;if(a._endTimers[r]){if(typeof a._endTimers[r]!="function")clearTimeout(a._endTimers[r]);else{var u=a._soundById(r);u&&u._node&&u._node.removeEventListener("ended",a._endTimers[r],!1)}delete a._endTimers[r]}return a},_soundById:function(r){for(var a=this,u=0;u<a._sounds.length;u++)if(r===a._sounds[u]._id)return a._sounds[u];return null},_inactiveSound:function(){var r=this;r._drain();for(var a=0;a<r._sounds.length;a++)if(r._sounds[a]._ended)return r._sounds[a].reset();return new i(r)},_drain:function(){var r=this,a=r._pool,u=0,f=0;if(!(r._sounds.length<a)){for(f=0;f<r._sounds.length;f++)r._sounds[f]._ended&&u++;for(f=r._sounds.length-1;f>=0;f--){if(u<=a)return;r._sounds[f]._ended&&(r._webAudio&&r._sounds[f]._node&&r._sounds[f]._node.disconnect(0),r._sounds.splice(f,1),u--)}}},_getSoundIds:function(r){var a=this;if(typeof r>"u"){for(var u=[],f=0;f<a._sounds.length;f++)u.push(a._sounds[f]._id);return u}else return[r]},_refreshBuffer:function(r){var a=this;return r._node.bufferSource=n.ctx.createBufferSource(),r._node.bufferSource.buffer=s[a._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,n.ctx.currentTime),a},_cleanBuffer:function(r){var a=this,u=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!r.bufferSource)return a;if(n._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),u))try{r.bufferSource.buffer=n._scratchBuffer}catch{}return r.bufferSource=null,a},_clearSound:function(r){var a=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);a||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(r){this._parent=r,this.init()};i.prototype={init:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++n._counter,a._sounds.push(r),r.create(),r},create:function(){var r=this,a=r._parent,u=n._muted||r._muted||r._parent._muted?0:r._volume;return a._webAudio?(r._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),r._node.gain.setValueAtTime(u,n.ctx.currentTime),r._node.paused=!0,r._node.connect(n.masterGain)):n.noAudio||(r._node=n._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(n._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=a._src,r._node.preload=a._preload===!0?"auto":a._preload,r._node.volume=u*n.volume(),r._node.load()),r},reset:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++n._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,a=r._parent;a._duration=Math.ceil(r._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),r._node.removeEventListener(n._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,a=r._parent;a._duration===1/0&&(a._duration=Math.ceil(r._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var s={},l=function(r){var a=r._src;if(s[a]){r._duration=s[a].duration,_(r);return}if(/^data:[^;]+;base64,/.test(a)){for(var u=atob(a.split(",")[1]),f=new Uint8Array(u.length),d=0;d<u.length;++d)f[d]=u.charCodeAt(d);v(f.buffer,r)}else{var h=new XMLHttpRequest;h.open(r._xhr.method,a,!0),h.withCredentials=r._xhr.withCredentials,h.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(c){h.setRequestHeader(c,r._xhr.headers[c])}),h.onload=function(){var c=(h.status+"")[0];if(c!=="0"&&c!=="2"&&c!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".");return}v(h.response,r)},h.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete s[a],r.load())},p(h)}},p=function(r){try{r.send()}catch{r.onerror()}},v=function(r,a){var u=function(){a._emit("loaderror",null,"Decoding audio data failed.")},f=function(d){d&&a._sounds.length>0?(s[a._src]=d,_(a,d)):u()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(r).then(f).catch(u):n.ctx.decodeAudioData(r,f,u)},_=function(r,a){a&&!r._duration&&(r._duration=a.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},w=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),a=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=a?parseInt(a[1],10):null;if(r&&u&&u<9){var f=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!f&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=o,typeof Pe<"u"?(Pe.HowlerGlobal=e,Pe.Howler=n,Pe.Howl=o,Pe.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=o,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var i=o._howls.length-1;i>=0;i--)o._howls[i].stereo(n);return o},HowlerGlobal.prototype.pos=function(n,o,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(o=typeof o!="number"?s._pos[1]:o,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,o,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,o,i,s,l,p){var v=this;if(!v.ctx||!v.ctx.listener)return v;var _=v._orientation;if(o=typeof o!="number"?_[1]:o,i=typeof i!="number"?_[2]:i,s=typeof s!="number"?_[3]:s,l=typeof l!="number"?_[4]:l,p=typeof p!="number"?_[5]:p,typeof n=="number")v._orientation=[n,o,i,s,l,p],typeof v.ctx.listener.forwardX<"u"?(v.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),v.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),v.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),v.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),v.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),v.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):v.ctx.listener.setOrientation(n,o,i,s,l,p);else return _;return v},Howl.prototype.init=(function(n){return function(o){var i=this;return i._orientation=o.orientation||[1,0,0],i._stereo=o.stereo||null,i._pos=o.pos||null,i._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},i._onstereo=o.onstereo?[{fn:o.onstereo}]:[],i._onpos=o.onpos?[{fn:o.onpos}]:[],i._onorientation=o.onorientation?[{fn:o.onorientation}]:[],n.call(this,o)}})(Howl.prototype.init),Howl.prototype.stereo=function(n,o){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,o)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var l=i._getSoundIds(o),p=0;p<l.length;p++){var v=i._soundById(l[p]);if(v)if(typeof n=="number")v._stereo=n,v._pos=[n,0,0],v._node&&(v._pannerAttr.panningModel="equalpower",(!v._panner||!v._panner.pan)&&e(v,s),s==="spatial"?typeof v._panner.positionX<"u"?(v._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),v._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),v._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):v._panner.setPosition(n,0,0):v._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",v._id);else return v._stereo}return i},Howl.prototype.pos=function(n,o,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(n,o,i,s)}}),l;if(o=typeof o!="number"?0:o,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")l._pos=[n,o,i];else return l._pos;for(var p=l._getSoundIds(s),v=0;v<p.length;v++){var _=l._soundById(p[v]);if(_)if(typeof n=="number")_._pos=[n,o,i],_._node&&((!_._panner||_._panner.pan)&&e(_,"spatial"),typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):_._panner.setPosition(n,o,i)),l._emit("pos",_._id);else return _._pos}return l},Howl.prototype.orientation=function(n,o,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(n,o,i,s)}}),l;if(o=typeof o!="number"?l._orientation[1]:o,i=typeof i!="number"?l._orientation[2]:i,typeof s>"u")if(typeof n=="number")l._orientation=[n,o,i];else return l._orientation;for(var p=l._getSoundIds(s),v=0;v<p.length;v++){var _=l._soundById(p[v]);if(_)if(typeof n=="number")_._orientation=[n,o,i],_._node&&(_._panner||(_._pos||(_._pos=l._pos||[0,0,-.5]),e(_,"spatial")),typeof _._panner.orientationX<"u"?(_._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),_._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),_._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):_._panner.setOrientation(n,o,i)),l._emit("orientation",_._id);else return _._orientation}return l},Howl.prototype.pannerAttr=function(){var n=this,o=arguments,i,s,l;if(!n._webAudio)return n;if(o.length===0)return n._pannerAttr;if(o.length===1)if(typeof o[0]=="object")i=o[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return l=n._soundById(parseInt(o[0],10)),l?l._pannerAttr:n._pannerAttr;else o.length===2&&(i=o[0],s=parseInt(o[1],10));for(var p=n._getSoundIds(s),v=0;v<p.length;v++)if(l=n._soundById(p[v]),l){var _=l._pannerAttr;_={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:_.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:_.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:_.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:_.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:_.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:_.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:_.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:_.panningModel};var w=l._panner;w||(l._pos||(l._pos=n._pos||[0,0,-.5]),e(l,"spatial"),w=l._panner),w.coneInnerAngle=_.coneInnerAngle,w.coneOuterAngle=_.coneOuterAngle,w.coneOuterGain=_.coneOuterGain,w.distanceModel=_.distanceModel,w.maxDistance=_.maxDistance,w.refDistance=_.refDistance,w.rolloffFactor=_.rolloffFactor,w.panningModel=_.panningModel}return n},Sound.prototype.init=(function(n){return function(){var o=this,i=o._parent;o._orientation=i._orientation,o._stereo=i._stereo,o._pos=i._pos,o._pannerAttr=i._pannerAttr,n.call(this),o._stereo?i.stereo(o._stereo):o._pos&&i.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(n){return function(){var o=this,i=o._parent;return o._orientation=i._orientation,o._stereo=i._stereo,o._pos=i._pos,o._pannerAttr=i._pannerAttr,o._stereo?i.stereo(o._stereo):o._pos?i.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,i._refreshBuffer(o)),n.call(this)}})(Sound.prototype.reset);var e=function(n,o){o=o||"spatial",o==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(ut)),ut}var re=lr();const J={elapsed:[6,12,24,36,48,60,72,84,96,108],remaining:[6,12,24],overtime:[6,12,18,24,30,36,42,48,60],overtimeBreak:[6,12,18,24,30,36,42,48]};let gt=!1;const Ae=[],dr=50,pe=(t,e,n=null,o=!1,i=null)=>{const s={timestamp:Date.now(),soundKey:t,success:e,error:n?.message||null,retry:o,periodContext:i};Ae.unshift(s),Ae.length>dr&&Ae.pop()},He=async()=>{if(gt)return!0;try{const e=new re.Howl({src:["data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="],volume:0,html5:!1}).play();return e&&await e,gt=!0,I(" Audio context","unlocked successfully",3),!0}catch(t){return I(" Failed to unlock audio context",t,2),!1}},cr=()=>{if(typeof window>"u")return{};const t={button:new re.Howl({src:["/tymer/sounds/button.webm"],loop:!1}),timerFinished:new re.Howl({src:["/tymer/sounds/timer-end.webm"],loop:!1})};J.elapsed.forEach(n=>{const o=`elapsed_${n}`,i=`/tymer/sounds/elapsed/${String(n).padStart(3,"0")}.webm`;t[o]=new re.Howl({src:[i],loop:!1})}),J.remaining.forEach(n=>{const o=`remaining_${n}`,i=`/tymer/sounds/remaining/${String(n).padStart(3,"0")}.webm`;t[o]=new re.Howl({src:[i],loop:!1})});const e=["work","break","fun","finish"];for(const n of e)t[`timesup_${n}`]=new re.Howl({src:[`/tymer/sounds/timesup/${n}.webm`],loop:!1});return J.overtime.forEach(n=>{const o=`overtime_${n}`,i=`/tymer/sounds/overtime/${String(n).padStart(3,"0")}.webm`;t[o]=new re.Howl({src:[i],loop:!1})}),J.overtimeBreak.forEach(n=>{const o=`overtime_break_${n}`,i=`/tymer/sounds/overtime/break/${String(n).padStart(3,"0")}.webm`;t[o]=new re.Howl({src:[i],loop:!1})}),t},fr=cr();J.elapsed.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/elapsed/${String(e).padStart(3,"0")}.webm`,t),{}),J.remaining.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/remaining/${String(e).padStart(3,"0")}.webm`,t),{}),J.overtime.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/overtime/${String(e).padStart(3,"0")}.webm`,t),{}),J.overtimeBreak.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/overtime/break/${String(e).padStart(3,"0")}.webm`,t),{});const _r=()=>{try{const e=typeof window<"u"&&window.__timerModule?window.__timerModule:null;if(!e)return null;const n=e.currentPeriod?.value,o=e.timerState?.value;if(n){const i=n.periodDurationElapsed,s=n.periodUserIntendedDuration,l=s-i,p=i>s;return{periodType:n.type,periodDuration:s,elapsed:i,remaining:l>0?l:0,overtime:p?i-s:0,periodIndex:o?.currentPeriodIndex||0}}}catch{}return null},At=async t=>{const e=fr[t],n=_r();if(!e)return I(" Sound not found",t,2),pe(t,!1,new Error("Sound not found"),!1,n),!1;try{return!gt&&!await He()?(I(" Audio unlock failed for",t,2),pe(t,!1,new Error("Audio unlock failed"),!1,n),!1):(re.Howler.stop(),e.play(),I(" Sound played successfully",t,10),pe(t,!0,null,!1,n),!0)}catch(o){I(" Sound play failed",`${t}: ${o.message}`,2),pe(t,!1,o,!1,n);try{return await He(),e.play(),I(" Sound played after re-unlock",t,10),pe(t,!0,null,!0,n),!0}catch(i){return I(" Sound retry failed",`${t}: ${i.message}`,1),pe(t,!1,i,!0,n),!1}}},Z=t=>At(t),pr=()=>At("timerFinished"),hr=t=>(I(" Playing period sound",t,10),At(t)),mr=t=>{const e=t.split("/"),n=e[e.length-1],o=e[e.length-2],i=e.length>3?e[e.length-3]:null,s=parseInt(n.replace(".webm",""));return o==="timesup"?`timesup_${n.replace(".webm","")}`:o==="break"&&i==="overtime"?`overtime_break_${s}`:`${o}_${s}`},It=60*1e3,vr=[{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""}];class En{constructor(e=2e3,n=null){this.WINDOW_SIZE=e,this.overlappingGroup=new Map,this.activeWindows=new Set,this.availableSounds=n||J,this.maxRemainingMinutes=Math.max(...this.availableSounds.remaining)}getThreshold(e){const n=e-this.maxRemainingMinutes*6e4;return Math.max(e/2,n)}getAllPossibleWindows(e,n,o=null){const i=[];this.availableSounds.elapsed.forEach(p=>{i.push({type:"elapsed",minutes:p,targetMs:p*6e4,soundPath:`sounds/elapsed/${String(p).padStart(3,"0")}.webm`,key:`elapsed_${p}`,priority:1})}),this.availableSounds.remaining.forEach(p=>{const v=e-p*6e4;v>=0&&i.push({type:"remaining",minutes:p,targetMs:v,soundPath:`sounds/remaining/${String(p).padStart(3,"0")}.webm`,key:`remaining_${p}`,priority:2})});const s=o||"finish";return i.push({type:"timesup",targetMs:e,soundPath:`sounds/timesup/${s}.webm`,key:"timesup",priority:4}),(n==="break"?this.availableSounds.overtimeBreak:this.availableSounds.overtime).forEach(p=>{i.push({type:"overtime",minutes:p,targetMs:e+p*6e4,soundPath:n==="break"?`sounds/overtime/break/${String(p).padStart(3,"0")}.webm`:`sounds/overtime/${String(p).padStart(3,"0")}.webm`,key:`overtime_${p}`,priority:3})}),i}getActiveWindows(e,n,o,i=null){const s=this.getAllPossibleWindows(n,o,i);this.getThreshold(n);const l=[];for(const p of s)this._isInWindow(p.targetMs,e)&&l.push(p);return l}checkSounds(e,n,o,i,s=null){if(i)return this.clearState(),null;const l=this.getActiveWindows(e,n,o,s),p=new Set(l.map(_=>_.key));l.forEach(_=>{this.activeWindows.has(_.key)||this.overlappingGroup.set(_.key,_)});const v=[];for(const[_,w]of this.overlappingGroup)p.has(_)&&v.push(w);if(this.overlappingGroup.size>0&&v.length===0){const _=this.getThreshold(n),w=Array.from(this.overlappingGroup.values()).filter(a=>!(a.type==="elapsed"&&e>=_||a.type==="remaining"&&e<_)),r=this.selectHighestPriority(w);return this.overlappingGroup.clear(),this.activeWindows=p,r}return this.activeWindows=p,null}selectHighestPriority(e){if(e.length===0)return null;const n=[...e];return n.sort((o,i)=>o.priority!==i.priority?i.priority-o.priority:o.targetMs-i.targetMs),n[0]}_isInWindow(e,n){return Math.abs(n-e)<=this.WINDOW_SIZE}onPeriodChange(){this.clearState()}onDurationChange(){this.clearState()}onElapsedAdjustment(e,n){e<n&&this.clearState()}clearState(){this.overlappingGroup.clear(),this.activeWindows.clear()}}const Mt=({duration:t,type:e,note:n})=>({periodDuration:t,periodDurationElapsed:0,periodDurationRemaining:t,periodHasFinished:!1,periodUserIntendedDuration:t,type:e,note:n}),tt={currentPeriodIndex:null,runningIntervalId:null,timestampPaused:null,timestampStarted:null,types:["work","break","fun"],periods:vr.map(Mt)},On=t=>{const n=Math.floor(t/6e4)*6e4,o=t-n;return{roundedDown:n,remainder:o}},m=et(ur(tt)),Le=new En(5e3,J);let ve=null;const yr=()=>(ve||(ve=new Worker("/tymer/timer-worker.js"),ve.onmessage=t=>{Ir()}),ve),$=ne(()=>m.value.periods[m.value.periods.length-1]?.periodHasFinished),A=ne(()=>m.value.periods[m.value.currentPeriodIndex]),Ie=ne(()=>m.value.currentPeriodIndex+1>=m.value.periods.length),Et=ne(()=>m.value.periods.reduce((t,e)=>t+e.periodDuration,0)),U=ne(()=>m.value.periods.reduce((t,e)=>t+e.periodDurationElapsed,0)),je=ne(()=>m.value.periods.reduce((t,e)=>t+e.periodDurationRemaining,0)),wt=ne(()=>A.value&&A.value.periodDuration!==A.value.periodUserIntendedDuration),jt=ne(()=>{const t=m.value.periods,e=tt.periods;return t.length!==e.length?!0:t.some((n,o)=>{const i=e[o];return n.type!==i.type||n.note!==i.note||n.periodDuration!==i.periodDuration})}),gr=()=>{console.clear(),I("initializeTimer",m.value,2),!($.value||m.value.timestampPaused)&&(m.value.runningIntervalId?(ie(),Ot()):wr())},wr=()=>{nt(),F({timerProperties:{currentPeriodIndex:null,runningIntervalId:null,timestampPaused:null,timestampStarted:null}}),console.clear(),I("timer initialized (periods preserved)",m.value,7)},Ot=()=>{yr().postMessage("start"),F({timerProperties:{runningIntervalId:"worker-active"}})},nt=()=>{ve&&ve.postMessage("stop"),F({timerProperties:{runningIntervalId:null}})},$n=()=>{$.value||(Z("button"),F({timerProperties:{currentPeriodIndex:0,timestampStarted:Date.now()}}),ie(),Ot(),I("started timer",m.value,3))},Me=()=>{if($.value)return;Z("button");const t=Date.now()-m.value.timestampPaused;F({timerProperties:{timestampPaused:null,timestampStarted:m.value.timestampStarted+t}}),ie(),Ot(),I("resumed timer",m.value,13)},$t=()=>{$.value||(Z("button"),F({timerProperties:{timestampPaused:Date.now()}}),nt(),ie(),I("timer paused",m.value,8))},br=()=>{nt(),m.value={...tt},console.clear(),I("timer reset",m.value,7)},j=(t,e=!1)=>{if($.value||m.value.currentPeriodIndex===null)return;const n=Math.max(A.value.periodDurationElapsed,A.value.periodDuration+t),o={periodDuration:n};e||(o.periodUserIntendedDuration=n),F({currentPeriodProperties:o}),ie(),Le.onDurationChange(),I("duration adjusted",m.value,9)},V=t=>{if(m.value.currentPeriodIndex===null)return;ie(),F({timerProperties:{timestampStarted:m.value.timestampStarted+Math.min(A.value.periodDurationElapsed,-t)}}),ie();const e=A.value.periodDurationElapsed,n=e-t;Le.onElapsedAdjustment(e,n),I("time adjusted",m.value,6)},kr=(t,e,n)=>{const o=e||Date.now(),i=Math.max(0,o-t),s=Math.max(0,n-i);return{periodDurationElapsed:i,periodDurationRemaining:s}},Pr=(t,e)=>t>0&&t>=e,Sr=()=>{j(It,!0),I("period automatically extended",m.value,2)},ie=()=>{if(!A.value)return;const{periodDurationElapsed:t,periodDurationRemaining:e}=kr(m.value.timestampStarted,m.value.timestampPaused,A.value.periodDuration);Pr(t,A.value.periodDuration)&&Sr(),F({currentPeriodProperties:{periodDurationElapsed:t,periodDurationRemaining:e}})},Ne=()=>{if(m.value.currentPeriodIndex===null)return;const t=m.value.currentPeriodIndex+1,e=m.value.periods[t],{roundedDown:n,remainder:o}=On(A.value.periodDurationElapsed);F({currentPeriodProperties:{periodDuration:n,periodDurationElapsed:n,periodDurationRemaining:0,periodHasFinished:!0,periodUserIntendedDuration:n},timerProperties:{timestampStarted:(m.value.timestampPaused||Date.now())-e.periodDurationElapsed-o,currentPeriodIndex:m.value.currentPeriodIndex+1}}),Le.onPeriodChange(),I("finished current period",m.value,10)},rt=()=>{if(m.value.currentPeriodIndex===null||m.value.currentPeriodIndex===0)return;const t=m.value.currentPeriodIndex-1,e=m.value.periods[t],n=e.periodDuration+It,o=m.value.timestampStarted-e.periodDurationElapsed+A.value.periodDurationElapsed;F({previousPeriodProperties:{periodDuration:n,periodHasFinished:!1},currentPeriodProperties:{periodHasFinished:!1},timerProperties:{timestampStarted:o,currentPeriodIndex:t}}),ie(),I("jumped to previous period and added some time to the duration",m.value,13)},Cn=()=>{I("move time back",m.value,2);const t=A.value.periodDurationElapsed,e=m.value.currentPeriodIndex-1,o=m.value.periods[e].periodDuration+t;F({previousPeriodProperties:{periodDuration:o,periodDurationElapsed:o},timerProperties:{}}),V(-t),Le.onPeriodChange()},Hn=()=>{const t=m.value.types,e=A.value.type,o=(t.indexOf(e)+1)%t.length;F({currentPeriodProperties:{type:t[o]}}),I("changed current type",m.value,8)},Fn=()=>{if(m.value.currentPeriodIndex===null)return;const t=Mt({duration:1440*1e3,type:"fun"}),e=m.value.currentPeriodIndex;if(A.value.periodDurationElapsed>60*1e3){const o=[...m.value.periods];o.splice(e+1,0,t),F({timerProperties:{periods:o}}),Ne(),I("added new period after current and moved to it",m.value,5)}else{const o=[...m.value.periods];o.splice(e,0,t);const i=A.value.periodDuration;F({timerProperties:{periods:o,currentPeriodIndex:e,timestampStarted:m.value.timestampPaused||Date.now()}}),F({timerProperties:{periods:m.value.periods.map((s,l)=>l!==e+1?s:{...s,periodDuration:i,periodDurationElapsed:0,periodDurationRemaining:i,periodHasFinished:!1})}}),I("added new period before current, reset current period elapsed time",m.value,5)}},xr=()=>{if(m.value.currentPeriodIndex===null||m.value.periods.length<=1)return;const t=m.value.currentPeriodIndex,e=t===m.value.periods.length-1,n=t;e?rt():Ne();const o=m.value.periods.filter((s,l)=>l!==n),i=e?m.value.currentPeriodIndex:m.value.currentPeriodIndex-1;F({timerProperties:{periods:o,currentPeriodIndex:i}}),I("removed period",m.value,5)},Dr=()=>{nt();const{roundedDown:t}=On(A.value.periodDurationElapsed);F({currentPeriodProperties:{periodDuration:t,periodDurationElapsed:t,periodDurationRemaining:0,periodHasFinished:!0}}),F({timerProperties:{timestampStarted:null,currentPeriodIndex:null,periods:m.value.periods.filter(e=>e.periodDurationElapsed>=It)}}),I("finished last period",m.value,1),Z("timerFinished")},Re=(t,e)=>{const n=m.value.periods.map((o,i)=>i===t?{...o,...e}:o);F({timerProperties:{periods:n}}),I("updated period",{periodIndex:t,updates:e},5)},Tr=t=>{if(m.value.periods.length<=1||t<0||t>=m.value.periods.length)return;m.value.currentPeriodIndex===t&&(t===m.value.periods.length-1?rt():Ne());const e=m.value.periods.filter((o,i)=>i!==t);let n=m.value.currentPeriodIndex;n!==null&&n>t?n=n-1:n===t&&(n=t===m.value.periods.length-1?m.value.currentPeriodIndex:m.value.currentPeriodIndex-1),F({timerProperties:{periods:e,currentPeriodIndex:n}}),I("removed period by index",{periodIndex:t,newLength:e.length},5)},qe=et(null),Ar=(t,e={duration:1440*1e3,type:"fun",note:""})=>{const n=Mt(e),o=[...m.value.periods],i=t+1;o.splice(i,0,n);let s=m.value.currentPeriodIndex;s!==null&&s>t&&(s=s+1),F({timerProperties:{periods:o,currentPeriodIndex:s}}),qe.value=i,I("added period at index",{afterIndex:t,newLength:o.length},5)},F=t=>{const{previousPeriodProperties:e={},currentPeriodProperties:n={},timerProperties:o={}}=t;wn(()=>{if(m.value.currentPeriodIndex===0&&Object.keys(e).length>0){console.error("Tried to update the previous period but there is none. Aborting. State not changed.");return}Object.keys(e).length>0&&(m.value={...m.value,periods:m.value.periods.map((i,s)=>s!==m.value.currentPeriodIndex-1?i:{...i,...e})}),Object.keys(n).length>0&&(m.value={...m.value,periods:m.value.periods.map((i,s)=>s!==m.value.currentPeriodIndex?i:{...i,...n})}),Object.keys(o).length>0&&(m.value={...m.value,...o})})},Ir=()=>{if(ie(),A.value){const t=A.value.periodDurationElapsed,e=A.value.periodUserIntendedDuration,n=A.value.type,o=m.value.timestampPaused!==null,s=m.value.currentPeriodIndex+1,l=m.value.periods[s],p=l?l.type:"finish",v=Le.checkSounds(t,e,n,o,p);if(v){const _=mr(v.soundPath);hr(_)}}$.value&&pr()};be(()=>{sr(m.value)});typeof window<"u"&&(window.__timerModule={timerState:m,currentPeriod:A});const Y=(t,{mode:e,debug:n,compact:o}={})=>{if(t==null)return":";if(n){const v=Math.floor(t/1e3),_=Math.floor(v/3600),w=Math.floor(v%3600/60),r=v%60,a=(u,f=2,d="0")=>u.toString().padStart(f,d);return`${a(_)}:${a(w)}:${a(r)} ${a(t,6," ")} ms`}let i;e==="elapsed"?i=Math.floor(t/(60*1e3)):e==="remaining"?i=Math.ceil(t/(60*1e3)):i=Math.round(t/(60*1e3));const s=Math.floor(i/60),l=i%60,p=(v,_=2,w="0")=>v.toString().padStart(_,w);return o&&s===0?`${l}`:`${s}:${p(l)}`},K=t=>Math.floor(t/6e4),Mr=({period:t})=>g(X,{children:g("div",{class:"timeline__current-time",style:`--elapsed-minutes: ${K(t.periodDurationElapsed)};`,children:[g("span",{class:"timeline__elapsed timeline__elapsed--period",children:[Y(A.value.periodDurationElapsed,{mode:"elapsed"}),g("span",{class:"timeline__symbol",children:"  "}),Y(A.value.periodDurationRemaining,{mode:"remaining"})]}),g("span",{class:"timeline__elapsed timeline__elapsed--timer",children:Y(m.value.periods.reduce((e,n)=>e+n.periodDurationElapsed,0),{mode:"elapsed"})})]})}),H=({onClick:t,onChange:e,onBlur:n,children:o,as:i="button",playOnClick:s=!1,playOnChange:l=!1,playOnBlur:p=!1,...v})=>g(i,{...v,onClick:async u=>{s&&await Z("button"),t&&t(u)},onChange:async u=>{l&&await Z("button"),e&&e(u)},onBlur:async u=>{p&&await Z("button"),n&&n(u)},children:o}),Er=({period:t,isActive:e,endTime:n,startTime:o,index:i})=>{const[s,l]=Ge(!1),[p,v]=Ge(!1),[_,w]=Ge(null),r=Jn(),a=["work","break","fun"],u=async()=>{await Z("button");const P=m.value.runningIntervalId!==null;v(P),P&&$t(),w({type:t.type,note:t.note,periodDuration:t.periodDuration,periodUserIntendedDuration:t.periodUserIntendedDuration,periodDurationRemaining:t.periodDurationRemaining}),l(!0)},f=Ut(()=>{l(!1),w(null),p&&Me()},[p]),d=Ut(()=>{_&&Re(i,_),l(!1),w(null),p&&Me()},[_,i,p]),h=P=>{Re(i,{type:P})},c=P=>{const T=P*60*1e3,D={periodDuration:T,periodUserIntendedDuration:T};e?D.periodDurationRemaining=Math.max(0,T-t.periodDurationElapsed):t.periodHasFinished||t.periodDurationRemaining===0?(D.periodDurationElapsed=T,D.periodDurationRemaining=0):D.periodDurationRemaining=T,Re(i,D)},y=P=>{Re(i,{note:P})},b=()=>{e&&m.value.periods.length===1||(Tr(i),l(!1),p&&Me())},k=P=>{P.stopPropagation(),Ar(i)};return ye(()=>{qe.value===i&&(qe.value=null,u())},[qe.value,i]),ye(()=>{if(!s)return;const P=async D=>{r.current&&!r.current.contains(D.target)&&(await Z("button"),f())},T=async D=>{D.key==="Escape"?(await Z("button"),d()):D.key==="Enter"&&(await Z("button"),f())};return document.addEventListener("mousedown",P),document.addEventListener("keydown",T),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("keydown",T)}},[s,f,d]),s?g("div",{ref:r,class:`
                    timeline__period
                    timeline__period--${t.type}
                    timeline__period--editing
                `,style:`--period-minutes: ${Math.round(t.periodDuration/(60*1e3))};`,children:g("div",{class:"timeline__text timeline__edit-form",children:[g("div",{className:"timeline__edit-row",children:[g("section",{className:"controls mb-0",children:g("div",{className:"button-group button-group--tight button-group--connected",children:(()=>{const P=Math.round(t.periodDuration/6e4),T=Math.floor(P/60),D=P%60,E=Math.round(t.periodDurationElapsed/(60*1e3));return[0,1,2,3,4].map(S=>g("button",{className:`button-group-item ${T===S?"button-group-item--active":""}`,onClick:()=>c(S*60+D),disabled:e&&S*60+D<E,children:S},S))})()})}),g("input",{type:"number",value:Math.round(t.periodDuration/(60*1e3)),onChange:P=>c(parseInt(P.target.value)||Math.max(1,Math.round(t.periodDurationElapsed/(60*1e3)))),className:"timeline__edit-duration",min:e?Math.round(t.periodDurationElapsed/(60*1e3)):1,max:"900"}),g("section",{className:"controls mb-0",children:g("div",{className:"button-group button-group--tight button-group--connected",children:(()=>{const P=Math.round(t.periodDuration/6e4),T=Math.floor(P/60),D=P%60,E=Math.round(t.periodDurationElapsed/(60*1e3));return[0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57].map(S=>{const N=[0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57],C=N.findIndex(G=>G===D),B=D===S;let le=!1;if(!B&&C===-1){const G=N.findLastIndex(it=>it<D),_e=N.findIndex(it=>it>D);le=G!==-1&&S===N[G]||_e!==-1&&S===N[_e]}return g("button",{className:`button-group-item ${S%12===0?"fw-900":S%6===0?"button--sm":"button--xs"} ${B?"button-group-item--active":le?"button-group-item--semiactive":""}`,onClick:()=>c(T*60+S),disabled:B&&T*60+S<E,children:S},S)})})()})})]}),g("div",{class:"timeline__edit-row",children:[g("div",{class:"button-group button-group--connected",children:a.map(P=>g(H,{type:"button",class:`button-group-item ${t.type===P?"button-group-item--active":""}`,onClick:()=>h(P),children:P},P))}),g("input",{type:"text",value:t.note||"",onChange:P=>y(P.target.value),placeholder:"Note",class:"timeline__edit-note"}),g(H,{onClick:b,class:"timeline__edit-delete",title:"Delete period",disabled:e&&m.value.periods.length===1,children:""})]})]})}):g(H,{as:"div",class:`
                    timeline__period
                    timeline__period--${t.type}
                    ${e?"timeline__period--active":""}
                    timeline__period--editable
                `,style:`--period-minutes: ${K(t.periodDuration)};--userintended-minutes: ${K(t.periodUserIntendedDuration)};`,onClick:u,children:[g("div",{className:"timeline__text",children:[g("div",{className:"timeline__period-duration",children:Y(t.periodDuration,{compact:!0})}),t.note&&g("div",{className:"timeline__note",children:t.note}),i===0&&o&&g("div",{className:"timeline__start-time",dangerouslySetInnerHTML:{__html:o}}),g("div",{className:"timeline__end-time",dangerouslySetInnerHTML:{__html:n}})]}),g("div",{class:"timeline__elapsed-time",style:`--elapsed-minutes: ${K(t.periodDurationElapsed)};`,children:e&&g(Mr,{period:t})}),e&&g("div",{class:"timeline__subinterval"}),e&&t.periodDurationElapsed>t.periodUserIntendedDuration&&g("div",{class:"timeline__userintended"}),g(H,{class:"button timeline__add-period",onClick:k,title:"Add period after this one",children:""})]})},Ln=6048e5,Or=864e5,Xt=Symbol.for("constructDateFrom");function ue(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&Xt in t?t[Xt](e):t instanceof Date?new t.constructor(e):new Date(e)}function z(t,e){return ue(e||t,t)}let $r={};function ot(){return $r}function Fe(t,e){const n=ot(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=z(t,e?.in),s=i.getDay(),l=(s<o?7:0)+s-o;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function Xe(t,e){return Fe(t,{...e,weekStartsOn:1})}function Nn(t,e){const n=z(t,e?.in),o=n.getFullYear(),i=ue(n,0);i.setFullYear(o+1,0,4),i.setHours(0,0,0,0);const s=Xe(i),l=ue(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const p=Xe(l);return n.getTime()>=s.getTime()?o+1:n.getTime()>=p.getTime()?o:o-1}function Qt(t){const e=z(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Cr(t,...e){const n=ue.bind(null,e.find(o=>typeof o=="object"));return e.map(n)}function Zt(t,e){const n=z(t,e?.in);return n.setHours(0,0,0,0),n}function Hr(t,e,n){const[o,i]=Cr(n?.in,t,e),s=Zt(o),l=Zt(i),p=+s-Qt(s),v=+l-Qt(l);return Math.round((p-v)/Or)}function Fr(t,e){const n=Nn(t,e),o=ue(t,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),Xe(o)}function Lr(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function Nr(t){return!(!Lr(t)&&typeof t!="number"||isNaN(+z(t)))}function Wr(t,e){const n=z(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const Rr={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Br=(t,e,n)=>{let o;const i=Rr[t];return typeof i=="string"?o=i:e===1?o=i.one:o=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function lt(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const Gr={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},Yr={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},qr={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Ur={date:lt({formats:Gr,defaultWidth:"full"}),time:lt({formats:Yr,defaultWidth:"full"}),dateTime:lt({formats:qr,defaultWidth:"full"})},Vr={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Kr=(t,e,n,o)=>Vr[t];function Se(t){return(e,n)=>{const o=n?.context?String(n.context):"standalone";let i;if(o==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,p=n?.width?String(n.width):l;i=t.formattingValues[p]||t.formattingValues[l]}else{const l=t.defaultWidth,p=n?.width?String(n.width):t.defaultWidth;i=t.values[p]||t.values[l]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const jr={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Xr={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Qr={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},Zr={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},Jr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},zr={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},eo=(t,e)=>{const n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},to={ordinalNumber:eo,era:Se({values:jr,defaultWidth:"wide"}),quarter:Se({values:Xr,defaultWidth:"wide",argumentCallback:t=>t-1}),month:Se({values:Qr,defaultWidth:"wide"}),day:Se({values:Zr,defaultWidth:"wide"}),dayPeriod:Se({values:Jr,defaultWidth:"wide",formattingValues:zr,defaultFormattingWidth:"wide"})};function xe(t){return(e,n={})=>{const o=n.width,i=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const l=s[0],p=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],v=Array.isArray(p)?ro(p,r=>r.test(l)):no(p,r=>r.test(l));let _;_=t.valueCallback?t.valueCallback(v):v,_=n.valueCallback?n.valueCallback(_):_;const w=e.slice(l.length);return{value:_,rest:w}}}function no(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function ro(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function oo(t){return(e,n={})=>{const o=e.match(t.matchPattern);if(!o)return null;const i=o[0],s=e.match(t.parsePattern);if(!s)return null;let l=t.valueCallback?t.valueCallback(s[0]):s[0];l=n.valueCallback?n.valueCallback(l):l;const p=e.slice(i.length);return{value:l,rest:p}}}const io=/^(\d+)(th|st|nd|rd)?/i,ao=/\d+/i,so={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},uo={any:[/^b/i,/^(a|c)/i]},lo={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},co={any:[/1/i,/2/i,/3/i,/4/i]},fo={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},_o={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},po={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},ho={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},mo={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},vo={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yo={ordinalNumber:oo({matchPattern:io,parsePattern:ao,valueCallback:t=>parseInt(t,10)}),era:xe({matchPatterns:so,defaultMatchWidth:"wide",parsePatterns:uo,defaultParseWidth:"any"}),quarter:xe({matchPatterns:lo,defaultMatchWidth:"wide",parsePatterns:co,defaultParseWidth:"any",valueCallback:t=>t+1}),month:xe({matchPatterns:fo,defaultMatchWidth:"wide",parsePatterns:_o,defaultParseWidth:"any"}),day:xe({matchPatterns:po,defaultMatchWidth:"wide",parsePatterns:ho,defaultParseWidth:"any"}),dayPeriod:xe({matchPatterns:mo,defaultMatchWidth:"any",parsePatterns:vo,defaultParseWidth:"any"})},go={code:"en-US",formatDistance:Br,formatLong:Ur,formatRelative:Kr,localize:to,match:yo,options:{weekStartsOn:0,firstWeekContainsDate:1}};function wo(t,e){const n=z(t,e?.in);return Hr(n,Wr(n))+1}function bo(t,e){const n=z(t,e?.in),o=+Xe(n)-+Fr(n);return Math.round(o/Ln)+1}function Wn(t,e){const n=z(t,e?.in),o=n.getFullYear(),i=ot(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=ue(e?.in||t,0);l.setFullYear(o+1,0,s),l.setHours(0,0,0,0);const p=Fe(l,e),v=ue(e?.in||t,0);v.setFullYear(o,0,s),v.setHours(0,0,0,0);const _=Fe(v,e);return+n>=+p?o+1:+n>=+_?o:o-1}function ko(t,e){const n=ot(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Wn(t,e),s=ue(e?.in||t,0);return s.setFullYear(i,0,o),s.setHours(0,0,0,0),Fe(s,e)}function Po(t,e){const n=z(t,e?.in),o=+Fe(n,e)-+ko(n,e);return Math.round(o/Ln)+1}function O(t,e){const n=t<0?"-":"",o=Math.abs(t).toString().padStart(e,"0");return n+o}const ae={y(t,e){const n=t.getFullYear(),o=n>0?n:1-n;return O(e==="yy"?o%100:o,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):O(n+1,2)},d(t,e){return O(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return O(t.getHours()%12||12,e.length)},H(t,e){return O(t.getHours(),e.length)},m(t,e){return O(t.getMinutes(),e.length)},s(t,e){return O(t.getSeconds(),e.length)},S(t,e){const n=e.length,o=t.getMilliseconds(),i=Math.trunc(o*Math.pow(10,n-3));return O(i,e.length)}},he={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Jt={G:function(t,e,n){const o=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const o=t.getFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return ae.y(t,e)},Y:function(t,e,n,o){const i=Wn(t,o),s=i>0?i:1-i;if(e==="YY"){const l=s%100;return O(l,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):O(s,e.length)},R:function(t,e){const n=Nn(t);return O(n,e.length)},u:function(t,e){const n=t.getFullYear();return O(n,e.length)},Q:function(t,e,n){const o=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return O(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,e,n){const o=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return O(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,e,n){const o=t.getMonth();switch(e){case"M":case"MM":return ae.M(t,e);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,e,n){const o=t.getMonth();switch(e){case"L":return String(o+1);case"LL":return O(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,e,n,o){const i=Po(t,o);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):O(i,e.length)},I:function(t,e,n){const o=bo(t);return e==="Io"?n.ordinalNumber(o,{unit:"week"}):O(o,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ae.d(t,e)},D:function(t,e,n){const o=wo(t);return e==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):O(o,e.length)},E:function(t,e,n){const o=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,e,n,o){const i=t.getDay(),s=(i-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return O(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,o){const i=t.getDay(),s=(i-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return O(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const o=t.getDay(),i=o===0?7:o;switch(e){case"i":return String(i);case"ii":return O(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const o=t.getHours();let i;switch(o===12?i=he.noon:o===0?i=he.midnight:i=o/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const o=t.getHours();let i;switch(o>=17?i=he.evening:o>=12?i=he.afternoon:o>=4?i=he.morning:i=he.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let o=t.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return ae.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ae.H(t,e)},K:function(t,e,n){const o=t.getHours()%12;return e==="Ko"?n.ordinalNumber(o,{unit:"hour"}):O(o,e.length)},k:function(t,e,n){let o=t.getHours();return o===0&&(o=24),e==="ko"?n.ordinalNumber(o,{unit:"hour"}):O(o,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ae.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ae.s(t,e)},S:function(t,e){return ae.S(t,e)},X:function(t,e,n){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return en(o);case"XXXX":case"XX":return de(o);case"XXXXX":case"XXX":default:return de(o,":")}},x:function(t,e,n){const o=t.getTimezoneOffset();switch(e){case"x":return en(o);case"xxxx":case"xx":return de(o);case"xxxxx":case"xxx":default:return de(o,":")}},O:function(t,e,n){const o=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+zt(o,":");case"OOOO":default:return"GMT"+de(o,":")}},z:function(t,e,n){const o=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+zt(o,":");case"zzzz":default:return"GMT"+de(o,":")}},t:function(t,e,n){const o=Math.trunc(+t/1e3);return O(o,e.length)},T:function(t,e,n){return O(+t,e.length)}};function zt(t,e=""){const n=t>0?"-":"+",o=Math.abs(t),i=Math.trunc(o/60),s=o%60;return s===0?n+String(i):n+String(i)+e+O(s,2)}function en(t,e){return t%60===0?(t>0?"-":"+")+O(Math.abs(t)/60,2):de(t,e)}function de(t,e=""){const n=t>0?"-":"+",o=Math.abs(t),i=O(Math.trunc(o/60),2),s=O(o%60,2);return n+i+e+s}const tn=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Rn=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},So=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return tn(t,e);let s;switch(o){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",tn(o,e)).replace("{{time}}",Rn(i,e))},xo={p:Rn,P:So},Do=/^D+$/,To=/^Y+$/,Ao=["D","DD","YY","YYYY"];function Io(t){return Do.test(t)}function Mo(t){return To.test(t)}function Eo(t,e,n){const o=Oo(t,e,n);if(console.warn(o),Ao.includes(t))throw new RangeError(o)}function Oo(t,e,n){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const $o=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Co=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Ho=/^'([^]*?)'?$/,Fo=/''/g,Lo=/[a-zA-Z]/;function De(t,e,n){const o=ot(),i=o.locale??go,s=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,p=z(t,n?.in);if(!Nr(p))throw new RangeError("Invalid time value");let v=e.match(Co).map(w=>{const r=w[0];if(r==="p"||r==="P"){const a=xo[r];return a(w,i.formatLong)}return w}).join("").match($o).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const r=w[0];if(r==="'")return{isToken:!1,value:No(w)};if(Jt[r])return{isToken:!0,value:w};if(r.match(Lo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(v=i.localize.preprocessor(p,v));const _={firstWeekContainsDate:s,weekStartsOn:l,locale:i};return v.map(w=>{if(!w.isToken)return w.value;const r=w.value;(Mo(r)||Io(r))&&Eo(r,e,String(t));const a=Jt[r[0]];return a(p,r,i.localize,_)}).join("")}function No(t){const e=t.match(Ho);return e?e[1].replace(Fo,"'"):t}const Wo=({periods:t,currentPeriodIndex:e})=>{if(!Array.isArray(t)||!t.length)return[];const n=Date.now(),o=t.reduce((l,p)=>l+(p.periodDurationElapsed||0),0);let i=0,s=null;return t.map((l,p)=>{if(e==null)return s=(s??n)+l.periodDuration,De(new Date(s),"HH'<br>'mm");if(p<e){i+=l.periodDuration;const _=n-o+(i-l.periodDuration)+l.periodDuration;return s=_,De(new Date(_),"HH'<br>'mm")}if(p===e){const v=l.periodDuration-(l.periodDurationElapsed||0),_=n+v;return s=_,De(new Date(_),"HH'<br>'mm")}return s=(s??n)+l.periodDuration,De(new Date(s),"HH'<br>'mm")})},Ro=({periods:t})=>{if(!Array.isArray(t)||!t.length)return"";const e=Date.now(),n=t.reduce((o,i)=>o+(i.periodDurationElapsed||0),0);return De(new Date(e-n),"HH'<br>'mm")},Bo=({periods:t,currentPeriodIndex:e})=>{if(!Array.isArray(t)||!t.length)return[];const n=Wo({periods:t,currentPeriodIndex:e}),o=Ro({periods:t}),i=(s,l)=>({key:l,period:s,isActive:l===e,endTime:n[l],startTime:l===0?o:void 0,index:l});return t.map(i)},Go=()=>{const t=Je(()=>Bo({periods:m.value.periods,currentPeriodIndex:m.value.currentPeriodIndex}),[m.value.periods,m.value.currentPeriodIndex,m.value.elapsed]);return t.length?g("div",{class:"timeline",style:`--total-minutes: ${K(Et.value)}`,children:t.map(e=>g(Er,{...e}))}):null},Yo=()=>{const t=async()=>{await He(),m.value.runningIntervalId?$t():m.value.timestampPaused?Me():$n()};return g(X,{children:g("section",{class:"controls",children:[g(H,{onClick:br,disabled:!jt.value&&!m.value.timestampStarted&&je.value!==0||m.value.currentPeriodIndex===null&&!$.value&&!jt.value,class:$.value?"highlighted":"",children:" Reset"}),g(H,{onClick:t,disabled:$.value||!je.value,children:m.value.runningIntervalId?"":m.value.timestampPaused?"":" Start"}),g("div",{className:"button-group",children:[g(H,{onClick:rt,disabled:$.value||m.value.currentPeriodIndex===null||m.value.currentPeriodIndex===0,children:""}),g(H,{onClick:Ne,disabled:$.value||m.value.currentPeriodIndex===null||Ie.value,class:!Ie.value&&wt.value?"highlighted":"",children:""})]}),g(H,{onClick:Dr,disabled:$.value||m.value.currentPeriodIndex===null||U<60*1e3,class:Ie.value&&wt.value?"highlighted":"",children:" Finish"})]})})},qo=()=>g(X,{children:[g("section",{className:"controls",children:[g("div",{class:"button-group",children:g(H,{onClick:Cn,disabled:m.value.currentPeriodIndex===null||U.value===0||m.value.currentPeriodIndex===0,children:"move time to previous"})}),g("div",{class:"button-group",children:[g(H,{onClick:()=>V(-U.value),disabled:m.value.currentPeriodIndex===null||U.value===0,children:""}),g(H,{onClick:()=>V(-360*1e3),disabled:m.value.currentPeriodIndex===null||U.value===0,children:"<--- 6 m"}),g(H,{onClick:()=>V(-60*1e3),disabled:m.value.currentPeriodIndex===null||U.value===0,children:"<-- 1 m"}),g(H,{onClick:()=>V(60*1e3),disabled:m.value.currentPeriodIndex===null,children:"1 m -->"}),g(H,{onClick:()=>V(360*1e3),disabled:m.value.currentPeriodIndex===null,children:"6 m --->"})]})]}),g("section",{className:"controls mb-0",children:g("div",{class:"button-group",children:[g(H,{onClick:()=>j(-360*1e3),disabled:$.value||m.value.currentPeriodIndex===null||!m.value.periods.some(t=>t.periodDurationRemaining>0)||A.value.periodDurationRemaining<120*1e3,children:" 6 min"}),g(H,{onClick:()=>j(-60*1e3),disabled:$.value||m.value.currentPeriodIndex===null||!m.value.periods.some(t=>t.periodDurationRemaining>0)||A.value.periodDurationRemaining<60*1e3,children:" 1 min"}),g(H,{onClick:()=>j(60*1e3),disabled:$.value||m.value.currentPeriodIndex===null,children:" 1 min"}),g(H,{onClick:()=>j(360*1e3),disabled:$.value||m.value.currentPeriodIndex===null,children:" 6 min"})]})}),g("section",{className:"controls",children:[g(H,{onClick:Hn,disabled:m.value.currentPeriodIndex===null,children:"change type"}),g("div",{class:"button-group",children:[g(H,{onClick:Fn,disabled:m.value.currentPeriodIndex===null,children:"add period"}),g(H,{onClick:xr,disabled:m.value.currentPeriodIndex===null||m.value.periods.length<=1,children:"remove period"})]})]})]}),Uo=({periodSums:t})=>{const e=(n,o)=>{const i=t[n][o],s=o==="current",l=s&&i.duration!==i.durationElapsed;return g("div",{class:`stats-bar stats-bar--${n} stats-bar--${o}`,children:[g("div",{class:"stats-text",children:s?Y(i.duration):`${n} ${Y(i.duration)}`}),l&&g("div",{class:`
                            stats-elapsed
                            ${i.durationElapsed<6e4?"stats-elapsed--none":""}
                        `,children:g("div",{class:"stats-text stats-elapsed-text",children:Y(i.durationElapsed,{mode:"elapsed"})})})]})};return g("div",{class:"stats-bars",children:[e("break","original"),e("break","current"),e("fun","original"),e("fun","current"),e("work","original"),e("work","current")]})},Vo=()=>{const t=({periods:o,type:i})=>{const s=l=>o.reduce((p,v)=>v.type===i?p+v[l]:p,0);return{duration:s("periodDuration"),durationElapsed:s("periodDurationElapsed"),durationRemaining:s("periodDurationRemaining")}},n=(({initialPeriods:o,currentPeriods:i})=>{const s=p=>v=>t({periods:p,type:v});return m.value.types.reduce((p,v)=>({...p,[v]:{original:s(o)(v),current:s(i)(v)}}),{})})({initialPeriods:tt.periods,currentPeriods:m.value.periods});return g("div",{class:"stats",style:`
                --break-original: ${K(n.break.original.duration)};
                --break-planned: ${K(n.break.current.duration)};
                --break-elapsed: ${K(n.break.current.durationElapsed)};
            
                --fun-original: ${K(n.fun.original.duration)};
                --fun-planned: ${K(n.fun.current.duration)};
                --fun-elapsed: ${K(n.fun.current.durationElapsed)};
            
                --work-original: ${K(n.work.original.duration)};
                --work-planned: ${K(n.work.current.duration)};
                --work-elapsed: ${K(n.work.current.durationElapsed)};
            `,children:[g("h2",{children:["Stats",g("br",{}),g("small",{children:[Y(Et.value)," total"]})]}),g(Uo,{periodSums:n})]})},Ko=()=>g("div",{class:"tempPeriods",children:[g("div",{class:"tempPeriod",children:[g("div",{class:"tempPeriod__data",children:"Type"}),g("div",{class:"tempPeriod__data",children:"Duration"}),g("div",{class:"tempPeriod__data",children:"User Intended"}),g("div",{class:"tempPeriod__data",children:"Remaining"}),g("div",{class:"tempPeriod__data",children:"Elapsed"}),g("div",{class:"tempPeriod__data",children:"Finished"})]}),m.value.periods.map((t,e)=>g("div",{class:`
                    tempPeriod 
                    ${e===m.value.currentPeriodIndex?"tempPeriod--current":""}
                    ${t.periodHasFinished?"tempPeriod--finished":""}
                `,children:[g("div",{class:"tempPeriod__data",children:t.type}),g("div",{class:"tempPeriod__data",children:Y(t.periodDuration,{debug:!0})}),g("div",{class:"tempPeriod__data",children:t.periodUserIntendedDuration===t.periodDuration?"same as duration":Y(t.periodUserIntendedDuration,{debug:!0})}),g("div",{class:"tempPeriod__data",children:Y(t.periodDurationRemaining,{mode:"remaining",debug:!0})}),g("div",{class:"tempPeriod__data",children:Y(t.periodDurationElapsed,{mode:"elapsed",debug:!0})}),g("div",{class:"tempPeriod__data",children:t.periodHasFinished?"yes":"no"})]},e))]}),dt=new En(5e3,J),jo=()=>{if(!A.value)return g("p",{children:"No current period"});const t=A.value,e=t.periodUserIntendedDuration,n=t.type,o=t.periodDurationElapsed,s=m.value.currentPeriodIndex+1,l=m.value.periods[s],p=l?l.type:"finish",v=y=>Y(y,{debug:!0}),_=dt.getAllPossibleWindows(e,n,p),w=[],r=dt.getThreshold(e);for(const y of _){let b=!1;for(const k of w){const P=k[0].targetMs;if(Math.abs(y.targetMs-P)<=2e3){k.push(y),b=!0;break}}b||w.push([y])}const a=w.sort((y,b)=>y[0].targetMs-b[0].targetMs).map(y=>{const b=y.filter(D=>{const E=D.targetMs;return!(D.type==="elapsed"&&E>=r||D.type==="remaining"&&E<r)});if(b.length===0)return null;const k=dt.selectHighestPriority(b),P=b.filter(D=>D!==k),T=y.filter(D=>!b.includes(D));return{targetMs:y[0].targetMs,winner:k,competitors:P,filteredOut:T,allWindows:y,originalCount:y.length,validCount:b.length}}).filter(Boolean),u=y=>y.type==="timesup"?"timesup":y.type==="elapsed"?`elapsed ${y.minutes}min`:y.type==="remaining"?`remaining ${y.minutes}min`:y.type==="overtime"?`overtime ${y.minutes}min`:y.type,f=y=>y.type==="timesup"?`timesup_${p==="finish"?"finish":p}`:y.key,d=(y,b)=>{const P=b-y;return P<-2e3?"future":Math.abs(P)<=2e3?"current":"played"},h=y=>{switch(y){case"future":return{text:" Future",color:"#666",style:"normal"};case"current":return{text:" Active",color:"#e67e22",style:"bold"};case"played":return{text:" Played",color:"#27ae60",style:"normal"};default:return{text:y,color:"#666",style:"normal"}}},c=y=>new Date(y).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return g("div",{style:{marginBottom:"16px"},children:[g("h4",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"},children:["Sound Notifications for Current Period (",n,")"]}),g("div",{class:"sound-notifications",children:[g("div",{class:"sound-notifications__header",children:[g("span",{children:"Status"}),g("span",{children:"Time from Start"}),g("span",{children:"Time from End"}),g("span",{children:"Time to Notification"}),g("span",{children:"Winner"}),g("span",{children:"Competitors"})]}),a.map((y,b)=>{const k=e-y.targetMs,P=d(y.targetMs,o),T=h(P),D=P==="current",E=y.targetMs-o;return g("div",{class:`sound-notifications__row ${D?"sound-notifications__row--active":""}`,children:[g("span",{style:{fontSize:"0.65rem",color:T.color,fontWeight:T.style},children:T.text}),g("code",{children:v(y.targetMs)}),g("code",{children:k>=0?`-${v(k)}`:`+${v(-k)}`}),g("code",{style:{color:E>0?"#2196F3":E<-2e3?"#999":"#e67e22",fontWeight:E<=2e3&&E>=-2e3?"bold":"normal"},children:E>=0?`in ${v(E)}`:`${v(-E)} ago`}),g("span",{style:{fontSize:"0.7rem",fontWeight:"bold",color:"#2d8f47"},children:f(y.winner)}),g("span",{style:{fontSize:"0.65rem",color:"#666",fontStyle:"italic"},children:y.competitors.length>0?y.competitors.map(S=>u(S)).join(", "):y.filteredOut.length>0?y.filteredOut.map(S=>u(S)).join(", "):""})]},b)})]}),Ae.length>0&&g(X,{children:[g("h4",{style:{margin:"16px 0 8px 0",fontSize:"0.9rem"},children:"Recent Sound Playback Log"}),g("div",{class:"sound-playback-log",children:[g("div",{class:"sound-playback-log__header",children:[g("span",{children:"Time"}),g("span",{children:"Sound"}),g("span",{children:"Status"}),g("span",{children:"Period Context"}),g("span",{children:"Error"})]}),Ae.slice(0,10).map((y,b)=>g("div",{class:"sound-playback-log__row",children:[g("code",{style:{fontSize:"0.65rem"},children:c(y.timestamp)}),g("span",{style:{fontSize:"0.7rem"},children:y.soundKey}),g("span",{style:{fontSize:"0.65rem",color:y.success?"#27ae60":"#e74c3c",fontWeight:"bold"},children:y.success?y.retry?" Success (retry)":" Success":y.retry?" Failed (retry)":" Failed"}),g("span",{style:{fontSize:"0.6rem",color:"#666"},children:y.periodContext?g("div",{style:{lineHeight:"1.2"},children:[g("div",{style:{color:"#2196F3",fontWeight:"bold"},children:[y.periodContext.periodType," #",y.periodContext.periodIndex+1]}),g("div",{children:["Duration:"," ",v(y.periodContext.periodDuration)]}),g("div",{children:["Elapsed:"," ",v(y.periodContext.elapsed)]}),g("div",{children:["Remaining:"," ",v(y.periodContext.remaining)]}),y.periodContext.overtime>0&&g("div",{style:{color:"#e67e22",fontWeight:"bold"},children:["Overtime:"," ",v(y.periodContext.overtime)]})]}):g("span",{style:{color:"#999",fontStyle:"italic"},children:"No period data"})}),g("span",{style:{fontSize:"0.6rem",color:"#999",fontStyle:"italic"},children:y.error||""})]},b))]})]})]})},Xo=()=>g("details",{children:[g("summary",{children:"Debugging values"}),g(jo,{}),g("p",{children:[g("code",{children:"timerDuration"})," ",Y(Et.value,{debug:!0}),g("br",{}),g("code",{children:"timerDurationElapsed "})," ",Y(U.value,{mode:"elapsed",debug:!0}),g("br",{}),g("code",{children:"timerDurationRemaining "})," ",Y(je.value,{mode:"remaining",debug:!0}),g("br",{}),g("code",{children:"currentPeriodIndex "})," ",m.value.currentPeriodIndex,g("br",{}),g("code",{children:"timestampStarted "})," ",(m.value.timestampStarted||0).toLocaleString(),g("br",{}),g("code",{children:"timestampPaused "})," ",(m.value.timestampPaused||0).toLocaleString(),g("br",{}),g("code",{children:"shouldGoToNextPeriod "})," ",wt.value?"YES":"no",g("br",{}),g("code",{children:"timerOnLastPeriod "})," ",Ie.value?"YES":"no",g("br",{}),g("code",{children:"timerHasFinished "})," ",$.value?"YES":"no"]}),g(Ko,{})]});function Qo(){return g("div",{class:"build-info",children:""})}function Zo(){return ye(()=>{const t=async e=>{const n=document.activeElement;if(n?.tagName==="INPUT"||n?.tagName==="TEXTAREA"||n?.tagName==="SELECT"||n?.isContentEditable)return;await He();let i=!1;if(e.key===" ")e.preventDefault(),$.value||!je.value||(m.value.runningIntervalId?$t():m.value.timestampPaused?Me():$n(),i=!0);else if(e.key==="PageUp")e.preventDefault(),$.value||m.value.currentPeriodIndex===null||Ie.value||(Ne(),i=!0);else if(e.key==="PageDown")e.preventDefault(),$.value||m.value.currentPeriodIndex===null||m.value.currentPeriodIndex===0||(rt(),i=!0);else if(e.key==="ArrowRight"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){if(e.preventDefault(),!(m.value.currentPeriodIndex===null)){const l=Math.floor(U.value/6e4),v=(Math.ceil((l+1)/3)*3-l)*60*1e3;V(v),i=!0}}else if(e.key==="ArrowLeft"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){if(e.preventDefault(),!(m.value.currentPeriodIndex===null||U.value===0)){const l=Math.floor(U.value/6e4),v=(Math.floor((l-1)/3)*3-l)*60*1e3;V(v),i=!0}}else if(e.key==="ArrowRight"&&e.ctrlKey&&!e.altKey&&!e.shiftKey)e.preventDefault(),m.value.currentPeriodIndex===null||(V(36e4),i=!0);else if(e.key==="ArrowLeft"&&e.ctrlKey&&!e.altKey&&!e.shiftKey)e.preventDefault(),m.value.currentPeriodIndex===null||U.value===0||(V(-36e4),i=!0);else if(e.key==="ArrowRight"&&e.shiftKey&&!e.altKey&&!e.ctrlKey)e.preventDefault(),m.value.currentPeriodIndex===null||(V(144e4),i=!0);else if(e.key==="ArrowLeft"&&e.shiftKey&&!e.altKey&&!e.ctrlKey)e.preventDefault(),m.value.currentPeriodIndex===null||U.value===0||(V(-144e4),i=!0);else if(e.key==="ArrowRight"&&e.altKey&&!e.shiftKey&&!e.ctrlKey)e.preventDefault(),m.value.currentPeriodIndex===null||(V(6e4),i=!0);else if(e.key==="ArrowLeft"&&e.altKey&&!e.shiftKey&&!e.ctrlKey)e.preventDefault(),m.value.currentPeriodIndex===null||U.value===0||(V(-6e4),i=!0);else if(e.key==="Home")e.preventDefault(),m.value.currentPeriodIndex===null||U.value===0||(V(-U.value),i=!0);else if((e.key==="+"||e.key==="=")&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){if(e.preventDefault(),!($.value||m.value.currentPeriodIndex===null)){const l=A.value?.periodDuration||0,p=Math.floor(l/(60*1e3)),_=(Math.ceil((p+1)/3)*3-p)*60*1e3;j(_),i=!0}}else if(e.key==="-"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const s=A.value?.periodDuration||0,l=Math.floor(s/(60*1e3)),v=(Math.floor((l-1)/3)*3-l)*60*1e3;$.value||m.value.currentPeriodIndex===null||!m.value.periods.some(w=>w.periodDurationRemaining>0)||A.value.periodDurationRemaining<Math.abs(v)||(j(v),i=!0)}else(e.key==="+"||e.key==="=")&&e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),$.value||m.value.currentPeriodIndex===null||(j(36e4),i=!0)):e.key==="-"&&e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),$.value||m.value.currentPeriodIndex===null||!m.value.periods.some(l=>l.periodDurationRemaining>0)||A.value.periodDurationRemaining<360*1e3||(j(-36e4),i=!0)):(e.key==="+"||e.key==="=")&&e.shiftKey&&!e.altKey&&!e.ctrlKey?(e.preventDefault(),$.value||m.value.currentPeriodIndex===null||(j(144e4),i=!0)):e.key==="-"&&e.shiftKey&&!e.altKey&&!e.ctrlKey?(e.preventDefault(),$.value||m.value.currentPeriodIndex===null||!m.value.periods.some(l=>l.periodDurationRemaining>0)||A.value.periodDurationRemaining<1440*1e3||(j(-144e4),i=!0)):(e.key==="+"||e.key==="=")&&e.altKey&&!e.shiftKey&&!e.ctrlKey?(e.preventDefault(),$.value||m.value.currentPeriodIndex===null||(j(6e4),i=!0)):e.key==="-"&&e.altKey&&!e.shiftKey&&!e.ctrlKey?(e.preventDefault(),$.value||m.value.currentPeriodIndex===null||!m.value.periods.some(l=>l.periodDurationRemaining>0)||A.value.periodDurationRemaining<60*1e3||(j(-6e4),i=!0)):(e.key==="t"||e.key==="T")&&!e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),m.value.currentPeriodIndex===null||(Hn(),i=!0)):(e.key==="a"||e.key==="A")&&!e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),m.value.currentPeriodIndex===null||(Fn(),i=!0)):e.key==="Backspace"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&(e.preventDefault(),m.value.currentPeriodIndex===null||U.value===0||m.value.currentPeriodIndex===0||(Cn(),i=!0));i&&await Z("button")};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[]),null}function Jo(){return ye(()=>{gr()},[]),ye(()=>{const t=async()=>{await He()},e=["click","touchstart","keydown"];return e.forEach(n=>{document.addEventListener(n,t,{once:!0})}),()=>{e.forEach(n=>{document.removeEventListener(n,t)})}},[]),ye(()=>{const t=m.value.runningIntervalId!==null,e=A.value;if(t&&e){const n=e.periodDurationRemaining<36e5&&e.periodDuration<36e5;let o,i;n?(o=Math.ceil(e.periodDurationElapsed/(60*1e3)).toString(),i=Math.ceil(e.periodUserIntendedDuration/(60*1e3)).toString()):(o=Y(e.periodDurationElapsed,!0),i=Y(e.periodUserIntendedDuration,!0));const s=e.type.charAt(0).toUpperCase(),p=e.periodDurationElapsed>e.periodUserIntendedDuration?" ":"";document.title=`${s} ${p}${o}/${i}`}else document.title="Tymer"},[m.value.runningIntervalId,A.value?.periodDurationRemaining,A.value?.periodDurationElapsed,A.value?.periodUserIntendedDuration,A.value?.type]),g(X,{children:[g(Zo,{}),g(Qo,{}),g(Yo,{}),g(Go,{}),g(qo,{}),g(Vo,{}),g(Xo,{})]})}var ct;(ct=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0)!=null&&ct.__PREACT_DEVTOOLS__&&ct.__PREACT_DEVTOOLS__.attachPreact("10.27.2",x,{Fragment:X,Component:te});var nn={};function ee(t){return t.type===X?"Fragment":typeof t.type=="function"?t.type.displayName||t.type.name:typeof t.type=="string"?t.type:"#text"}var Ee=[],me=[];function Bn(){return Ee.length>0?Ee[Ee.length-1]:null}var rn=!0;function ft(t){return typeof t.type=="function"&&t.type!=X}function R(t){for(var e=[t],n=t;n.__o!=null;)e.push(n.__o),n=n.__o;return e.reduce(function(o,i){o+="  in "+ee(i);var s=i.__source;return s?o+=" (at "+s.fileName+":"+s.lineNumber+")":rn&&console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons."),rn=!1,o+`
`},"")}var zo=typeof WeakMap=="function";function bt(t){var e=[];return t.__k&&t.__k.forEach(function(n){n&&typeof n.type=="function"?e.push.apply(e,bt(n)):n&&typeof n.type=="string"&&e.push(n.type)}),e}function Gn(t){return t?typeof t.type=="function"?t.__==null?t.__e!=null&&t.__e.parentNode!=null?t.__e.parentNode.localName:"":Gn(t.__):t.type:""}var ei=te.prototype.setState;function _t(t){return t==="table"||t==="tfoot"||t==="tbody"||t==="thead"||t==="td"||t==="tr"||t==="th"}te.prototype.setState=function(t,e){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+R(Bn())),ei.call(this,t,e)};var ti=/^(address|article|aside|blockquote|details|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|main|menu|nav|ol|p|pre|search|section|table|ul)$/,ni=te.prototype.forceUpdate;function Q(t){var e=t.props,n=ee(t),o="";for(var i in e)if(e.hasOwnProperty(i)&&i!=="children"){var s=e[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),o+=" "+i+"="+JSON.stringify(s)}var l=e.children;return"<"+n+o+(l&&l.length?">..</"+n+">":" />")}te.prototype.forceUpdate=function(t){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+R(Bn())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+R(this.__v)),ni.call(this,t)},x.__m=function(t,e){var n=t.type,o=e.map(function(i){return i&&i.localName}).filter(Boolean);console.error('Expected a DOM node of type "'+n+'" but found "'+o.join(", ")+`" as available DOM-node(s), this is caused by the SSR'd HTML containing different DOM-nodes compared to the hydrated one.

`+R(t))},(function(){(function(){var d=x.__b,h=x.diffed,c=x.__,y=x.vnode,b=x.__r;x.diffed=function(k){ft(k)&&me.pop(),Ee.pop(),h&&h(k)},x.__b=function(k){ft(k)&&Ee.push(k),d&&d(k)},x.__=function(k,P){me=[],c&&c(k,P)},x.vnode=function(k){k.__o=me.length>0?me[me.length-1]:null,y&&y(k)},x.__r=function(k){ft(k)&&me.push(k),b&&b(k)}})();var t=!1,e=x.__b,n=x.diffed,o=x.vnode,i=x.__r,s=x.__e,l=x.__,p=x.__h,v=zo?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,_=[];x.__e=function(d,h,c,y){if(h&&h.__c&&typeof d.then=="function"){var b=d;d=new Error("Missing Suspense. The throwing component was: "+ee(h));for(var k=h;k;k=k.__)if(k.__c&&k.__c.__c){d=b;break}if(d instanceof Error)throw d}try{(y=y||{}).componentStack=R(h),s(d,h,c,y),typeof d.then!="function"&&setTimeout(function(){throw d})}catch(P){throw P}},x.__=function(d,h){if(!h)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var c;switch(h.nodeType){case 1:case 11:case 9:c=!0;break;default:c=!1}if(!c){var y=ee(d);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+h+" instead: render(<"+y+" />, "+h+");")}l&&l(d,h)},x.__b=function(d){var h=d.type;if(t=!0,h===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+Q(d)+`

`+R(d));if(h!=null&&typeof h=="object")throw h.__k!==void 0&&h.__e!==void 0?new Error("Invalid type passed to createElement(): "+h+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+ee(d)+" = "+Q(h)+`;
  let vnode = <My`+ee(d)+` />;

This usually happens when you export a JSX literal and not the component.

`+R(d)):new Error("Invalid type passed to createElement(): "+(Array.isArray(h)?"array":h));if(d.ref!==void 0&&typeof d.ref!="function"&&typeof d.ref!="object"&&!("$$typeof"in d))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof d.ref+`] instead
`+Q(d)+`

`+R(d));if(typeof d.type=="string"){for(var c in d.props)if(c[0]==="o"&&c[1]==="n"&&typeof d.props[c]!="function"&&d.props[c]!=null)throw new Error(`Component's "`+c+'" property should be a function, but got ['+typeof d.props[c]+`] instead
`+Q(d)+`

`+R(d))}if(typeof d.type=="function"&&d.type.propTypes){if(d.type.displayName==="Lazy"&&v&&!v.lazyPropTypes.has(d.type)){var y="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var b=d.type();v.lazyPropTypes.set(d.type,!0),console.warn(y+"Component wrapped in lazy() is "+ee(b))}catch{console.warn(y+"We will log the wrapped component's name once it is loaded.")}}var k=d.props;d.type.__f&&delete(k=(function(P,T){for(var D in T)P[D]=T[D];return P})({},k)).ref,(function(P,T,D,E,S){Object.keys(P).forEach(function(N){var C;try{C=P[N](T,N,E,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(B){C=B}C&&!(C.message in nn)&&(nn[C.message]=!0,console.error("Failed prop type: "+C.message+(S&&`
`+S()||"")))})})(d.type.propTypes,k,0,ee(d),function(){return R(d)})}e&&e(d)};var w,r=0;x.__r=function(d){i&&i(d),t=!0;var h=d.__c;if(h===w?r++:r=1,r>=25)throw new Error("Too many re-renders. This is limited to prevent an infinite loop which may lock up your browser. The component causing this is: "+ee(d));w=h},x.__h=function(d,h,c){if(!d||!t)throw new Error("Hook can only be invoked from render methods.");p&&p(d,h,c)};var a=function(d,h){return{get:function(){var c="get"+d+h;_&&_.indexOf(c)<0&&(_.push(c),console.warn("getting vnode."+d+" is deprecated, "+h))},set:function(){var c="set"+d+h;_&&_.indexOf(c)<0&&(_.push(c),console.warn("setting vnode."+d+" is not allowed, "+h))}}},u={nodeName:a("nodeName","use vnode.type"),attributes:a("attributes","use vnode.props"),children:a("children","use vnode.props.children")},f=Object.create({},u);x.vnode=function(d){var h=d.props;if(d.type!==null&&h!=null&&("__source"in h||"__self"in h)){var c=d.props={};for(var y in h){var b=h[y];y==="__source"?d.__source=b:y==="__self"?d.__self=b:c[y]=b}}d.__proto__=f,o&&o(d)},x.diffed=function(d){var h,c=d.type,y=d.__;if(d.__k&&d.__k.forEach(function(G){if(typeof G=="object"&&G&&G.type===void 0){var _e=Object.keys(G).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+_e+`}.

`+R(d))}}),d.__c===w&&(r=0),typeof c=="string"&&(_t(c)||c==="p"||c==="a"||c==="button")){var b=Gn(y);if(b!==""&&_t(c))c==="table"&&b!=="td"&&_t(b)?console.error("Improper nesting of table. Your <table> should not have a table-node parent."+Q(d)+`

`+R(d)):c!=="thead"&&c!=="tfoot"&&c!=="tbody"||b==="table"?c==="tr"&&b!=="thead"&&b!=="tfoot"&&b!=="tbody"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot> parent."+Q(d)+`

`+R(d)):c==="td"&&b!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+Q(d)+`

`+R(d)):c==="th"&&b!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+Q(d)+`

`+R(d)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+Q(d)+`

`+R(d));else if(c==="p"){var k=bt(d).filter(function(G){return ti.test(G)});k.length&&console.error("Improper nesting of paragraph. Your <p> should not have "+k.join(", ")+" as child-elements."+Q(d)+`

`+R(d))}else c!=="a"&&c!=="button"||bt(d).indexOf(c)!==-1&&console.error("Improper nesting of interactive content. Your <"+c+"> should not have other "+(c==="a"?"anchor":"button")+" tags as child-elements."+Q(d)+`

`+R(d))}if(t=!1,n&&n(d),d.__k!=null)for(var P=[],T=0;T<d.__k.length;T++){var D=d.__k[T];if(D&&D.key!=null){var E=D.key;if(P.indexOf(E)!==-1){console.error('Following component has two or more children with the same key attribute: "'+E+`". This may cause glitches and misbehavior in rendering process. Component: 

`+Q(d)+`

`+R(d));break}P.push(E)}}if(d.__c!=null&&d.__c.__H!=null){var S=d.__c.__H.__;if(S)for(var N=0;N<S.length;N+=1){var C=S[N];if(C.__H){for(var B=0;B<C.__H.length;B++)if((h=C.__H[B])!=h){var le=ee(d);console.warn("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+N+" in component "+le+" was called with NaN.")}}}}}})();Xn(g(Jo,{}),document.getElementById("app"));
