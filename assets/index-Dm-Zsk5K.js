(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var ze,T,dn,cn,_e,Ft,fn,_n,pn,St,vt,yt,He={},hn=[],tr=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,et=Array.isArray;function ae(t,e){for(var n in e)t[n]=e[n];return t}function Tt(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function nr(t,e,n){var o,i,s,l={};for(s in e)s=="key"?o=e[s]:s=="ref"?i=e[s]:l[s]=e[s];if(arguments.length>2&&(l.children=arguments.length>3?ze.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(s in t.defaultProps)l[s]===void 0&&(l[s]=t.defaultProps[s]);return qe(t,l,o,i,null)}function qe(t,e,n,o,i){var s={type:t,props:e,key:n,ref:o,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:i??++dn,__i:-1,__u:0};return i==null&&T.vnode!=null&&T.vnode(s),s}function X(t){return t.children}function ie(t,e){this.props=t,this.context=e}function be(t,e){if(e==null)return t.__?be(t.__,t.__i+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?be(t):null}function mn(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return mn(t)}}function Lt(t){(!t.__d&&(t.__d=!0)&&_e.push(t)&&!je.__r++||Ft!=T.debounceRendering)&&((Ft=T.debounceRendering)||fn)(je)}function je(){for(var t,e,n,o,i,s,l,p=1;_e.length;)_e.length>p&&_e.sort(_n),t=_e.shift(),p=_e.length,t.__d&&(n=void 0,o=void 0,i=(o=(e=t).__v).__e,s=[],l=[],e.__P&&((n=ae({},o)).__v=o.__v+1,T.vnode&&T.vnode(n),At(e.__P,n,o,e.__n,e.__P.namespaceURI,32&o.__u?[i]:null,s,i??be(o),!!(32&o.__u),l),n.__v=o.__v,n.__.__k[n.__i]=n,gn(s,n,l),o.__e=o.__=null,n.__e!=i&&mn(n)));je.__r=0}function vn(t,e,n,o,i,s,l,p,y,_,w){var r,a,u,f,d,h,c,m=o&&o.__k||hn,b=e.length;for(y=rr(n,e,m,y,b),r=0;r<b;r++)(u=n.__k[r])!=null&&(a=u.__i==-1?He:m[u.__i]||He,u.__i=r,h=At(t,u,a,i,s,l,p,y,_,w),f=u.__e,u.ref&&a.ref!=u.ref&&(a.ref&&xt(a.ref,null,u),w.push(u.ref,u.__c||f,u)),d==null&&f!=null&&(d=f),(c=!!(4&u.__u))||a.__k===u.__k?y=yn(u,y,t,c):typeof u.type=="function"&&h!==void 0?y=h:f&&(y=f.nextSibling),u.__u&=-7);return n.__e=d,y}function rr(t,e,n,o,i){var s,l,p,y,_,w=n.length,r=w,a=0;for(t.__k=new Array(i),s=0;s<i;s++)(l=e[s])!=null&&typeof l!="boolean"&&typeof l!="function"?(y=s+a,(l=t.__k[s]=typeof l=="string"||typeof l=="number"||typeof l=="bigint"||l.constructor==String?qe(null,l,null,null,null):et(l)?qe(X,{children:l},null,null,null):l.constructor==null&&l.__b>0?qe(l.type,l.props,l.key,l.ref?l.ref:null,l.__v):l).__=t,l.__b=t.__b+1,p=null,(_=l.__i=or(l,n,y,r))!=-1&&(r--,(p=n[_])&&(p.__u|=2)),p==null||p.__v==null?(_==-1&&(i>w?a--:i<w&&a++),typeof l.type!="function"&&(l.__u|=4)):_!=y&&(_==y-1?a--:_==y+1?a++:(_>y?a--:a++,l.__u|=4))):t.__k[s]=null;if(r)for(s=0;s<w;s++)(p=n[s])!=null&&(2&p.__u)==0&&(p.__e==o&&(o=be(p)),bn(p,p));return o}function yn(t,e,n,o){var i,s;if(typeof t.type=="function"){for(i=t.__k,s=0;i&&s<i.length;s++)i[s]&&(i[s].__=t,e=yn(i[s],e,n,o));return e}t.__e!=e&&(o&&(e&&t.type&&!e.parentNode&&(e=be(t)),n.insertBefore(t.__e,e||null)),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function or(t,e,n,o){var i,s,l,p=t.key,y=t.type,_=e[n],w=_!=null&&(2&_.__u)==0;if(_===null&&t.key==null||w&&p==_.key&&y==_.type)return n;if(o>(w?1:0)){for(i=n-1,s=n+1;i>=0||s<e.length;)if((_=e[l=i>=0?i--:s++])!=null&&(2&_.__u)==0&&p==_.key&&y==_.type)return l}return-1}function Wt(t,e,n){e[0]=="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||tr.test(e)?n:n+"px"}function Be(t,e,n,o,i){var s,l;e:if(e=="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof o=="string"&&(t.style.cssText=o=""),o)for(e in o)n&&e in n||Wt(t.style,e,"");if(n)for(e in n)o&&n[e]==o[e]||Wt(t.style,e,n[e])}else if(e[0]=="o"&&e[1]=="n")s=e!=(e=e.replace(pn,"$1")),l=e.toLowerCase(),e=l in t||e=="onFocusOut"||e=="onFocusIn"?l.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+s]=n,n?o?n.u=o.u:(n.u=St,t.addEventListener(e,s?yt:vt,s)):t.removeEventListener(e,s?yt:vt,s);else{if(i=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&n==1?"":n))}}function Rt(t){return function(e){if(this.l){var n=this.l[e.type+t];if(e.t==null)e.t=St++;else if(e.t<n.u)return;return n(T.event?T.event(e):e)}}}function At(t,e,n,o,i,s,l,p,y,_){var w,r,a,u,f,d,h,c,m,b,k,P,x,A,M,S,L,$=e.type;if(e.constructor!=null)return null;128&n.__u&&(y=!!(32&n.__u),s=[p=e.__e=n.__e]),(w=T.__b)&&w(e);e:if(typeof $=="function")try{if(c=e.props,m="prototype"in $&&$.prototype.render,b=(w=$.contextType)&&o[w.__c],k=w?b?b.props.value:w.__:o,n.__c?h=(r=e.__c=n.__c).__=r.__E:(m?e.__c=r=new $(c,k):(e.__c=r=new ie(c,k),r.constructor=$,r.render=ar),b&&b.sub(r),r.props=c,r.state||(r.state={}),r.context=k,r.__n=o,a=r.__d=!0,r.__h=[],r._sb=[]),m&&r.__s==null&&(r.__s=r.state),m&&$.getDerivedStateFromProps!=null&&(r.__s==r.state&&(r.__s=ae({},r.__s)),ae(r.__s,$.getDerivedStateFromProps(c,r.__s))),u=r.props,f=r.state,r.__v=e,a)m&&$.getDerivedStateFromProps==null&&r.componentWillMount!=null&&r.componentWillMount(),m&&r.componentDidMount!=null&&r.__h.push(r.componentDidMount);else{if(m&&$.getDerivedStateFromProps==null&&c!==u&&r.componentWillReceiveProps!=null&&r.componentWillReceiveProps(c,k),!r.__e&&r.shouldComponentUpdate!=null&&r.shouldComponentUpdate(c,r.__s,k)===!1||e.__v==n.__v){for(e.__v!=n.__v&&(r.props=c,r.state=r.__s,r.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.some(function(B){B&&(B.__=e)}),P=0;P<r._sb.length;P++)r.__h.push(r._sb[P]);r._sb=[],r.__h.length&&l.push(r);break e}r.componentWillUpdate!=null&&r.componentWillUpdate(c,r.__s,k),m&&r.componentDidUpdate!=null&&r.__h.push(function(){r.componentDidUpdate(u,f,d)})}if(r.context=k,r.props=c,r.__P=t,r.__e=!1,x=T.__r,A=0,m){for(r.state=r.__s,r.__d=!1,x&&x(e),w=r.render(r.props,r.state,r.context),M=0;M<r._sb.length;M++)r.__h.push(r._sb[M]);r._sb=[]}else do r.__d=!1,x&&x(e),w=r.render(r.props,r.state,r.context),r.state=r.__s;while(r.__d&&++A<25);r.state=r.__s,r.getChildContext!=null&&(o=ae(ae({},o),r.getChildContext())),m&&!a&&r.getSnapshotBeforeUpdate!=null&&(d=r.getSnapshotBeforeUpdate(u,f)),S=w,w!=null&&w.type===X&&w.key==null&&(S=wn(w.props.children)),p=vn(t,et(S)?S:[S],e,n,o,i,s,l,p,y,_),r.base=e.__e,e.__u&=-161,r.__h.length&&l.push(r),h&&(r.__E=r.__=null)}catch(B){if(e.__v=null,y||s!=null)if(B.then){for(e.__u|=y?160:128;p&&p.nodeType==8&&p.nextSibling;)p=p.nextSibling;s[s.indexOf(p)]=null,e.__e=p}else{for(L=s.length;L--;)Tt(s[L]);gt(e)}else e.__e=n.__e,e.__k=n.__k,B.then||gt(e);T.__e(B,e,n)}else s==null&&e.__v==n.__v?(e.__k=n.__k,e.__e=n.__e):p=e.__e=ir(n.__e,e,n,o,i,s,l,y,_);return(w=T.diffed)&&w(e),128&e.__u?void 0:p}function gt(t){t&&t.__c&&(t.__c.__e=!0),t&&t.__k&&t.__k.forEach(gt)}function gn(t,e,n){for(var o=0;o<n.length;o++)xt(n[o],n[++o],n[++o]);T.__c&&T.__c(e,t),t.some(function(i){try{t=i.__h,i.__h=[],t.some(function(s){s.call(i)})}catch(s){T.__e(s,i.__v)}})}function wn(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:et(t)?t.map(wn):ae({},t)}function ir(t,e,n,o,i,s,l,p,y){var _,w,r,a,u,f,d,h=n.props,c=e.props,m=e.type;if(m=="svg"?i="http://www.w3.org/2000/svg":m=="math"?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),s!=null){for(_=0;_<s.length;_++)if((u=s[_])&&"setAttribute"in u==!!m&&(m?u.localName==m:u.nodeType==3)){t=u,s[_]=null;break}}if(t==null){if(m==null)return document.createTextNode(c);t=document.createElementNS(i,m,c.is&&c),p&&(T.__m&&T.__m(e,s),p=!1),s=null}if(m==null)h===c||p&&t.data==c||(t.data=c);else{if(s=s&&ze.call(t.childNodes),h=n.props||He,!p&&s!=null)for(h={},_=0;_<t.attributes.length;_++)h[(u=t.attributes[_]).name]=u.value;for(_ in h)if(u=h[_],_!="children"){if(_=="dangerouslySetInnerHTML")r=u;else if(!(_ in c)){if(_=="value"&&"defaultValue"in c||_=="checked"&&"defaultChecked"in c)continue;Be(t,_,null,u,i)}}for(_ in c)u=c[_],_=="children"?a=u:_=="dangerouslySetInnerHTML"?w=u:_=="value"?f=u:_=="checked"?d=u:p&&typeof u!="function"||h[_]===u||Be(t,_,u,h[_],i);if(w)p||r&&(w.__html==r.__html||w.__html==t.innerHTML)||(t.innerHTML=w.__html),e.__k=[];else if(r&&(t.innerHTML=""),vn(e.type=="template"?t.content:t,et(a)?a:[a],e,n,o,m=="foreignObject"?"http://www.w3.org/1999/xhtml":i,s,l,s?s[0]:n.__k&&be(n,0),p,y),s!=null)for(_=s.length;_--;)Tt(s[_]);p||(_="value",m=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[_]||m=="progress"&&!f||m=="option"&&f!=h[_])&&Be(t,_,f,h[_],i),_="checked",d!=null&&d!=t[_]&&Be(t,_,d,h[_],i))}return t}function xt(t,e,n){try{if(typeof t=="function"){var o=typeof t.__u=="function";o&&t.__u(),o&&e==null||(t.__u=t(e))}else t.current=e}catch(i){T.__e(i,n)}}function bn(t,e,n){var o,i;if(T.unmount&&T.unmount(t),(o=t.ref)&&(o.current&&o.current!=t.__e||xt(o,null,e)),(o=t.__c)!=null){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(s){T.__e(s,e)}o.base=o.__P=null}if(o=t.__k)for(i=0;i<o.length;i++)o[i]&&bn(o[i],e,n||typeof t.type!="function");n||Tt(t.__e),t.__c=t.__=t.__e=void 0}function ar(t,e,n){return this.constructor(t,n)}function sr(t,e,n){var o,i,s,l;e==document&&(e=document.documentElement),T.__&&T.__(t,e),i=(o=!1)?null:e.__k,s=[],l=[],At(e,t=e.__k=nr(X,null,[t]),i||He,He,e.namespaceURI,i?null:e.firstChild?ze.call(e.childNodes):null,s,i?i.__e:e.firstChild,o,l),gn(s,t,l)}ze=hn.slice,T={__e:function(t,e,n,o){for(var i,s,l;e=e.__;)if((i=e.__c)&&!i.__)try{if((s=i.constructor)&&s.getDerivedStateFromError!=null&&(i.setState(s.getDerivedStateFromError(t)),l=i.__d),i.componentDidCatch!=null&&(i.componentDidCatch(t,o||{}),l=i.__d),l)return i.__E=i}catch(p){t=p}throw t}},dn=0,cn=function(t){return t!=null&&t.constructor==null},ie.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=ae({},this.state),typeof t=="function"&&(t=t(ae({},n),this.props)),t&&ae(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),Lt(this))},ie.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),Lt(this))},ie.prototype.render=X,_e=[],fn=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,_n=function(t,e){return t.__v.__b-e.__v.__b},je.__r=0,pn=/(PointerCapture)$|Capture$/i,St=0,vt=Rt(!1),yt=Rt(!0);var ur=0;function v(t,e,n,o,i,s){e||(e={});var l,p,y=e;if("ref"in y)for(p in y={},e)p=="ref"?l=e[p]:y[p]=e[p];var _={type:t,props:y,key:n,ref:l,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--ur,__i:-1,__u:0,__source:i,__self:s};if(typeof t=="function"&&(l=t.defaultProps))for(p in l)y[p]===void 0&&(y[p]=l[p]);return T.vnode&&T.vnode(_),_}var Ne,F,lt,Bt,Fe=0,kn=[],W=T,Gt=W.__b,Yt=W.__r,qt=W.diffed,Ut=W.__c,Vt=W.unmount,jt=W.__;function Dt(t,e){W.__h&&W.__h(F,t,Fe||e),Fe=0;var n=F.__H||(F.__H={__:[],__h:[]});return t>=n.__.length&&n.__.push({}),n.__[t]}function Ue(t){return Fe=1,lr(Sn,t)}function lr(t,e,n){var o=Dt(Ne++,2);if(o.t=t,!o.__c&&(o.__=[Sn(void 0,e),function(p){var y=o.__N?o.__N[0]:o.__[0],_=o.t(y,p);y!==_&&(o.__N=[_,o.__[1]],o.__c.setState({}))}],o.__c=F,!F.__f)){var i=function(p,y,_){if(!o.__c.__H)return!0;var w=o.__c.__H.__.filter(function(a){return!!a.__c});if(w.every(function(a){return!a.__N}))return!s||s.call(this,p,y,_);var r=o.__c.props!==p;return w.forEach(function(a){if(a.__N){var u=a.__[0];a.__=a.__N,a.__N=void 0,u!==a.__[0]&&(r=!0)}}),s&&s.call(this,p,y,_)||r};F.__f=!0;var s=F.shouldComponentUpdate,l=F.componentWillUpdate;F.componentWillUpdate=function(p,y,_){if(this.__e){var w=s;s=void 0,i(p,y,_),s=w}l&&l.call(this,p,y,_)},F.shouldComponentUpdate=i}return o.__N||o.__}function we(t,e){var n=Dt(Ne++,3);!W.__s&&Pn(n.__H,e)&&(n.__=t,n.u=e,F.__H.__h.push(n))}function dr(t){return Fe=5,tt(function(){return{current:t}},[])}function tt(t,e){var n=Dt(Ne++,7);return Pn(n.__H,e)&&(n.__=t(),n.__H=e,n.__h=t),n.__}function Kt(t,e){return Fe=8,tt(function(){return t},e)}function cr(){for(var t;t=kn.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Ve),t.__H.__h.forEach(wt),t.__H.__h=[]}catch(e){t.__H.__h=[],W.__e(e,t.__v)}}W.__b=function(t){F=null,Gt&&Gt(t)},W.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),jt&&jt(t,e)},W.__r=function(t){Yt&&Yt(t),Ne=0;var e=(F=t.__c).__H;e&&(lt===F?(e.__h=[],F.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.u=n.__N=void 0})):(e.__h.forEach(Ve),e.__h.forEach(wt),e.__h=[],Ne=0)),lt=F},W.diffed=function(t){qt&&qt(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(kn.push(e)!==1&&Bt===W.requestAnimationFrame||((Bt=W.requestAnimationFrame)||fr)(cr)),e.__H.__.forEach(function(n){n.u&&(n.__H=n.u),n.u=void 0})),lt=F=null},W.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Ve),n.__h=n.__h.filter(function(o){return!o.__||wt(o)})}catch(o){e.some(function(i){i.__h&&(i.__h=[])}),e=[],W.__e(o,n.__v)}}),Ut&&Ut(t,e)},W.unmount=function(t){Vt&&Vt(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(o){try{Ve(o)}catch(i){e=i}}),n.__H=void 0,e&&W.__e(e,n.__v))};var Xt=typeof requestAnimationFrame=="function";function fr(t){var e,n=function(){clearTimeout(o),Xt&&cancelAnimationFrame(e),setTimeout(t)},o=setTimeout(n,35);Xt&&(e=requestAnimationFrame(n))}function Ve(t){var e=F,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),F=e}function wt(t){var e=F;t.__c=t.__(),F=e}function Pn(t,e){return!t||t.length!==e.length||e.some(function(n,o){return n!==t[o]})}function Sn(t,e){return typeof e=="function"?e(t):e}var _r=Symbol.for("preact-signals");function nt(){if(le>1)le--;else{for(var t,e=!1;Ee!==void 0;){var n=Ee;for(Ee=void 0,bt++;n!==void 0;){var o=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&Dn(n))try{n.c()}catch(i){e||(t=i,e=!0)}n=o}}if(bt=0,le--,e)throw t}}function Tn(t){if(le>0)return t();le++;try{return t()}finally{nt()}}var E=void 0;function An(t){var e=E;E=void 0;try{return t()}finally{E=e}}var Ee=void 0,le=0,bt=0,Ke=0;function xn(t){if(E!==void 0){var e=t.n;if(e===void 0||e.t!==E)return e={i:0,S:t,p:E.s,n:void 0,t:E,e:void 0,x:void 0,r:e},E.s!==void 0&&(E.s.n=e),E.s=e,t.n=e,32&E.f&&t.S(e),e;if(e.i===-1)return e.i=0,e.n!==void 0&&(e.n.p=e.p,e.p!==void 0&&(e.p.n=e.n),e.p=E.s,e.n=void 0,E.s.n=e,E.s=e),e}}function q(t,e){this.v=t,this.i=0,this.n=void 0,this.t=void 0,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}q.prototype.brand=_r;q.prototype.h=function(){return!0};q.prototype.S=function(t){var e=this,n=this.t;n!==t&&t.e===void 0&&(t.x=n,this.t=t,n!==void 0?n.e=t:An(function(){var o;(o=e.W)==null||o.call(e)}))};q.prototype.U=function(t){var e=this;if(this.t!==void 0){var n=t.e,o=t.x;n!==void 0&&(n.x=o,t.e=void 0),o!==void 0&&(o.e=n,t.x=void 0),t===this.t&&(this.t=o,o===void 0&&An(function(){var i;(i=e.Z)==null||i.call(e)}))}};q.prototype.subscribe=function(t){var e=this;return Se(function(){var n=e.value,o=E;E=void 0;try{t(n)}finally{E=o}},{name:"sub"})};q.prototype.valueOf=function(){return this.value};q.prototype.toString=function(){return this.value+""};q.prototype.toJSON=function(){return this.value};q.prototype.peek=function(){var t=E;E=void 0;try{return this.value}finally{E=t}};Object.defineProperty(q.prototype,"value",{get:function(){var t=xn(this);return t!==void 0&&(t.i=this.i),this.v},set:function(t){if(t!==this.v){if(bt>100)throw new Error("Cycle detected");this.v=t,this.i++,Ke++,le++;try{for(var e=this.t;e!==void 0;e=e.x)e.t.N()}finally{nt()}}}});function rt(t,e){return new q(t,e)}function Dn(t){for(var e=t.s;e!==void 0;e=e.n)if(e.S.i!==e.i||!e.S.h()||e.S.i!==e.i)return!0;return!1}function In(t){for(var e=t.s;e!==void 0;e=e.n){var n=e.S.n;if(n!==void 0&&(e.r=n),e.S.n=e,e.i=-1,e.n===void 0){t.s=e;break}}}function En(t){for(var e=t.s,n=void 0;e!==void 0;){var o=e.p;e.i===-1?(e.S.U(e),o!==void 0&&(o.n=e.n),e.n!==void 0&&(e.n.p=o)):n=e,e.S.n=e.r,e.r!==void 0&&(e.r=void 0),e=o}t.s=n}function pe(t,e){q.call(this,void 0),this.x=t,this.s=void 0,this.g=Ke-1,this.f=4,this.W=e?.watched,this.Z=e?.unwatched,this.name=e?.name}pe.prototype=new q;pe.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===Ke))return!0;if(this.g=Ke,this.f|=1,this.i>0&&!Dn(this))return this.f&=-2,!0;var t=E;try{In(this),E=this;var e=this.x();(16&this.f||this.v!==e||this.i===0)&&(this.v=e,this.f&=-17,this.i++)}catch(n){this.v=n,this.f|=16,this.i++}return E=t,En(this),this.f&=-2,!0};pe.prototype.S=function(t){if(this.t===void 0){this.f|=36;for(var e=this.s;e!==void 0;e=e.n)e.S.S(e)}q.prototype.S.call(this,t)};pe.prototype.U=function(t){if(this.t!==void 0&&(q.prototype.U.call(this,t),this.t===void 0)){this.f&=-33;for(var e=this.s;e!==void 0;e=e.n)e.S.U(e)}};pe.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(var t=this.t;t!==void 0;t=t.x)t.t.N()}};Object.defineProperty(pe.prototype,"value",{get:function(){if(1&this.f)throw new Error("Cycle detected");var t=xn(this);if(this.h(),t!==void 0&&(t.i=this.i),16&this.f)throw this.v;return this.v}});function N(t,e){return new pe(t,e)}function Mn(t){var e=t.u;if(t.u=void 0,typeof e=="function"){le++;var n=E;E=void 0;try{e()}catch(o){throw t.f&=-2,t.f|=8,It(t),o}finally{E=n,nt()}}}function It(t){for(var e=t.s;e!==void 0;e=e.n)e.S.U(e);t.x=void 0,t.s=void 0,Mn(t)}function pr(t){if(E!==this)throw new Error("Out-of-order effect");En(this),E=t,this.f&=-2,8&this.f&&It(this),nt()}function Pe(t,e){this.x=t,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=e?.name}Pe.prototype.c=function(){var t=this.S();try{if(8&this.f||this.x===void 0)return;var e=this.x();typeof e=="function"&&(this.u=e)}finally{t()}};Pe.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,Mn(this),In(this),le++;var t=E;return E=this,pr.bind(this,t)};Pe.prototype.N=function(){2&this.f||(this.f|=2,this.o=Ee,Ee=this)};Pe.prototype.d=function(){this.f|=8,1&this.f||It(this)};Pe.prototype.dispose=function(){this.d()};function Se(t,e){var n=new Pe(t,e);try{n.c()}catch(i){throw n.d(),i}var o=n.d.bind(n);return o[Symbol.dispose]=o,o}var On,dt,$n=[];Se(function(){On=this.N})();function Te(t,e){T[t]=e.bind(null,T[t]||function(){})}function Xe(t){dt&&dt(),dt=t&&t.S()}function Cn(t){var e=this,n=t.data,o=mr(n);o.value=n;var i=tt(function(){for(var p=e,y=e.__v;y=y.__;)if(y.__c){y.__c.__$f|=4;break}var _=N(function(){var u=o.value.value;return u===0?0:u===!0?"":u||""}),w=N(function(){return!Array.isArray(_.value)&&!cn(_.value)}),r=Se(function(){if(this.N=Hn,w.value){var u=_.value;p.__v&&p.__v.__e&&p.__v.__e.nodeType===3&&(p.__v.__e.data=u)}}),a=e.__$u.d;return e.__$u.d=function(){r(),a.call(this)},[w,_]},[]),s=i[0],l=i[1];return s.value?l.peek():l.value}Cn.displayName="ReactiveTextNode";Object.defineProperties(q.prototype,{constructor:{configurable:!0,value:void 0},type:{configurable:!0,value:Cn},props:{configurable:!0,get:function(){return{data:this}}},__b:{configurable:!0,value:1}});Te("__b",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),typeof e.type=="string"){var n,o=e.props;for(var i in o)if(i!=="children"){var s=o[i];s instanceof q&&(n||(e.__np=n={}),n[i]=s,o[i]=s.peek())}}t(e)});Te("__r",function(t,e){if(typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.enterComponent(e.type.displayName||e.type.name||"Unknown"),e.type!==X){Xe();var n,o=e.__c;o&&(o.__$f&=-2,(n=o.__$u)===void 0&&(o.__$u=n=(function(i){var s;return Se(function(){s=this}),s.c=function(){o.__$f|=1,o.setState({})},s})())),Xe(n)}t(e)});Te("__e",function(t,e,n,o){typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Xe(),t(e,n,o)});Te("diffed",function(t,e){typeof e.type=="function"&&typeof window<"u"&&window.__PREACT_SIGNALS_DEVTOOLS__&&window.__PREACT_SIGNALS_DEVTOOLS__.exitComponent(),Xe();var n;if(typeof e.type=="string"&&(n=e.__e)){var o=e.__np,i=e.props;if(o){var s=n.U;if(s)for(var l in s){var p=s[l];p!==void 0&&!(l in o)&&(p.d(),s[l]=void 0)}else s={},n.U=s;for(var y in o){var _=s[y],w=o[y];_===void 0?(_=hr(n,y,w,i),s[y]=_):_.o(w,i)}}}t(e)});function hr(t,e,n,o){var i=e in t&&t.ownerSVGElement===void 0,s=rt(n);return{o:function(l,p){s.value=l,o=p},d:Se(function(){this.N=Hn;var l=s.value.value;o[e]!==l&&(o[e]=l,i?t[e]=l:l?t.setAttribute(e,l):t.removeAttribute(e))})}}Te("unmount",function(t,e){if(typeof e.type=="string"){var n=e.__e;if(n){var o=n.U;if(o){n.U=void 0;for(var i in o){var s=o[i];s&&s.d()}}}}else{var l=e.__c;if(l){var p=l.__$u;p&&(l.__$u=void 0,p.d())}}t(e)});Te("__h",function(t,e,n,o){(o<3||o===9)&&(e.__$f|=2),t(e,n,o)});ie.prototype.shouldComponentUpdate=function(t,e){var n=this.__$u,o=n&&n.s!==void 0;for(var i in e)return!0;if(this.__f||typeof this.u=="boolean"&&this.u===!0){var s=2&this.__$f;if(!(o||s||4&this.__$f)||1&this.__$f)return!0}else if(!(o||4&this.__$f)||3&this.__$f)return!0;for(var l in t)if(l!=="__source"&&t[l]!==this.props[l])return!0;for(var p in this.props)if(!(p in t))return!0;return!1};function mr(t,e){return Ue(function(){return rt(t,e)})[0]}var vr=function(t){queueMicrotask(function(){queueMicrotask(t)})};function yr(){Tn(function(){for(var t;t=$n.shift();)On.call(t)})}function Hn(){$n.push(this)===1&&(T.requestAnimationFrame||vr)(yr)}const D=(t,e,n=0,o=!1)=>{const i=[{color:"black",background:"white"},{color:"white",background:"black"},{color:"white",background:"darkred"},{color:"white",background:"green"},{color:"white",background:"blue"},{color:"white",background:"maroon"},{color:"white",background:"purple"},{color:"white",background:"olive"},{color:"white",background:"navy"},{color:"white",background:"teal"},{color:"black",background:"orange"},{color:"black",background:"gray"},{color:"black",background:"skyblue"},{color:"black",background:"goldenrod"},{color:"black",background:"silver"}];(typeof n!="number"||n<0||n>i.length-1)&&(n=0),e&&typeof e=="object"&&"timestampStarted"in e&&"timestampPaused"in e?console.log(`%c${t.padStart(25," ")}`,`
          color: ${i[n].color};
          background-color: ${i[n].background};
          padding: 4px;
          font-weight: bold;
          ${o?`border: 2px solid ${i[n].color};`:""}
          `,`      now: ${new Date(Date.now()).toLocaleTimeString("cs-CZ",{second:"2-digit",fractionalSecondDigits:2})}`,`  started: ${e.timestampStarted===null?null:new Date(e.timestampStarted).toLocaleTimeString("cs-CZ",{second:"2-digit",fractionalSecondDigits:2})}`,`   paused: ${e.timestampPaused===null?null:new Date(e.timestampPaused).toLocaleTimeString("cs-CZ",{second:"2-digit",fractionalSecondDigits:2})}`):console.log(`%c${t.padStart(25," ")}`,`
          color: ${i[n].color};
          background-color: ${i[n].background};
          padding: 4px;
          font-weight: bold;
          ${o?`border: 2px solid ${i[n].color};`:""}
          `,e)},gr=t=>(localStorage.setItem("timerState",JSON.stringify(t)),t),wr=t=>{try{const e=JSON.parse(localStorage.getItem("timerState"));return Object.keys(t).every(i=>e.hasOwnProperty(i))?(D("state loaded successfully",e,1),e):(D("loaded state was invalid, initial state returned",t,2),t)}catch{return D("initial state saved (there was an error loading the state)",t,3),t}};var Ae=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ct={};/*!
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */var Qt;function br(){return Qt||(Qt=1,(function(t){(function(){var e=function(){this.init()};e.prototype={init:function(){var r=this||n;return r._counter=1e3,r._html5AudioPool=[],r.html5PoolSize=10,r._codecs={},r._howls=[],r._muted=!1,r._volume=1,r._canPlayEvent="canplaythrough",r._navigator=typeof window<"u"&&window.navigator?window.navigator:null,r.masterGain=null,r.noAudio=!1,r.usingWebAudio=!0,r.autoSuspend=!0,r.ctx=null,r.autoUnlock=!0,r._setup(),r},volume:function(r){var a=this||n;if(r=parseFloat(r),a.ctx||w(),typeof r<"u"&&r>=0&&r<=1){if(a._volume=r,a._muted)return a;a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r,n.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),d=0;d<f.length;d++){var h=a._howls[u]._soundById(f[d]);h&&h._node&&(h._node.volume=h._volume*r)}return a}return a._volume},mute:function(r){var a=this||n;a.ctx||w(),a._muted=r,a.usingWebAudio&&a.masterGain.gain.setValueAtTime(r?0:a._volume,n.ctx.currentTime);for(var u=0;u<a._howls.length;u++)if(!a._howls[u]._webAudio)for(var f=a._howls[u]._getSoundIds(),d=0;d<f.length;d++){var h=a._howls[u]._soundById(f[d]);h&&h._node&&(h._node.muted=r?!0:h._muted)}return a},stop:function(){for(var r=this||n,a=0;a<r._howls.length;a++)r._howls[a].stop();return r},unload:function(){for(var r=this||n,a=r._howls.length-1;a>=0;a--)r._howls[a].unload();return r.usingWebAudio&&r.ctx&&typeof r.ctx.close<"u"&&(r.ctx.close(),r.ctx=null,w()),r},codecs:function(r){return(this||n)._codecs[r.replace(/^x-/,"")]},_setup:function(){var r=this||n;if(r.state=r.ctx&&r.ctx.state||"suspended",r._autoSuspend(),!r.usingWebAudio)if(typeof Audio<"u")try{var a=new Audio;typeof a.oncanplaythrough>"u"&&(r._canPlayEvent="canplay")}catch{r.noAudio=!0}else r.noAudio=!0;try{var a=new Audio;a.muted&&(r.noAudio=!0)}catch{}return r.noAudio||r._setupCodecs(),r},_setupCodecs:function(){var r=this||n,a=null;try{a=typeof Audio<"u"?new Audio:null}catch{return r}if(!a||typeof a.canPlayType!="function")return r;var u=a.canPlayType("audio/mpeg;").replace(/^no$/,""),f=r._navigator?r._navigator.userAgent:"",d=f.match(/OPR\/(\d+)/g),h=d&&parseInt(d[0].split("/")[1],10)<33,c=f.indexOf("Safari")!==-1&&f.indexOf("Chrome")===-1,m=f.match(/Version\/(.*?) /),b=c&&m&&parseInt(m[1],10)<15;return r._codecs={mp3:!!(!h&&(u||a.canPlayType("audio/mp3;").replace(/^no$/,""))),mpeg:!!u,opus:!!a.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(a.canPlayType('audio/wav; codecs="1"')||a.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!a.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!a.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(a.canPlayType("audio/x-m4a;")||a.canPlayType("audio/m4a;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(a.canPlayType("audio/x-m4b;")||a.canPlayType("audio/m4b;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(a.canPlayType("audio/x-mp4;")||a.canPlayType("audio/mp4;")||a.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!!(!b&&a.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!a.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(a.canPlayType("audio/x-flac;")||a.canPlayType("audio/flac;")).replace(/^no$/,"")},r},_unlockAudio:function(){var r=this||n;if(!(r._audioUnlocked||!r.ctx)){r._audioUnlocked=!1,r.autoUnlock=!1,!r._mobileUnloaded&&r.ctx.sampleRate!==44100&&(r._mobileUnloaded=!0,r.unload()),r._scratchBuffer=r.ctx.createBuffer(1,1,22050);var a=function(u){for(;r._html5AudioPool.length<r.html5PoolSize;)try{var f=new Audio;f._unlocked=!0,r._releaseHtml5Audio(f)}catch{r.noAudio=!0;break}for(var d=0;d<r._howls.length;d++)if(!r._howls[d]._webAudio)for(var h=r._howls[d]._getSoundIds(),c=0;c<h.length;c++){var m=r._howls[d]._soundById(h[c]);m&&m._node&&!m._node._unlocked&&(m._node._unlocked=!0,m._node.load())}r._autoResume();var b=r.ctx.createBufferSource();b.buffer=r._scratchBuffer,b.connect(r.ctx.destination),typeof b.start>"u"?b.noteOn(0):b.start(0),typeof r.ctx.resume=="function"&&r.ctx.resume(),b.onended=function(){b.disconnect(0),r._audioUnlocked=!0,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0),document.removeEventListener("click",a,!0),document.removeEventListener("keydown",a,!0);for(var k=0;k<r._howls.length;k++)r._howls[k]._emit("unlock")}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),document.addEventListener("click",a,!0),document.addEventListener("keydown",a,!0),r}},_obtainHtml5Audio:function(){var r=this||n;if(r._html5AudioPool.length)return r._html5AudioPool.pop();var a=new Audio().play();return a&&typeof Promise<"u"&&(a instanceof Promise||typeof a.then=="function")&&a.catch(function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")}),new Audio},_releaseHtml5Audio:function(r){var a=this||n;return r._unlocked&&a._html5AudioPool.push(r),a},_autoSuspend:function(){var r=this;if(!(!r.autoSuspend||!r.ctx||typeof r.ctx.suspend>"u"||!n.usingWebAudio)){for(var a=0;a<r._howls.length;a++)if(r._howls[a]._webAudio){for(var u=0;u<r._howls[a]._sounds.length;u++)if(!r._howls[a]._sounds[u]._paused)return r}return r._suspendTimer&&clearTimeout(r._suspendTimer),r._suspendTimer=setTimeout(function(){if(r.autoSuspend){r._suspendTimer=null,r.state="suspending";var f=function(){r.state="suspended",r._resumeAfterSuspend&&(delete r._resumeAfterSuspend,r._autoResume())};r.ctx.suspend().then(f,f)}},3e4),r}},_autoResume:function(){var r=this;if(!(!r.ctx||typeof r.ctx.resume>"u"||!n.usingWebAudio))return r.state==="running"&&r.ctx.state!=="interrupted"&&r._suspendTimer?(clearTimeout(r._suspendTimer),r._suspendTimer=null):r.state==="suspended"||r.state==="running"&&r.ctx.state==="interrupted"?(r.ctx.resume().then(function(){r.state="running";for(var a=0;a<r._howls.length;a++)r._howls[a]._emit("resume")}),r._suspendTimer&&(clearTimeout(r._suspendTimer),r._suspendTimer=null)):r.state==="suspending"&&(r._resumeAfterSuspend=!0),r}};var n=new e,o=function(r){var a=this;if(!r.src||r.src.length===0){console.error("An array of source files must be passed with any new Howl.");return}a.init(r)};o.prototype={init:function(r){var a=this;return n.ctx||w(),a._autoplay=r.autoplay||!1,a._format=typeof r.format!="string"?r.format:[r.format],a._html5=r.html5||!1,a._muted=r.mute||!1,a._loop=r.loop||!1,a._pool=r.pool||5,a._preload=typeof r.preload=="boolean"||r.preload==="metadata"?r.preload:!0,a._rate=r.rate||1,a._sprite=r.sprite||{},a._src=typeof r.src!="string"?r.src:[r.src],a._volume=r.volume!==void 0?r.volume:1,a._xhr={method:r.xhr&&r.xhr.method?r.xhr.method:"GET",headers:r.xhr&&r.xhr.headers?r.xhr.headers:null,withCredentials:r.xhr&&r.xhr.withCredentials?r.xhr.withCredentials:!1},a._duration=0,a._state="unloaded",a._sounds=[],a._endTimers={},a._queue=[],a._playLock=!1,a._onend=r.onend?[{fn:r.onend}]:[],a._onfade=r.onfade?[{fn:r.onfade}]:[],a._onload=r.onload?[{fn:r.onload}]:[],a._onloaderror=r.onloaderror?[{fn:r.onloaderror}]:[],a._onplayerror=r.onplayerror?[{fn:r.onplayerror}]:[],a._onpause=r.onpause?[{fn:r.onpause}]:[],a._onplay=r.onplay?[{fn:r.onplay}]:[],a._onstop=r.onstop?[{fn:r.onstop}]:[],a._onmute=r.onmute?[{fn:r.onmute}]:[],a._onvolume=r.onvolume?[{fn:r.onvolume}]:[],a._onrate=r.onrate?[{fn:r.onrate}]:[],a._onseek=r.onseek?[{fn:r.onseek}]:[],a._onunlock=r.onunlock?[{fn:r.onunlock}]:[],a._onresume=[],a._webAudio=n.usingWebAudio&&!a._html5,typeof n.ctx<"u"&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(a),a._autoplay&&a._queue.push({event:"play",action:function(){a.play()}}),a._preload&&a._preload!=="none"&&a.load(),a},load:function(){var r=this,a=null;if(n.noAudio){r._emit("loaderror",null,"No audio support.");return}typeof r._src=="string"&&(r._src=[r._src]);for(var u=0;u<r._src.length;u++){var f,d;if(r._format&&r._format[u])f=r._format[u];else{if(d=r._src[u],typeof d!="string"){r._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}f=/^data:audio\/([^;,]+);/i.exec(d),f||(f=/\.([^.]+)$/.exec(d.split("?",1)[0])),f&&(f=f[1].toLowerCase())}if(f||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),f&&n.codecs(f)){a=r._src[u];break}}if(!a){r._emit("loaderror",null,"No codec support for selected audio sources.");return}return r._src=a,r._state="loading",window.location.protocol==="https:"&&a.slice(0,5)==="http:"&&(r._html5=!0,r._webAudio=!1),new i(r),r._webAudio&&l(r),r},play:function(r,a){var u=this,f=null;if(typeof r=="number")f=r,r=null;else{if(typeof r=="string"&&u._state==="loaded"&&!u._sprite[r])return null;if(typeof r>"u"&&(r="__default",!u._playLock)){for(var d=0,h=0;h<u._sounds.length;h++)u._sounds[h]._paused&&!u._sounds[h]._ended&&(d++,f=u._sounds[h]._id);d===1?r=null:f=null}}var c=f?u._soundById(f):u._inactiveSound();if(!c)return null;if(f&&!r&&(r=c._sprite||"__default"),u._state!=="loaded"){c._sprite=r,c._ended=!1;var m=c._id;return u._queue.push({event:"play",action:function(){u.play(m)}}),m}if(f&&!c._paused)return a||u._loadQueue("play"),c._id;u._webAudio&&n._autoResume();var b=Math.max(0,c._seek>0?c._seek:u._sprite[r][0]/1e3),k=Math.max(0,(u._sprite[r][0]+u._sprite[r][1])/1e3-b),P=k*1e3/Math.abs(c._rate),x=u._sprite[r][0]/1e3,A=(u._sprite[r][0]+u._sprite[r][1])/1e3;c._sprite=r,c._ended=!1;var M=function(){c._paused=!1,c._seek=b,c._start=x,c._stop=A,c._loop=!!(c._loop||u._sprite[r][2])};if(b>=A){u._ended(c);return}var S=c._node;if(u._webAudio){var L=function(){u._playLock=!1,M(),u._refreshBuffer(c);var G=c._muted||u._muted?0:c._volume;S.gain.setValueAtTime(G,n.ctx.currentTime),c._playStart=n.ctx.currentTime,typeof S.bufferSource.start>"u"?c._loop?S.bufferSource.noteGrainOn(0,b,86400):S.bufferSource.noteGrainOn(0,b,k):c._loop?S.bufferSource.start(0,b,86400):S.bufferSource.start(0,b,k),P!==1/0&&(u._endTimers[c._id]=setTimeout(u._ended.bind(u,c),P)),a||setTimeout(function(){u._emit("play",c._id),u._loadQueue()},0)};n.state==="running"&&n.ctx.state!=="interrupted"?L():(u._playLock=!0,u.once("resume",L),u._clearTimer(c._id))}else{var $=function(){S.currentTime=b,S.muted=c._muted||u._muted||n._muted||S.muted,S.volume=c._volume*n.volume(),S.playbackRate=c._rate;try{var G=S.play();if(G&&typeof Promise<"u"&&(G instanceof Promise||typeof G.then=="function")?(u._playLock=!0,M(),G.then(function(){u._playLock=!1,S._unlocked=!0,a?u._loadQueue():u._emit("play",c._id)}).catch(function(){u._playLock=!1,u._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),c._ended=!0,c._paused=!0})):a||(u._playLock=!1,M(),u._emit("play",c._id)),S.playbackRate=c._rate,S.paused){u._emit("playerror",c._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");return}r!=="__default"||c._loop?u._endTimers[c._id]=setTimeout(u._ended.bind(u,c),P):(u._endTimers[c._id]=function(){u._ended(c),S.removeEventListener("ended",u._endTimers[c._id],!1)},S.addEventListener("ended",u._endTimers[c._id],!1))}catch(he){u._emit("playerror",c._id,he)}};S.src==="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"&&(S.src=u._src,S.load());var B=window&&window.ejecta||!S.readyState&&n._navigator.isCocoonJS;if(S.readyState>=3||B)$();else{u._playLock=!0,u._state="loading";var ce=function(){u._state="loaded",$(),S.removeEventListener(n._canPlayEvent,ce,!1)};S.addEventListener(n._canPlayEvent,ce,!1),u._clearTimer(c._id)}}return c._id},pause:function(r){var a=this;if(a._state!=="loaded"||a._playLock)return a._queue.push({event:"pause",action:function(){a.pause(r)}}),a;for(var u=a._getSoundIds(r),f=0;f<u.length;f++){a._clearTimer(u[f]);var d=a._soundById(u[f]);if(d&&!d._paused&&(d._seek=a.seek(u[f]),d._rateSeek=0,d._paused=!0,a._stopFade(u[f]),d._node))if(a._webAudio){if(!d._node.bufferSource)continue;typeof d._node.bufferSource.stop>"u"?d._node.bufferSource.noteOff(0):d._node.bufferSource.stop(0),a._cleanBuffer(d._node)}else(!isNaN(d._node.duration)||d._node.duration===1/0)&&d._node.pause();arguments[1]||a._emit("pause",d?d._id:null)}return a},stop:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"stop",action:function(){u.stop(r)}}),u;for(var f=u._getSoundIds(r),d=0;d<f.length;d++){u._clearTimer(f[d]);var h=u._soundById(f[d]);h&&(h._seek=h._start||0,h._rateSeek=0,h._paused=!0,h._ended=!0,u._stopFade(f[d]),h._node&&(u._webAudio?h._node.bufferSource&&(typeof h._node.bufferSource.stop>"u"?h._node.bufferSource.noteOff(0):h._node.bufferSource.stop(0),u._cleanBuffer(h._node)):(!isNaN(h._node.duration)||h._node.duration===1/0)&&(h._node.currentTime=h._start||0,h._node.pause(),h._node.duration===1/0&&u._clearSound(h._node))),a||u._emit("stop",h._id))}return u},mute:function(r,a){var u=this;if(u._state!=="loaded"||u._playLock)return u._queue.push({event:"mute",action:function(){u.mute(r,a)}}),u;if(typeof a>"u")if(typeof r=="boolean")u._muted=r;else return u._muted;for(var f=u._getSoundIds(a),d=0;d<f.length;d++){var h=u._soundById(f[d]);h&&(h._muted=r,h._interval&&u._stopFade(h._id),u._webAudio&&h._node?h._node.gain.setValueAtTime(r?0:h._volume,n.ctx.currentTime):h._node&&(h._node.muted=n._muted?!0:r),u._emit("mute",h._id))}return u},volume:function(){var r=this,a=arguments,u,f;if(a.length===0)return r._volume;if(a.length===1||a.length===2&&typeof a[1]>"u"){var d=r._getSoundIds(),h=d.indexOf(a[0]);h>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length>=2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var c;if(typeof u<"u"&&u>=0&&u<=1){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"volume",action:function(){r.volume.apply(r,a)}}),r;typeof f>"u"&&(r._volume=u),f=r._getSoundIds(f);for(var m=0;m<f.length;m++)c=r._soundById(f[m]),c&&(c._volume=u,a[2]||r._stopFade(f[m]),r._webAudio&&c._node&&!c._muted?c._node.gain.setValueAtTime(u,n.ctx.currentTime):c._node&&!c._muted&&(c._node.volume=u*n.volume()),r._emit("volume",c._id))}else return c=f?r._soundById(f):r._sounds[0],c?c._volume:0;return r},fade:function(r,a,u,f){var d=this;if(d._state!=="loaded"||d._playLock)return d._queue.push({event:"fade",action:function(){d.fade(r,a,u,f)}}),d;r=Math.min(Math.max(0,parseFloat(r)),1),a=Math.min(Math.max(0,parseFloat(a)),1),u=parseFloat(u),d.volume(r,f);for(var h=d._getSoundIds(f),c=0;c<h.length;c++){var m=d._soundById(h[c]);if(m){if(f||d._stopFade(h[c]),d._webAudio&&!m._muted){var b=n.ctx.currentTime,k=b+u/1e3;m._volume=r,m._node.gain.setValueAtTime(r,b),m._node.gain.linearRampToValueAtTime(a,k)}d._startFadeInterval(m,r,a,u,h[c],typeof f>"u")}}return d},_startFadeInterval:function(r,a,u,f,d,h){var c=this,m=a,b=u-a,k=Math.abs(b/.01),P=Math.max(4,k>0?f/k:f),x=Date.now();r._fadeTo=u,r._interval=setInterval(function(){var A=(Date.now()-x)/f;x=Date.now(),m+=b*A,m=Math.round(m*100)/100,b<0?m=Math.max(u,m):m=Math.min(u,m),c._webAudio?r._volume=m:c.volume(m,r._id,!0),h&&(c._volume=m),(u<a&&m<=u||u>a&&m>=u)&&(clearInterval(r._interval),r._interval=null,r._fadeTo=null,c.volume(u,r._id),c._emit("fade",r._id))},P)},_stopFade:function(r){var a=this,u=a._soundById(r);return u&&u._interval&&(a._webAudio&&u._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(u._interval),u._interval=null,a.volume(u._fadeTo,r),u._fadeTo=null,a._emit("fade",r)),a},loop:function(){var r=this,a=arguments,u,f,d;if(a.length===0)return r._loop;if(a.length===1)if(typeof a[0]=="boolean")u=a[0],r._loop=u;else return d=r._soundById(parseInt(a[0],10)),d?d._loop:!1;else a.length===2&&(u=a[0],f=parseInt(a[1],10));for(var h=r._getSoundIds(f),c=0;c<h.length;c++)d=r._soundById(h[c]),d&&(d._loop=u,r._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=u,u&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop,r.playing(h[c])&&(r.pause(h[c],!0),r.play(h[c],!0)))));return r},rate:function(){var r=this,a=arguments,u,f;if(a.length===0)f=r._sounds[0]._id;else if(a.length===1){var d=r._getSoundIds(),h=d.indexOf(a[0]);h>=0?f=parseInt(a[0],10):u=parseFloat(a[0])}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));var c;if(typeof u=="number"){if(r._state!=="loaded"||r._playLock)return r._queue.push({event:"rate",action:function(){r.rate.apply(r,a)}}),r;typeof f>"u"&&(r._rate=u),f=r._getSoundIds(f);for(var m=0;m<f.length;m++)if(c=r._soundById(f[m]),c){r.playing(f[m])&&(c._rateSeek=r.seek(f[m]),c._playStart=r._webAudio?n.ctx.currentTime:c._playStart),c._rate=u,r._webAudio&&c._node&&c._node.bufferSource?c._node.bufferSource.playbackRate.setValueAtTime(u,n.ctx.currentTime):c._node&&(c._node.playbackRate=u);var b=r.seek(f[m]),k=(r._sprite[c._sprite][0]+r._sprite[c._sprite][1])/1e3-b,P=k*1e3/Math.abs(c._rate);(r._endTimers[f[m]]||!c._paused)&&(r._clearTimer(f[m]),r._endTimers[f[m]]=setTimeout(r._ended.bind(r,c),P)),r._emit("rate",c._id)}}else return c=r._soundById(f),c?c._rate:r._rate;return r},seek:function(){var r=this,a=arguments,u,f;if(a.length===0)r._sounds.length&&(f=r._sounds[0]._id);else if(a.length===1){var d=r._getSoundIds(),h=d.indexOf(a[0]);h>=0?f=parseInt(a[0],10):r._sounds.length&&(f=r._sounds[0]._id,u=parseFloat(a[0]))}else a.length===2&&(u=parseFloat(a[0]),f=parseInt(a[1],10));if(typeof f>"u")return 0;if(typeof u=="number"&&(r._state!=="loaded"||r._playLock))return r._queue.push({event:"seek",action:function(){r.seek.apply(r,a)}}),r;var c=r._soundById(f);if(c)if(typeof u=="number"&&u>=0){var m=r.playing(f);m&&r.pause(f,!0),c._seek=u,c._ended=!1,r._clearTimer(f),!r._webAudio&&c._node&&!isNaN(c._node.duration)&&(c._node.currentTime=u);var b=function(){m&&r.play(f,!0),r._emit("seek",f)};if(m&&!r._webAudio){var k=function(){r._playLock?setTimeout(k,0):b()};setTimeout(k,0)}else b()}else if(r._webAudio){var P=r.playing(f)?n.ctx.currentTime-c._playStart:0,x=c._rateSeek?c._rateSeek-c._seek:0;return c._seek+(x+P*Math.abs(c._rate))}else return c._node.currentTime;return r},playing:function(r){var a=this;if(typeof r=="number"){var u=a._soundById(r);return u?!u._paused:!1}for(var f=0;f<a._sounds.length;f++)if(!a._sounds[f]._paused)return!0;return!1},duration:function(r){var a=this,u=a._duration,f=a._soundById(r);return f&&(u=a._sprite[f._sprite][1]/1e3),u},state:function(){return this._state},unload:function(){for(var r=this,a=r._sounds,u=0;u<a.length;u++)a[u]._paused||r.stop(a[u]._id),r._webAudio||(r._clearSound(a[u]._node),a[u]._node.removeEventListener("error",a[u]._errorFn,!1),a[u]._node.removeEventListener(n._canPlayEvent,a[u]._loadFn,!1),a[u]._node.removeEventListener("ended",a[u]._endFn,!1),n._releaseHtml5Audio(a[u]._node)),delete a[u]._node,r._clearTimer(a[u]._id);var f=n._howls.indexOf(r);f>=0&&n._howls.splice(f,1);var d=!0;for(u=0;u<n._howls.length;u++)if(n._howls[u]._src===r._src||r._src.indexOf(n._howls[u]._src)>=0){d=!1;break}return s&&d&&delete s[r._src],n.noAudio=!1,r._state="unloaded",r._sounds=[],r=null,null},on:function(r,a,u,f){var d=this,h=d["_on"+r];return typeof a=="function"&&h.push(f?{id:u,fn:a,once:f}:{id:u,fn:a}),d},off:function(r,a,u){var f=this,d=f["_on"+r],h=0;if(typeof a=="number"&&(u=a,a=null),a||u)for(h=0;h<d.length;h++){var c=u===d[h].id;if(a===d[h].fn&&c||!a&&c){d.splice(h,1);break}}else if(r)f["_on"+r]=[];else{var m=Object.keys(f);for(h=0;h<m.length;h++)m[h].indexOf("_on")===0&&Array.isArray(f[m[h]])&&(f[m[h]]=[])}return f},once:function(r,a,u){var f=this;return f.on(r,a,u,1),f},_emit:function(r,a,u){for(var f=this,d=f["_on"+r],h=d.length-1;h>=0;h--)(!d[h].id||d[h].id===a||r==="load")&&(setTimeout((function(c){c.call(this,a,u)}).bind(f,d[h].fn),0),d[h].once&&f.off(r,d[h].fn,d[h].id));return f._loadQueue(r),f},_loadQueue:function(r){var a=this;if(a._queue.length>0){var u=a._queue[0];u.event===r&&(a._queue.shift(),a._loadQueue()),r||u.action()}return a},_ended:function(r){var a=this,u=r._sprite;if(!a._webAudio&&r._node&&!r._node.paused&&!r._node.ended&&r._node.currentTime<r._stop)return setTimeout(a._ended.bind(a,r),100),a;var f=!!(r._loop||a._sprite[u][2]);if(a._emit("end",r._id),!a._webAudio&&f&&a.stop(r._id,!0).play(r._id),a._webAudio&&f){a._emit("play",r._id),r._seek=r._start||0,r._rateSeek=0,r._playStart=n.ctx.currentTime;var d=(r._stop-r._start)*1e3/Math.abs(r._rate);a._endTimers[r._id]=setTimeout(a._ended.bind(a,r),d)}return a._webAudio&&!f&&(r._paused=!0,r._ended=!0,r._seek=r._start||0,r._rateSeek=0,a._clearTimer(r._id),a._cleanBuffer(r._node),n._autoSuspend()),!a._webAudio&&!f&&a.stop(r._id,!0),a},_clearTimer:function(r){var a=this;if(a._endTimers[r]){if(typeof a._endTimers[r]!="function")clearTimeout(a._endTimers[r]);else{var u=a._soundById(r);u&&u._node&&u._node.removeEventListener("ended",a._endTimers[r],!1)}delete a._endTimers[r]}return a},_soundById:function(r){for(var a=this,u=0;u<a._sounds.length;u++)if(r===a._sounds[u]._id)return a._sounds[u];return null},_inactiveSound:function(){var r=this;r._drain();for(var a=0;a<r._sounds.length;a++)if(r._sounds[a]._ended)return r._sounds[a].reset();return new i(r)},_drain:function(){var r=this,a=r._pool,u=0,f=0;if(!(r._sounds.length<a)){for(f=0;f<r._sounds.length;f++)r._sounds[f]._ended&&u++;for(f=r._sounds.length-1;f>=0;f--){if(u<=a)return;r._sounds[f]._ended&&(r._webAudio&&r._sounds[f]._node&&r._sounds[f]._node.disconnect(0),r._sounds.splice(f,1),u--)}}},_getSoundIds:function(r){var a=this;if(typeof r>"u"){for(var u=[],f=0;f<a._sounds.length;f++)u.push(a._sounds[f]._id);return u}else return[r]},_refreshBuffer:function(r){var a=this;return r._node.bufferSource=n.ctx.createBufferSource(),r._node.bufferSource.buffer=s[a._src],r._panner?r._node.bufferSource.connect(r._panner):r._node.bufferSource.connect(r._node),r._node.bufferSource.loop=r._loop,r._loop&&(r._node.bufferSource.loopStart=r._start||0,r._node.bufferSource.loopEnd=r._stop||0),r._node.bufferSource.playbackRate.setValueAtTime(r._rate,n.ctx.currentTime),a},_cleanBuffer:function(r){var a=this,u=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(!r.bufferSource)return a;if(n._scratchBuffer&&r.bufferSource&&(r.bufferSource.onended=null,r.bufferSource.disconnect(0),u))try{r.bufferSource.buffer=n._scratchBuffer}catch{}return r.bufferSource=null,a},_clearSound:function(r){var a=/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent);a||(r.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var i=function(r){this._parent=r,this.init()};i.prototype={init:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++n._counter,a._sounds.push(r),r.create(),r},create:function(){var r=this,a=r._parent,u=n._muted||r._muted||r._parent._muted?0:r._volume;return a._webAudio?(r._node=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),r._node.gain.setValueAtTime(u,n.ctx.currentTime),r._node.paused=!0,r._node.connect(n.masterGain)):n.noAudio||(r._node=n._obtainHtml5Audio(),r._errorFn=r._errorListener.bind(r),r._node.addEventListener("error",r._errorFn,!1),r._loadFn=r._loadListener.bind(r),r._node.addEventListener(n._canPlayEvent,r._loadFn,!1),r._endFn=r._endListener.bind(r),r._node.addEventListener("ended",r._endFn,!1),r._node.src=a._src,r._node.preload=a._preload===!0?"auto":a._preload,r._node.volume=u*n.volume(),r._node.load()),r},reset:function(){var r=this,a=r._parent;return r._muted=a._muted,r._loop=a._loop,r._volume=a._volume,r._rate=a._rate,r._seek=0,r._rateSeek=0,r._paused=!0,r._ended=!0,r._sprite="__default",r._id=++n._counter,r},_errorListener:function(){var r=this;r._parent._emit("loaderror",r._id,r._node.error?r._node.error.code:0),r._node.removeEventListener("error",r._errorFn,!1)},_loadListener:function(){var r=this,a=r._parent;a._duration=Math.ceil(r._node.duration*10)/10,Object.keys(a._sprite).length===0&&(a._sprite={__default:[0,a._duration*1e3]}),a._state!=="loaded"&&(a._state="loaded",a._emit("load"),a._loadQueue()),r._node.removeEventListener(n._canPlayEvent,r._loadFn,!1)},_endListener:function(){var r=this,a=r._parent;a._duration===1/0&&(a._duration=Math.ceil(r._node.duration*10)/10,a._sprite.__default[1]===1/0&&(a._sprite.__default[1]=a._duration*1e3),a._ended(r)),r._node.removeEventListener("ended",r._endFn,!1)}};var s={},l=function(r){var a=r._src;if(s[a]){r._duration=s[a].duration,_(r);return}if(/^data:[^;]+;base64,/.test(a)){for(var u=atob(a.split(",")[1]),f=new Uint8Array(u.length),d=0;d<u.length;++d)f[d]=u.charCodeAt(d);y(f.buffer,r)}else{var h=new XMLHttpRequest;h.open(r._xhr.method,a,!0),h.withCredentials=r._xhr.withCredentials,h.responseType="arraybuffer",r._xhr.headers&&Object.keys(r._xhr.headers).forEach(function(c){h.setRequestHeader(c,r._xhr.headers[c])}),h.onload=function(){var c=(h.status+"")[0];if(c!=="0"&&c!=="2"&&c!=="3"){r._emit("loaderror",null,"Failed loading audio file with status: "+h.status+".");return}y(h.response,r)},h.onerror=function(){r._webAudio&&(r._html5=!0,r._webAudio=!1,r._sounds=[],delete s[a],r.load())},p(h)}},p=function(r){try{r.send()}catch{r.onerror()}},y=function(r,a){var u=function(){a._emit("loaderror",null,"Decoding audio data failed.")},f=function(d){d&&a._sounds.length>0?(s[a._src]=d,_(a,d)):u()};typeof Promise<"u"&&n.ctx.decodeAudioData.length===1?n.ctx.decodeAudioData(r).then(f).catch(u):n.ctx.decodeAudioData(r,f,u)},_=function(r,a){a&&!r._duration&&(r._duration=a.duration),Object.keys(r._sprite).length===0&&(r._sprite={__default:[0,r._duration*1e3]}),r._state!=="loaded"&&(r._state="loaded",r._emit("load"),r._loadQueue())},w=function(){if(n.usingWebAudio){try{typeof AudioContext<"u"?n.ctx=new AudioContext:typeof webkitAudioContext<"u"?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch{n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var r=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),a=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),u=a?parseInt(a[1],10):null;if(r&&u&&u<9){var f=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!f&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=typeof n.ctx.createGain>"u"?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=o,typeof Ae<"u"?(Ae.HowlerGlobal=e,Ae.Howler=n,Ae.Howl=o,Ae.Sound=i):typeof window<"u"&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=o,window.Sound=i)})();/*!
 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
 *  
 *  howler.js v2.2.4
 *  howlerjs.com
 *
 *  (c) 2013-2020, James Simpson of GoldFire Studios
 *  goldfirestudios.com
 *
 *  MIT License
 */(function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){var o=this;if(!o.ctx||!o.ctx.listener)return o;for(var i=o._howls.length-1;i>=0;i--)o._howls[i].stereo(n);return o},HowlerGlobal.prototype.pos=function(n,o,i){var s=this;if(!s.ctx||!s.ctx.listener)return s;if(o=typeof o!="number"?s._pos[1]:o,i=typeof i!="number"?s._pos[2]:i,typeof n=="number")s._pos=[n,o,i],typeof s.ctx.listener.positionX<"u"?(s.ctx.listener.positionX.setTargetAtTime(s._pos[0],Howler.ctx.currentTime,.1),s.ctx.listener.positionY.setTargetAtTime(s._pos[1],Howler.ctx.currentTime,.1),s.ctx.listener.positionZ.setTargetAtTime(s._pos[2],Howler.ctx.currentTime,.1)):s.ctx.listener.setPosition(s._pos[0],s._pos[1],s._pos[2]);else return s._pos;return s},HowlerGlobal.prototype.orientation=function(n,o,i,s,l,p){var y=this;if(!y.ctx||!y.ctx.listener)return y;var _=y._orientation;if(o=typeof o!="number"?_[1]:o,i=typeof i!="number"?_[2]:i,s=typeof s!="number"?_[3]:s,l=typeof l!="number"?_[4]:l,p=typeof p!="number"?_[5]:p,typeof n=="number")y._orientation=[n,o,i,s,l,p],typeof y.ctx.listener.forwardX<"u"?(y.ctx.listener.forwardX.setTargetAtTime(n,Howler.ctx.currentTime,.1),y.ctx.listener.forwardY.setTargetAtTime(o,Howler.ctx.currentTime,.1),y.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),y.ctx.listener.upX.setTargetAtTime(s,Howler.ctx.currentTime,.1),y.ctx.listener.upY.setTargetAtTime(l,Howler.ctx.currentTime,.1),y.ctx.listener.upZ.setTargetAtTime(p,Howler.ctx.currentTime,.1)):y.ctx.listener.setOrientation(n,o,i,s,l,p);else return _;return y},Howl.prototype.init=(function(n){return function(o){var i=this;return i._orientation=o.orientation||[1,0,0],i._stereo=o.stereo||null,i._pos=o.pos||null,i._pannerAttr={coneInnerAngle:typeof o.coneInnerAngle<"u"?o.coneInnerAngle:360,coneOuterAngle:typeof o.coneOuterAngle<"u"?o.coneOuterAngle:360,coneOuterGain:typeof o.coneOuterGain<"u"?o.coneOuterGain:0,distanceModel:typeof o.distanceModel<"u"?o.distanceModel:"inverse",maxDistance:typeof o.maxDistance<"u"?o.maxDistance:1e4,panningModel:typeof o.panningModel<"u"?o.panningModel:"HRTF",refDistance:typeof o.refDistance<"u"?o.refDistance:1,rolloffFactor:typeof o.rolloffFactor<"u"?o.rolloffFactor:1},i._onstereo=o.onstereo?[{fn:o.onstereo}]:[],i._onpos=o.onpos?[{fn:o.onpos}]:[],i._onorientation=o.onorientation?[{fn:o.onorientation}]:[],n.call(this,o)}})(Howl.prototype.init),Howl.prototype.stereo=function(n,o){var i=this;if(!i._webAudio)return i;if(i._state!=="loaded")return i._queue.push({event:"stereo",action:function(){i.stereo(n,o)}}),i;var s=typeof Howler.ctx.createStereoPanner>"u"?"spatial":"stereo";if(typeof o>"u")if(typeof n=="number")i._stereo=n,i._pos=[n,0,0];else return i._stereo;for(var l=i._getSoundIds(o),p=0;p<l.length;p++){var y=i._soundById(l[p]);if(y)if(typeof n=="number")y._stereo=n,y._pos=[n,0,0],y._node&&(y._pannerAttr.panningModel="equalpower",(!y._panner||!y._panner.pan)&&e(y,s),s==="spatial"?typeof y._panner.positionX<"u"?(y._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),y._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),y._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):y._panner.setPosition(n,0,0):y._panner.pan.setValueAtTime(n,Howler.ctx.currentTime)),i._emit("stereo",y._id);else return y._stereo}return i},Howl.prototype.pos=function(n,o,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"pos",action:function(){l.pos(n,o,i,s)}}),l;if(o=typeof o!="number"?0:o,i=typeof i!="number"?-.5:i,typeof s>"u")if(typeof n=="number")l._pos=[n,o,i];else return l._pos;for(var p=l._getSoundIds(s),y=0;y<p.length;y++){var _=l._soundById(p[y]);if(_)if(typeof n=="number")_._pos=[n,o,i],_._node&&((!_._panner||_._panner.pan)&&e(_,"spatial"),typeof _._panner.positionX<"u"?(_._panner.positionX.setValueAtTime(n,Howler.ctx.currentTime),_._panner.positionY.setValueAtTime(o,Howler.ctx.currentTime),_._panner.positionZ.setValueAtTime(i,Howler.ctx.currentTime)):_._panner.setPosition(n,o,i)),l._emit("pos",_._id);else return _._pos}return l},Howl.prototype.orientation=function(n,o,i,s){var l=this;if(!l._webAudio)return l;if(l._state!=="loaded")return l._queue.push({event:"orientation",action:function(){l.orientation(n,o,i,s)}}),l;if(o=typeof o!="number"?l._orientation[1]:o,i=typeof i!="number"?l._orientation[2]:i,typeof s>"u")if(typeof n=="number")l._orientation=[n,o,i];else return l._orientation;for(var p=l._getSoundIds(s),y=0;y<p.length;y++){var _=l._soundById(p[y]);if(_)if(typeof n=="number")_._orientation=[n,o,i],_._node&&(_._panner||(_._pos||(_._pos=l._pos||[0,0,-.5]),e(_,"spatial")),typeof _._panner.orientationX<"u"?(_._panner.orientationX.setValueAtTime(n,Howler.ctx.currentTime),_._panner.orientationY.setValueAtTime(o,Howler.ctx.currentTime),_._panner.orientationZ.setValueAtTime(i,Howler.ctx.currentTime)):_._panner.setOrientation(n,o,i)),l._emit("orientation",_._id);else return _._orientation}return l},Howl.prototype.pannerAttr=function(){var n=this,o=arguments,i,s,l;if(!n._webAudio)return n;if(o.length===0)return n._pannerAttr;if(o.length===1)if(typeof o[0]=="object")i=o[0],typeof s>"u"&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),n._pannerAttr={coneInnerAngle:typeof i.pannerAttr.coneInnerAngle<"u"?i.pannerAttr.coneInnerAngle:n._coneInnerAngle,coneOuterAngle:typeof i.pannerAttr.coneOuterAngle<"u"?i.pannerAttr.coneOuterAngle:n._coneOuterAngle,coneOuterGain:typeof i.pannerAttr.coneOuterGain<"u"?i.pannerAttr.coneOuterGain:n._coneOuterGain,distanceModel:typeof i.pannerAttr.distanceModel<"u"?i.pannerAttr.distanceModel:n._distanceModel,maxDistance:typeof i.pannerAttr.maxDistance<"u"?i.pannerAttr.maxDistance:n._maxDistance,refDistance:typeof i.pannerAttr.refDistance<"u"?i.pannerAttr.refDistance:n._refDistance,rolloffFactor:typeof i.pannerAttr.rolloffFactor<"u"?i.pannerAttr.rolloffFactor:n._rolloffFactor,panningModel:typeof i.pannerAttr.panningModel<"u"?i.pannerAttr.panningModel:n._panningModel});else return l=n._soundById(parseInt(o[0],10)),l?l._pannerAttr:n._pannerAttr;else o.length===2&&(i=o[0],s=parseInt(o[1],10));for(var p=n._getSoundIds(s),y=0;y<p.length;y++)if(l=n._soundById(p[y]),l){var _=l._pannerAttr;_={coneInnerAngle:typeof i.coneInnerAngle<"u"?i.coneInnerAngle:_.coneInnerAngle,coneOuterAngle:typeof i.coneOuterAngle<"u"?i.coneOuterAngle:_.coneOuterAngle,coneOuterGain:typeof i.coneOuterGain<"u"?i.coneOuterGain:_.coneOuterGain,distanceModel:typeof i.distanceModel<"u"?i.distanceModel:_.distanceModel,maxDistance:typeof i.maxDistance<"u"?i.maxDistance:_.maxDistance,refDistance:typeof i.refDistance<"u"?i.refDistance:_.refDistance,rolloffFactor:typeof i.rolloffFactor<"u"?i.rolloffFactor:_.rolloffFactor,panningModel:typeof i.panningModel<"u"?i.panningModel:_.panningModel};var w=l._panner;w||(l._pos||(l._pos=n._pos||[0,0,-.5]),e(l,"spatial"),w=l._panner),w.coneInnerAngle=_.coneInnerAngle,w.coneOuterAngle=_.coneOuterAngle,w.coneOuterGain=_.coneOuterGain,w.distanceModel=_.distanceModel,w.maxDistance=_.maxDistance,w.refDistance=_.refDistance,w.rolloffFactor=_.rolloffFactor,w.panningModel=_.panningModel}return n},Sound.prototype.init=(function(n){return function(){var o=this,i=o._parent;o._orientation=i._orientation,o._stereo=i._stereo,o._pos=i._pos,o._pannerAttr=i._pannerAttr,n.call(this),o._stereo?i.stereo(o._stereo):o._pos&&i.pos(o._pos[0],o._pos[1],o._pos[2],o._id)}})(Sound.prototype.init),Sound.prototype.reset=(function(n){return function(){var o=this,i=o._parent;return o._orientation=i._orientation,o._stereo=i._stereo,o._pos=i._pos,o._pannerAttr=i._pannerAttr,o._stereo?i.stereo(o._stereo):o._pos?i.pos(o._pos[0],o._pos[1],o._pos[2],o._id):o._panner&&(o._panner.disconnect(0),o._panner=void 0,i._refreshBuffer(o)),n.call(this)}})(Sound.prototype.reset);var e=function(n,o){o=o||"spatial",o==="spatial"?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,typeof n._panner.positionX<"u"?(n._panner.positionX.setValueAtTime(n._pos[0],Howler.ctx.currentTime),n._panner.positionY.setValueAtTime(n._pos[1],Howler.ctx.currentTime),n._panner.positionZ.setValueAtTime(n._pos[2],Howler.ctx.currentTime)):n._panner.setPosition(n._pos[0],n._pos[1],n._pos[2]),typeof n._panner.orientationX<"u"?(n._panner.orientationX.setValueAtTime(n._orientation[0],Howler.ctx.currentTime),n._panner.orientationY.setValueAtTime(n._orientation[1],Howler.ctx.currentTime),n._panner.orientationZ.setValueAtTime(n._orientation[2],Howler.ctx.currentTime)):n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.setValueAtTime(n._stereo,Howler.ctx.currentTime)),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id,!0)}})()})(ct)),ct}var ne=br();const z={elapsed:[6,12,24,36,48,60,72,84,96,108],remaining:[6,12,24],overtime:[6,12,18,24,30,36,42,48,60],overtimeBreak:[6,12,18,24,30,36,42,48]};let Qe=!1;const Me=[],kr=50,me=(t,e,n=null,o=!1,i=null)=>{const s={timestamp:Date.now(),soundKey:t,success:e,error:n?.message||null,retry:o,periodContext:i};Me.unshift(s),Me.length>kr&&Me.pop()},ke=async()=>{if(Qe)return!0;try{const e=new ne.Howl({src:["data:audio/wav;base64,UklGRigAAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQAAAAA="],volume:0,html5:!1}).play();return e&&await e,Qe=!0,D(" Audio context","unlocked successfully",3),!0}catch(t){return D(" Failed to unlock audio context",t,2),!1}},Pr=()=>{if(typeof window>"u")return{};const t={button:new ne.Howl({src:["/tymer/sounds/button.webm"],loop:!1}),timerFinished:new ne.Howl({src:["/tymer/sounds/timer-end.webm"],loop:!1})};for(let n=1;n<=63;n++){const o=String(n).padStart(2,"0");t[`notification_${n}`]=new ne.Howl({src:[`/tymer/sounds/notifications/${o}.ogg`],loop:!1})}z.elapsed.forEach(n=>{const o=`elapsed_${n}`,i=`/tymer/sounds/elapsed/${String(n).padStart(3,"0")}.webm`;t[o]=new ne.Howl({src:[i],loop:!1})}),z.remaining.forEach(n=>{const o=`remaining_${n}`,i=`/tymer/sounds/remaining/${String(n).padStart(3,"0")}.webm`;t[o]=new ne.Howl({src:[i],loop:!1})});const e=["work","break","fun","finish"];for(const n of e)t[`timesup_${n}`]=new ne.Howl({src:[`/tymer/sounds/timesup/${n}.webm`],loop:!1});return z.overtime.forEach(n=>{const o=`overtime_${n}`,i=`/tymer/sounds/overtime/${String(n).padStart(3,"0")}.webm`;t[o]=new ne.Howl({src:[i],loop:!1})}),z.overtimeBreak.forEach(n=>{const o=`overtime_break_${n}`,i=`/tymer/sounds/overtime/break/${String(n).padStart(3,"0")}.webm`;t[o]=new ne.Howl({src:[i],loop:!1})}),t},Nn=Pr();z.elapsed.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/elapsed/${String(e).padStart(3,"0")}.webm`,t),{}),z.remaining.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/remaining/${String(e).padStart(3,"0")}.webm`,t),{}),z.overtime.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/overtime/${String(e).padStart(3,"0")}.webm`,t),{}),z.overtimeBreak.reduce((t,e)=>(t[`${e}min`]=`/tymer/sounds/overtime/break/${String(e).padStart(3,"0")}.webm`,t),{});const Sr=()=>{try{const e=typeof window<"u"&&window.__timerModule?window.__timerModule:null;if(!e)return null;const n=e.currentPeriod?.value,o=e.timerState?.value;if(n){const i=n.periodDurationElapsed,s=n.periodUserIntendedDuration,l=s-i,p=i>s;return{periodType:n.type,periodDuration:s,elapsed:i,remaining:l>0?l:0,overtime:p?i-s:0,periodIndex:o?.currentPeriodIndex||0}}}catch{}return null},Et=async t=>{const e=Nn[t],n=Sr();if(!e)return D(" Sound not found",t,2),me(t,!1,new Error("Sound not found"),!1,n),!1;try{return!Qe&&!await ke()?(D(" Audio unlock failed for",t,2),me(t,!1,new Error("Audio unlock failed"),!1,n),!1):(ne.Howler.stop(),e.play(),D(" Sound played successfully",t,10),me(t,!0,null,!1,n),!0)}catch(o){D(" Sound play failed",`${t}: ${o.message}`,2),me(t,!1,o,!1,n);try{return await ke(),e.play(),D(" Sound played after re-unlock",t,10),me(t,!0,null,!0,n),!0}catch(i){return D(" Sound retry failed",`${t}: ${i.message}`,1),me(t,!1,i,!0,n),!1}}},Tr=async()=>{const e=`notification_${Math.floor(Math.random()*63)+1}`;D(" Playing random notification",e,10);const n=Nn[e];if(!n)return D(" Notification sound not found",e,2),!1;try{return Qe||await ke(),new Promise(o=>{const i=n.play();D(" Notification started",`${e} (ID: ${i})`,10),n.once("end",()=>{D(" Notification ended",e,10),o(!0)},i),n.once("playerror",(s,l)=>{D(" Notification error",`${e}: ${l}`,2),o(!1)},i)})}catch(o){return D(" Notification play failed",`${e}: ${o.message}`,2),!1}},ee=t=>Et(t),Ar=()=>Et("timerFinished"),xr=async t=>(await Tr(),D(" Playing period sound",t,10),Et(t)),Dr=t=>{const e=t.split("/"),n=e[e.length-1],o=e[e.length-2],i=e.length>3?e[e.length-3]:null,s=parseInt(n.replace(".webm",""));return o==="timesup"?`timesup_${n.replace(".webm","")}`:o==="break"&&i==="overtime"?`overtime_break_${s}`:`${o}_${s}`},Mt=60*1e3,Ir=[{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""},{duration:360*1e3,type:"break",note:""},{duration:1440*1e3,type:"work",note:""}];class Fn{constructor(e=2e3,n=null){this.WINDOW_SIZE=e,this.overlappingGroup=new Map,this.activeWindows=new Set,this.availableSounds=n||z,this.maxRemainingMinutes=Math.max(...this.availableSounds.remaining)}getThreshold(e){const n=e-this.maxRemainingMinutes*6e4;return Math.max(e/2,n)}getAllPossibleWindows(e,n,o=null){const i=[];this.availableSounds.elapsed.forEach(p=>{i.push({type:"elapsed",minutes:p,targetMs:p*6e4,soundPath:`sounds/elapsed/${String(p).padStart(3,"0")}.webm`,key:`elapsed_${p}`,priority:1})}),this.availableSounds.remaining.forEach(p=>{const y=e-p*6e4;y>=0&&i.push({type:"remaining",minutes:p,targetMs:y,soundPath:`sounds/remaining/${String(p).padStart(3,"0")}.webm`,key:`remaining_${p}`,priority:2})});const s=o||"finish";return i.push({type:"timesup",targetMs:e,soundPath:`sounds/timesup/${s}.webm`,key:"timesup",priority:4}),(n==="break"?this.availableSounds.overtimeBreak:this.availableSounds.overtime).forEach(p=>{i.push({type:"overtime",minutes:p,targetMs:e+p*6e4,soundPath:n==="break"?`sounds/overtime/break/${String(p).padStart(3,"0")}.webm`:`sounds/overtime/${String(p).padStart(3,"0")}.webm`,key:`overtime_${p}`,priority:3})}),i}getActiveWindows(e,n,o,i=null){const s=this.getAllPossibleWindows(n,o,i);this.getThreshold(n);const l=[];for(const p of s)this._isInWindow(p.targetMs,e)&&l.push(p);return l}checkSounds(e,n,o,i,s=null){if(i)return this.clearState(),null;const l=this.getActiveWindows(e,n,o,s),p=new Set(l.map(_=>_.key));l.forEach(_=>{this.activeWindows.has(_.key)||this.overlappingGroup.set(_.key,_)});const y=[];for(const[_,w]of this.overlappingGroup)p.has(_)&&y.push(w);if(this.overlappingGroup.size>0&&y.length===0){const _=this.getThreshold(n),w=Array.from(this.overlappingGroup.values()).filter(a=>!(a.type==="elapsed"&&e>=_||a.type==="remaining"&&e<_)),r=this.selectHighestPriority(w);return this.overlappingGroup.clear(),this.activeWindows=p,r}return this.activeWindows=p,null}selectHighestPriority(e){if(e.length===0)return null;const n=[...e];return n.sort((o,i)=>o.priority!==i.priority?i.priority-o.priority:o.targetMs-i.targetMs),n[0]}_isInWindow(e,n){return Math.abs(n-e)<=this.WINDOW_SIZE}onPeriodChange(){this.clearState()}onDurationChange(){this.clearState()}onElapsedAdjustment(e,n){e<n&&this.clearState()}clearState(){this.overlappingGroup.clear(),this.activeWindows.clear()}}const Ot=({duration:t,type:e,note:n})=>({periodDuration:t,periodDurationElapsed:0,periodDurationRemaining:t,periodHasFinished:!1,periodUserIntendedDuration:t,type:e,note:n}),ot={currentPeriodIndex:null,runningIntervalId:null,timestampPaused:null,timestampStarted:null,types:["work","break","fun"],periods:Ir.map(Ot)},Ln=t=>{const n=Math.floor(t/6e4)*6e4,o=t-n;return{roundedDown:n,remainder:o}},g=rt(wr(ot)),We=new Fn(5e3,z);let ge=null;const Er=()=>(ge||(ge=new Worker("/tymer/timer-worker.js"),ge.onmessage=t=>{Ur()}),ge),V=N(()=>g.value.periods[g.value.periods.length-1]?.periodHasFinished),I=N(()=>g.value.periods[g.value.currentPeriodIndex]),Ze=N(()=>g.value.currentPeriodIndex+1>=g.value.periods.length),$t=N(()=>g.value.periods.reduce((t,e)=>t+e.periodDuration,0)),J=N(()=>g.value.periods.reduce((t,e)=>t+e.periodDurationElapsed,0)),Ct=N(()=>g.value.periods.reduce((t,e)=>t+e.periodDurationRemaining,0)),kt=N(()=>I.value&&I.value.periodDuration!==I.value.periodUserIntendedDuration),Zt=N(()=>{const t=g.value.periods,e=ot.periods;return t.length!==e.length?!0:t.some((n,o)=>{const i=e[o];return n.type!==i.type||n.note!==i.note||n.periodDuration!==i.periodDuration})}),Wn=N(()=>!V.value&&Ct.value>0),Mr=N(()=>!(!Zt.value&&!g.value.timestampStarted&&Ct.value!==0||g.value.currentPeriodIndex===null&&!V.value&&!Zt.value)),Rn=N(()=>!V.value&&g.value.currentPeriodIndex!==null&&!Ze.value),Bn=N(()=>!V.value&&g.value.currentPeriodIndex!==null&&g.value.currentPeriodIndex>0),Or=N(()=>!V.value&&g.value.currentPeriodIndex!==null&&J.value>=60*1e3),Jt=N(()=>g.value.currentPeriodIndex!==null),$r=N(()=>g.value.currentPeriodIndex!==null&&J.value>0),zt=N(()=>!V.value&&g.value.currentPeriodIndex!==null),Gn=N(()=>g.value.currentPeriodIndex!==null),Yn=N(()=>g.value.currentPeriodIndex!==null),Cr=N(()=>g.value.currentPeriodIndex!==null&&g.value.periods.length>1),qn=N(()=>g.value.currentPeriodIndex!==null&&J.value>0&&g.value.currentPeriodIndex>0),Z=t=>!(g.value.currentPeriodIndex===null||t<0&&J.value===0),re=t=>V.value||g.value.currentPeriodIndex===null?!1:t<0?g.value.periods.some(e=>e.periodDurationRemaining>0)?I.value.periodDurationRemaining>=Math.abs(t):!1:!0,Ge=(t,e)=>{const n=Math.floor(t/6e4);return((e==="up"?Math.ceil((n+1)/3)*3:Math.floor((n-1)/3)*3)-n)*60*1e3},Hr=()=>{console.clear(),D("initializeTimer",g.value,2),!(V.value||g.value.timestampPaused)&&(g.value.runningIntervalId?(se(),Ht()):Nr())},Nr=()=>{it(),H({timerProperties:{currentPeriodIndex:null,runningIntervalId:null,timestampPaused:null,timestampStarted:null}}),console.clear(),D("timer initialized (periods preserved)",g.value,7)},Ht=()=>{Er().postMessage("start"),H({timerProperties:{runningIntervalId:"worker-active"}})},it=()=>{ge&&ge.postMessage("stop"),H({timerProperties:{runningIntervalId:null}})},Un=()=>{V.value||(ee("button"),H({timerProperties:{currentPeriodIndex:0,timestampStarted:Date.now()}}),se(),Ht(),D("started timer",g.value,3))},Oe=()=>{if(V.value)return;ee("button");const t=Date.now()-g.value.timestampPaused;H({timerProperties:{timestampPaused:null,timestampStarted:g.value.timestampStarted+t}}),se(),Ht(),D("resumed timer",g.value,13)},Nt=()=>{V.value||(ee("button"),H({timerProperties:{timestampPaused:Date.now()}}),it(),se(),D("timer paused",g.value,8))},Fr=()=>{it(),g.value={...ot},console.clear(),D("timer reset",g.value,7)},K=(t,e=!1)=>{if(V.value||g.value.currentPeriodIndex===null)return;const n=Math.max(I.value.periodDurationElapsed,I.value.periodDuration+t),o={periodDuration:n};e||(o.periodUserIntendedDuration=n),H({currentPeriodProperties:o}),se(),We.onDurationChange(),D("duration adjusted",g.value,9)},U=t=>{if(g.value.currentPeriodIndex===null)return;se(),H({timerProperties:{timestampStarted:g.value.timestampStarted+Math.min(I.value.periodDurationElapsed,-t)}}),se();const e=I.value.periodDurationElapsed,n=e-t;We.onElapsedAdjustment(e,n),D("time adjusted",g.value,6)},Lr=(t,e,n)=>{const o=e||Date.now(),i=Math.max(0,o-t),s=Math.max(0,n-i);return{periodDurationElapsed:i,periodDurationRemaining:s}},Wr=(t,e)=>t>0&&t>=e,Rr=()=>{K(Mt,!0),D("period automatically extended",g.value,2)},se=()=>{if(!I.value)return;const{periodDurationElapsed:t,periodDurationRemaining:e}=Lr(g.value.timestampStarted,g.value.timestampPaused,I.value.periodDuration);Wr(t,I.value.periodDuration)&&Rr(),H({currentPeriodProperties:{periodDurationElapsed:t,periodDurationRemaining:e}})},Re=()=>{if(g.value.currentPeriodIndex===null)return;const t=g.value.currentPeriodIndex+1,e=g.value.periods[t],{roundedDown:n,remainder:o}=Ln(I.value.periodDurationElapsed);H({currentPeriodProperties:{periodDuration:n,periodDurationElapsed:n,periodDurationRemaining:0,periodHasFinished:!0,periodUserIntendedDuration:n},timerProperties:{timestampStarted:(g.value.timestampPaused||Date.now())-e.periodDurationElapsed-o,currentPeriodIndex:g.value.currentPeriodIndex+1}}),We.onPeriodChange(),D("finished current period",g.value,10)},at=()=>{if(g.value.currentPeriodIndex===null||g.value.currentPeriodIndex===0)return;const t=g.value.currentPeriodIndex-1,e=g.value.periods[t],n=e.periodDuration+Mt,o=g.value.timestampStarted-e.periodDurationElapsed+I.value.periodDurationElapsed;H({previousPeriodProperties:{periodDuration:n,periodHasFinished:!1},currentPeriodProperties:{periodHasFinished:!1},timerProperties:{timestampStarted:o,currentPeriodIndex:t}}),se(),D("jumped to previous period and added some time to the duration",g.value,13)},Vn=()=>{D("move time back",g.value,2);const t=I.value.periodDurationElapsed,e=g.value.currentPeriodIndex-1,o=g.value.periods[e].periodDuration+t;H({previousPeriodProperties:{periodDuration:o,periodDurationElapsed:o},timerProperties:{}}),U(-t),We.onPeriodChange()},jn=()=>{const t=g.value.types,e=I.value.type,o=(t.indexOf(e)+1)%t.length;H({currentPeriodProperties:{type:t[o]}}),D("changed current type",g.value,8)},Kn=()=>{if(g.value.currentPeriodIndex===null)return;const t=Ot({duration:1440*1e3,type:"fun"}),e=g.value.currentPeriodIndex;if(I.value.periodDurationElapsed>60*1e3){const o=[...g.value.periods];o.splice(e+1,0,t),H({timerProperties:{periods:o}}),Re(),D("added new period after current and moved to it",g.value,5)}else{const o=[...g.value.periods];o.splice(e,0,t);const i=I.value.periodDuration;H({timerProperties:{periods:o,currentPeriodIndex:e,timestampStarted:g.value.timestampPaused||Date.now()}}),H({timerProperties:{periods:g.value.periods.map((s,l)=>l!==e+1?s:{...s,periodDuration:i,periodDurationElapsed:0,periodDurationRemaining:i,periodHasFinished:!1})}}),D("added new period before current, reset current period elapsed time",g.value,5)}},Br=()=>{if(g.value.currentPeriodIndex===null||g.value.periods.length<=1)return;const t=g.value.currentPeriodIndex,e=t===g.value.periods.length-1,n=t;e?at():Re();const o=g.value.periods.filter((s,l)=>l!==n),i=e?g.value.currentPeriodIndex:g.value.currentPeriodIndex-1;H({timerProperties:{periods:o,currentPeriodIndex:i}}),D("removed period",g.value,5)},Gr=()=>{it();const{roundedDown:t}=Ln(I.value.periodDurationElapsed);H({currentPeriodProperties:{periodDuration:t,periodDurationElapsed:t,periodDurationRemaining:0,periodHasFinished:!0}}),H({timerProperties:{timestampStarted:null,currentPeriodIndex:null,periods:g.value.periods.filter(e=>e.periodDurationElapsed>=Mt)}}),D("finished last period",g.value,1),ee("timerFinished")},Ye=(t,e)=>{const n=g.value.periods.map((o,i)=>i===t?{...o,...e}:o);H({timerProperties:{periods:n}}),D("updated period",{periodIndex:t,updates:e},5)},Yr=t=>{if(g.value.periods.length<=1||t<0||t>=g.value.periods.length)return;g.value.currentPeriodIndex===t&&(t===g.value.periods.length-1?at():Re());const e=g.value.periods.filter((o,i)=>i!==t);let n=g.value.currentPeriodIndex;n!==null&&n>t?n=n-1:n===t&&(n=t===g.value.periods.length-1?g.value.currentPeriodIndex:g.value.currentPeriodIndex-1),H({timerProperties:{periods:e,currentPeriodIndex:n}}),D("removed period by index",{periodIndex:t,newLength:e.length},5)},$e=rt(null),qr=(t,e={duration:1440*1e3,type:"fun",note:""})=>{const n=Ot(e),o=[...g.value.periods],i=t+1;o.splice(i,0,n);let s=g.value.currentPeriodIndex;s!==null&&s>t&&(s=s+1),H({timerProperties:{periods:o,currentPeriodIndex:s}}),$e.value=i,D("added period at index",{afterIndex:t,newLength:o.length},5)},H=t=>{const{previousPeriodProperties:e={},currentPeriodProperties:n={},timerProperties:o={}}=t;Tn(()=>{if(g.value.currentPeriodIndex===0&&Object.keys(e).length>0){console.error("Tried to update the previous period but there is none. Aborting. State not changed.");return}Object.keys(e).length>0&&(g.value={...g.value,periods:g.value.periods.map((i,s)=>s!==g.value.currentPeriodIndex-1?i:{...i,...e})}),Object.keys(n).length>0&&(g.value={...g.value,periods:g.value.periods.map((i,s)=>s!==g.value.currentPeriodIndex?i:{...i,...n})}),Object.keys(o).length>0&&(g.value={...g.value,...o})})},Ur=()=>{if(se(),I.value){const t=I.value.periodDurationElapsed,e=I.value.periodUserIntendedDuration,n=I.value.type,o=g.value.timestampPaused!==null,s=g.value.currentPeriodIndex+1,l=g.value.periods[s],p=l?l.type:"finish",y=We.checkSounds(t,e,n,o,p);if(y){const _=Dr(y.soundPath);xr(_)}}V.value&&Ar()};Se(()=>{gr(g.value)});typeof window<"u"&&(window.__timerModule={timerState:g,currentPeriod:I});const Y=(t,{mode:e,debug:n,compact:o}={})=>{if(t==null)return":";if(n){const y=Math.floor(t/1e3),_=Math.floor(y/3600),w=Math.floor(y%3600/60),r=y%60,a=(u,f=2,d="0")=>u.toString().padStart(f,d);return`${a(_)}:${a(w)}:${a(r)} ${a(t,6," ")} ms`}let i;e==="elapsed"?i=Math.floor(t/(60*1e3)):e==="remaining"?i=Math.ceil(t/(60*1e3)):i=Math.round(t/(60*1e3));const s=Math.floor(i/60),l=i%60,p=(y,_=2,w="0")=>y.toString().padStart(_,w);return o&&s===0?`${l}`:`${s}:${p(l)}`},j=t=>Math.floor(t/6e4),Vr=({period:t})=>v(X,{children:v("div",{class:"timeline__current-time",style:`--elapsed-minutes: ${j(t.periodDurationElapsed)};`,children:[v("span",{class:"timeline__elapsed timeline__elapsed--period",children:[Y(I.value.periodDurationElapsed,{mode:"elapsed"}),v("span",{class:"timeline__symbol",children:"  "}),Y(I.value.periodDurationRemaining,{mode:"remaining"})]}),v("span",{class:"timeline__elapsed timeline__elapsed--timer",children:Y(g.value.periods.reduce((e,n)=>e+n.periodDurationElapsed,0),{mode:"elapsed"})})]})}),C=({onClick:t,onChange:e,onBlur:n,children:o,as:i="button",playOnClick:s=!1,playOnChange:l=!1,playOnBlur:p=!1,...y})=>v(i,{...y,onClick:async u=>{s&&await ee("button"),t&&t(u)},onChange:async u=>{l&&await ee("button"),e&&e(u)},onBlur:async u=>{p&&await ee("button"),n&&n(u)},children:o}),jr=({period:t,isActive:e,endTime:n,startTime:o,index:i})=>{const[s,l]=Ue(!1),[p,y]=Ue(!1),[_,w]=Ue(null),r=dr(),a=["work","break","fun"],u=async()=>{await ee("button");const P=g.value.runningIntervalId!==null;y(P),P&&Nt(),w({type:t.type,note:t.note,periodDuration:t.periodDuration,periodUserIntendedDuration:t.periodUserIntendedDuration,periodDurationRemaining:t.periodDurationRemaining}),l(!0)},f=Kt(()=>{l(!1),w(null),p&&Oe()},[p]),d=Kt(()=>{_&&Ye(i,_),l(!1),w(null),p&&Oe()},[_,i,p]),h=P=>{Ye(i,{type:P})},c=P=>{const x=P*60*1e3,A={periodDuration:x,periodUserIntendedDuration:x};e?A.periodDurationRemaining=Math.max(0,x-t.periodDurationElapsed):t.periodHasFinished||t.periodDurationRemaining===0?(A.periodDurationElapsed=x,A.periodDurationRemaining=0):A.periodDurationRemaining=x,Ye(i,A)},m=P=>{Ye(i,{note:P})},b=()=>{e&&g.value.periods.length===1||(Yr(i),l(!1),p&&Oe())},k=P=>{P.stopPropagation(),qr(i)};return we(()=>{$e.value===i&&($e.value=null,u())},[$e.value,i]),we(()=>{if(!s)return;const P=async A=>{r.current&&!r.current.contains(A.target)&&(await ee("button"),f())},x=async A=>{A.key==="Escape"?(await ee("button"),d()):A.key==="Enter"&&(await ee("button"),f())};return document.addEventListener("mousedown",P),document.addEventListener("keydown",x),()=>{document.removeEventListener("mousedown",P),document.removeEventListener("keydown",x)}},[s,f,d]),s?v("div",{ref:r,class:`
                    timeline__period
                    timeline__period--${t.type}
                    timeline__period--editing
                `,style:`--period-minutes: ${Math.round(t.periodDuration/(60*1e3))};`,children:v("div",{class:"timeline__text timeline__edit-form",children:[v("div",{className:"timeline__edit-row",children:[v("section",{className:"controls mb-0",children:v("div",{className:"button-group button-group--tight button-group--connected",children:(()=>{const P=Math.round(t.periodDuration/6e4),x=Math.floor(P/60),A=P%60,M=Math.round(t.periodDurationElapsed/(60*1e3));return[0,1,2,3,4].map(S=>v("button",{className:`button-group-item ${x===S?"button-group-item--active":""}`,onClick:()=>c(S*60+A),disabled:e&&S*60+A<M,children:S},S))})()})}),v("input",{type:"number",value:Math.round(t.periodDuration/(60*1e3)),onChange:P=>c(parseInt(P.target.value)||Math.max(1,Math.round(t.periodDurationElapsed/(60*1e3)))),className:"timeline__edit-duration",min:e?Math.round(t.periodDurationElapsed/(60*1e3)):1,max:"900"}),v("section",{className:"controls mb-0",children:v("div",{className:"button-group button-group--tight button-group--connected",children:(()=>{const P=Math.round(t.periodDuration/6e4),x=Math.floor(P/60),A=P%60,M=Math.round(t.periodDurationElapsed/(60*1e3));return[0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57].map(S=>{const L=[0,3,6,9,12,15,18,21,24,27,30,33,36,39,42,45,48,51,54,57],$=L.findIndex(G=>G===A),B=A===S;let ce=!1;if(!B&&$===-1){const G=L.findLastIndex(ut=>ut<A),he=L.findIndex(ut=>ut>A);ce=G!==-1&&S===L[G]||he!==-1&&S===L[he]}return v("button",{className:`button-group-item ${S%12===0?"fw-900":S%6===0?"button--sm":"button--xs"} ${B?"button-group-item--active":ce?"button-group-item--semiactive":""}`,onClick:()=>c(x*60+S),disabled:B&&x*60+S<M,children:S},S)})})()})})]}),v("div",{class:"timeline__edit-row",children:[v("div",{class:"button-group button-group--connected",children:a.map(P=>v(C,{type:"button",class:`button-group-item ${t.type===P?"button-group-item--active":""}`,onClick:()=>h(P),children:P},P))}),v("input",{type:"text",value:t.note||"",onChange:P=>m(P.target.value),placeholder:"Note",class:"timeline__edit-note"}),v(C,{onClick:b,class:"timeline__edit-delete",title:"Delete period",disabled:e&&g.value.periods.length===1,children:""})]})]})}):v(C,{as:"div",class:`
                    timeline__period
                    timeline__period--${t.type}
                    ${e?"timeline__period--active":""}
                    timeline__period--editable
                `,style:`--period-minutes: ${j(t.periodDuration)};--userintended-minutes: ${j(t.periodUserIntendedDuration)};`,onClick:u,children:[v("div",{className:"timeline__text",children:[v("div",{className:"timeline__period-duration",children:Y(t.periodDuration,{compact:!0})}),t.note&&v("div",{className:"timeline__note",children:t.note}),i===0&&o&&v("div",{className:"timeline__start-time",dangerouslySetInnerHTML:{__html:o}}),v("div",{className:"timeline__end-time",dangerouslySetInnerHTML:{__html:n}})]}),v("div",{class:"timeline__elapsed-time",style:`--elapsed-minutes: ${j(t.periodDurationElapsed)};`,children:e&&v(Vr,{period:t})}),e&&v("div",{class:"timeline__subinterval"}),e&&t.periodDurationElapsed>t.periodUserIntendedDuration&&v("div",{class:"timeline__userintended"}),v(C,{class:"button timeline__add-period",onClick:k,title:"Add period after this one",children:""})]})},Xn=6048e5,Kr=864e5,en=Symbol.for("constructDateFrom");function de(t,e){return typeof t=="function"?t(e):t&&typeof t=="object"&&en in t?t[en](e):t instanceof Date?new t.constructor(e):new Date(e)}function te(t,e){return de(e||t,t)}let Xr={};function st(){return Xr}function Le(t,e){const n=st(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??n.weekStartsOn??n.locale?.options?.weekStartsOn??0,i=te(t,e?.in),s=i.getDay(),l=(s<o?7:0)+s-o;return i.setDate(i.getDate()-l),i.setHours(0,0,0,0),i}function Je(t,e){return Le(t,{...e,weekStartsOn:1})}function Qn(t,e){const n=te(t,e?.in),o=n.getFullYear(),i=de(n,0);i.setFullYear(o+1,0,4),i.setHours(0,0,0,0);const s=Je(i),l=de(n,0);l.setFullYear(o,0,4),l.setHours(0,0,0,0);const p=Je(l);return n.getTime()>=s.getTime()?o+1:n.getTime()>=p.getTime()?o:o-1}function tn(t){const e=te(t),n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),+t-+n}function Qr(t,...e){const n=de.bind(null,e.find(o=>typeof o=="object"));return e.map(n)}function nn(t,e){const n=te(t,e?.in);return n.setHours(0,0,0,0),n}function Zr(t,e,n){const[o,i]=Qr(n?.in,t,e),s=nn(o),l=nn(i),p=+s-tn(s),y=+l-tn(l);return Math.round((p-y)/Kr)}function Jr(t,e){const n=Qn(t,e),o=de(t,0);return o.setFullYear(n,0,4),o.setHours(0,0,0,0),Je(o)}function zr(t){return t instanceof Date||typeof t=="object"&&Object.prototype.toString.call(t)==="[object Date]"}function eo(t){return!(!zr(t)&&typeof t!="number"||isNaN(+te(t)))}function to(t,e){const n=te(t,e?.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}const no={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},ro=(t,e,n)=>{let o;const i=no[t];return typeof i=="string"?o=i:e===1?o=i.one:o=i.other.replace("{{count}}",e.toString()),n?.addSuffix?n.comparison&&n.comparison>0?"in "+o:o+" ago":o};function ft(t){return(e={})=>{const n=e.width?String(e.width):t.defaultWidth;return t.formats[n]||t.formats[t.defaultWidth]}}const oo={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},io={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},ao={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},so={date:ft({formats:oo,defaultWidth:"full"}),time:ft({formats:io,defaultWidth:"full"}),dateTime:ft({formats:ao,defaultWidth:"full"})},uo={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},lo=(t,e,n,o)=>uo[t];function xe(t){return(e,n)=>{const o=n?.context?String(n.context):"standalone";let i;if(o==="formatting"&&t.formattingValues){const l=t.defaultFormattingWidth||t.defaultWidth,p=n?.width?String(n.width):l;i=t.formattingValues[p]||t.formattingValues[l]}else{const l=t.defaultWidth,p=n?.width?String(n.width):t.defaultWidth;i=t.values[p]||t.values[l]}const s=t.argumentCallback?t.argumentCallback(e):e;return i[s]}}const co={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},fo={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},_o={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},po={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},ho={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},mo={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},vo=(t,e)=>{const n=Number(t),o=n%100;if(o>20||o<10)switch(o%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},yo={ordinalNumber:vo,era:xe({values:co,defaultWidth:"wide"}),quarter:xe({values:fo,defaultWidth:"wide",argumentCallback:t=>t-1}),month:xe({values:_o,defaultWidth:"wide"}),day:xe({values:po,defaultWidth:"wide"}),dayPeriod:xe({values:ho,defaultWidth:"wide",formattingValues:mo,defaultFormattingWidth:"wide"})};function De(t){return(e,n={})=>{const o=n.width,i=o&&t.matchPatterns[o]||t.matchPatterns[t.defaultMatchWidth],s=e.match(i);if(!s)return null;const l=s[0],p=o&&t.parsePatterns[o]||t.parsePatterns[t.defaultParseWidth],y=Array.isArray(p)?wo(p,r=>r.test(l)):go(p,r=>r.test(l));let _;_=t.valueCallback?t.valueCallback(y):y,_=n.valueCallback?n.valueCallback(_):_;const w=e.slice(l.length);return{value:_,rest:w}}}function go(t,e){for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&e(t[n]))return n}function wo(t,e){for(let n=0;n<t.length;n++)if(e(t[n]))return n}function bo(t){return(e,n={})=>{const o=e.match(t.matchPattern);if(!o)return null;const i=o[0],s=e.match(t.parsePattern);if(!s)return null;let l=t.valueCallback?t.valueCallback(s[0]):s[0];l=n.valueCallback?n.valueCallback(l):l;const p=e.slice(i.length);return{value:l,rest:p}}}const ko=/^(\d+)(th|st|nd|rd)?/i,Po=/\d+/i,So={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},To={any:[/^b/i,/^(a|c)/i]},Ao={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},xo={any:[/1/i,/2/i,/3/i,/4/i]},Do={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Io={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Eo={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Mo={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Oo={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},$o={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Co={ordinalNumber:bo({matchPattern:ko,parsePattern:Po,valueCallback:t=>parseInt(t,10)}),era:De({matchPatterns:So,defaultMatchWidth:"wide",parsePatterns:To,defaultParseWidth:"any"}),quarter:De({matchPatterns:Ao,defaultMatchWidth:"wide",parsePatterns:xo,defaultParseWidth:"any",valueCallback:t=>t+1}),month:De({matchPatterns:Do,defaultMatchWidth:"wide",parsePatterns:Io,defaultParseWidth:"any"}),day:De({matchPatterns:Eo,defaultMatchWidth:"wide",parsePatterns:Mo,defaultParseWidth:"any"}),dayPeriod:De({matchPatterns:Oo,defaultMatchWidth:"any",parsePatterns:$o,defaultParseWidth:"any"})},Ho={code:"en-US",formatDistance:ro,formatLong:so,formatRelative:lo,localize:yo,match:Co,options:{weekStartsOn:0,firstWeekContainsDate:1}};function No(t,e){const n=te(t,e?.in);return Zr(n,to(n))+1}function Fo(t,e){const n=te(t,e?.in),o=+Je(n)-+Jr(n);return Math.round(o/Xn)+1}function Zn(t,e){const n=te(t,e?.in),o=n.getFullYear(),i=st(),s=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??i.firstWeekContainsDate??i.locale?.options?.firstWeekContainsDate??1,l=de(e?.in||t,0);l.setFullYear(o+1,0,s),l.setHours(0,0,0,0);const p=Le(l,e),y=de(e?.in||t,0);y.setFullYear(o,0,s),y.setHours(0,0,0,0);const _=Le(y,e);return+n>=+p?o+1:+n>=+_?o:o-1}function Lo(t,e){const n=st(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??n.firstWeekContainsDate??n.locale?.options?.firstWeekContainsDate??1,i=Zn(t,e),s=de(e?.in||t,0);return s.setFullYear(i,0,o),s.setHours(0,0,0,0),Le(s,e)}function Wo(t,e){const n=te(t,e?.in),o=+Le(n,e)-+Lo(n,e);return Math.round(o/Xn)+1}function O(t,e){const n=t<0?"-":"",o=Math.abs(t).toString().padStart(e,"0");return n+o}const ue={y(t,e){const n=t.getFullYear(),o=n>0?n:1-n;return O(e==="yy"?o%100:o,e.length)},M(t,e){const n=t.getMonth();return e==="M"?String(n+1):O(n+1,2)},d(t,e){return O(t.getDate(),e.length)},a(t,e){const n=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h(t,e){return O(t.getHours()%12||12,e.length)},H(t,e){return O(t.getHours(),e.length)},m(t,e){return O(t.getMinutes(),e.length)},s(t,e){return O(t.getSeconds(),e.length)},S(t,e){const n=e.length,o=t.getMilliseconds(),i=Math.trunc(o*Math.pow(10,n-3));return O(i,e.length)}},ve={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},rn={G:function(t,e,n){const o=t.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return n.era(o,{width:"abbreviated"});case"GGGGG":return n.era(o,{width:"narrow"});case"GGGG":default:return n.era(o,{width:"wide"})}},y:function(t,e,n){if(e==="yo"){const o=t.getFullYear(),i=o>0?o:1-o;return n.ordinalNumber(i,{unit:"year"})}return ue.y(t,e)},Y:function(t,e,n,o){const i=Zn(t,o),s=i>0?i:1-i;if(e==="YY"){const l=s%100;return O(l,2)}return e==="Yo"?n.ordinalNumber(s,{unit:"year"}):O(s,e.length)},R:function(t,e){const n=Qn(t);return O(n,e.length)},u:function(t,e){const n=t.getFullYear();return O(n,e.length)},Q:function(t,e,n){const o=Math.ceil((t.getMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return O(o,2);case"Qo":return n.ordinalNumber(o,{unit:"quarter"});case"QQQ":return n.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(o,{width:"wide",context:"formatting"})}},q:function(t,e,n){const o=Math.ceil((t.getMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return O(o,2);case"qo":return n.ordinalNumber(o,{unit:"quarter"});case"qqq":return n.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(o,{width:"wide",context:"standalone"})}},M:function(t,e,n){const o=t.getMonth();switch(e){case"M":case"MM":return ue.M(t,e);case"Mo":return n.ordinalNumber(o+1,{unit:"month"});case"MMM":return n.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(o,{width:"wide",context:"formatting"})}},L:function(t,e,n){const o=t.getMonth();switch(e){case"L":return String(o+1);case"LL":return O(o+1,2);case"Lo":return n.ordinalNumber(o+1,{unit:"month"});case"LLL":return n.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(o,{width:"wide",context:"standalone"})}},w:function(t,e,n,o){const i=Wo(t,o);return e==="wo"?n.ordinalNumber(i,{unit:"week"}):O(i,e.length)},I:function(t,e,n){const o=Fo(t);return e==="Io"?n.ordinalNumber(o,{unit:"week"}):O(o,e.length)},d:function(t,e,n){return e==="do"?n.ordinalNumber(t.getDate(),{unit:"date"}):ue.d(t,e)},D:function(t,e,n){const o=No(t);return e==="Do"?n.ordinalNumber(o,{unit:"dayOfYear"}):O(o,e.length)},E:function(t,e,n){const o=t.getDay();switch(e){case"E":case"EE":case"EEE":return n.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(o,{width:"short",context:"formatting"});case"EEEE":default:return n.day(o,{width:"wide",context:"formatting"})}},e:function(t,e,n,o){const i=t.getDay(),s=(i-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(s);case"ee":return O(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});case"eeee":default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(t,e,n,o){const i=t.getDay(),s=(i-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(s);case"cc":return O(s,e.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});case"cccc":default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(t,e,n){const o=t.getDay(),i=o===0?7:o;switch(e){case"i":return String(i);case"ii":return O(i,e.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(o,{width:"short",context:"formatting"});case"iiii":default:return n.day(o,{width:"wide",context:"formatting"})}},a:function(t,e,n){const i=t.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},b:function(t,e,n){const o=t.getHours();let i;switch(o===12?i=ve.noon:o===0?i=ve.midnight:i=o/12>=1?"pm":"am",e){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(t,e,n){const o=t.getHours();let i;switch(o>=17?i=ve.evening:o>=12?i=ve.afternoon:o>=4?i=ve.morning:i=ve.night,e){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(t,e,n){if(e==="ho"){let o=t.getHours()%12;return o===0&&(o=12),n.ordinalNumber(o,{unit:"hour"})}return ue.h(t,e)},H:function(t,e,n){return e==="Ho"?n.ordinalNumber(t.getHours(),{unit:"hour"}):ue.H(t,e)},K:function(t,e,n){const o=t.getHours()%12;return e==="Ko"?n.ordinalNumber(o,{unit:"hour"}):O(o,e.length)},k:function(t,e,n){let o=t.getHours();return o===0&&(o=24),e==="ko"?n.ordinalNumber(o,{unit:"hour"}):O(o,e.length)},m:function(t,e,n){return e==="mo"?n.ordinalNumber(t.getMinutes(),{unit:"minute"}):ue.m(t,e)},s:function(t,e,n){return e==="so"?n.ordinalNumber(t.getSeconds(),{unit:"second"}):ue.s(t,e)},S:function(t,e){return ue.S(t,e)},X:function(t,e,n){const o=t.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return an(o);case"XXXX":case"XX":return fe(o);case"XXXXX":case"XXX":default:return fe(o,":")}},x:function(t,e,n){const o=t.getTimezoneOffset();switch(e){case"x":return an(o);case"xxxx":case"xx":return fe(o);case"xxxxx":case"xxx":default:return fe(o,":")}},O:function(t,e,n){const o=t.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+on(o,":");case"OOOO":default:return"GMT"+fe(o,":")}},z:function(t,e,n){const o=t.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+on(o,":");case"zzzz":default:return"GMT"+fe(o,":")}},t:function(t,e,n){const o=Math.trunc(+t/1e3);return O(o,e.length)},T:function(t,e,n){return O(+t,e.length)}};function on(t,e=""){const n=t>0?"-":"+",o=Math.abs(t),i=Math.trunc(o/60),s=o%60;return s===0?n+String(i):n+String(i)+e+O(s,2)}function an(t,e){return t%60===0?(t>0?"-":"+")+O(Math.abs(t)/60,2):fe(t,e)}function fe(t,e=""){const n=t>0?"-":"+",o=Math.abs(t),i=O(Math.trunc(o/60),2),s=O(o%60,2);return n+i+e+s}const sn=(t,e)=>{switch(t){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},Jn=(t,e)=>{switch(t){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},Ro=(t,e)=>{const n=t.match(/(P+)(p+)?/)||[],o=n[1],i=n[2];if(!i)return sn(t,e);let s;switch(o){case"P":s=e.dateTime({width:"short"});break;case"PP":s=e.dateTime({width:"medium"});break;case"PPP":s=e.dateTime({width:"long"});break;case"PPPP":default:s=e.dateTime({width:"full"});break}return s.replace("{{date}}",sn(o,e)).replace("{{time}}",Jn(i,e))},Bo={p:Jn,P:Ro},Go=/^D+$/,Yo=/^Y+$/,qo=["D","DD","YY","YYYY"];function Uo(t){return Go.test(t)}function Vo(t){return Yo.test(t)}function jo(t,e,n){const o=Ko(t,e,n);if(console.warn(o),qo.includes(t))throw new RangeError(o)}function Ko(t,e,n){const o=t[0]==="Y"?"years":"days of the month";return`Use \`${t.toLowerCase()}\` instead of \`${t}\` (in \`${e}\`) for formatting ${o} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const Xo=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Qo=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Zo=/^'([^]*?)'?$/,Jo=/''/g,zo=/[a-zA-Z]/;function Ie(t,e,n){const o=st(),i=o.locale??Ho,s=o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,l=o.weekStartsOn??o.locale?.options?.weekStartsOn??0,p=te(t,n?.in);if(!eo(p))throw new RangeError("Invalid time value");let y=e.match(Qo).map(w=>{const r=w[0];if(r==="p"||r==="P"){const a=Bo[r];return a(w,i.formatLong)}return w}).join("").match(Xo).map(w=>{if(w==="''")return{isToken:!1,value:"'"};const r=w[0];if(r==="'")return{isToken:!1,value:ei(w)};if(rn[r])return{isToken:!0,value:w};if(r.match(zo))throw new RangeError("Format string contains an unescaped latin alphabet character `"+r+"`");return{isToken:!1,value:w}});i.localize.preprocessor&&(y=i.localize.preprocessor(p,y));const _={firstWeekContainsDate:s,weekStartsOn:l,locale:i};return y.map(w=>{if(!w.isToken)return w.value;const r=w.value;(Vo(r)||Uo(r))&&jo(r,e,String(t));const a=rn[r[0]];return a(p,r,i.localize,_)}).join("")}function ei(t){const e=t.match(Zo);return e?e[1].replace(Jo,"'"):t}const ti=({periods:t,currentPeriodIndex:e})=>{if(!Array.isArray(t)||!t.length)return[];const n=Date.now(),o=t.reduce((l,p)=>l+(p.periodDurationElapsed||0),0);let i=0,s=null;return t.map((l,p)=>{if(e==null)return s=(s??n)+l.periodDuration,Ie(new Date(s),"HH'<br>'mm");if(p<e){i+=l.periodDuration;const _=n-o+(i-l.periodDuration)+l.periodDuration;return s=_,Ie(new Date(_),"HH'<br>'mm")}if(p===e){const y=l.periodDuration-(l.periodDurationElapsed||0),_=n+y;return s=_,Ie(new Date(_),"HH'<br>'mm")}return s=(s??n)+l.periodDuration,Ie(new Date(s),"HH'<br>'mm")})},ni=({periods:t})=>{if(!Array.isArray(t)||!t.length)return"";const e=Date.now(),n=t.reduce((o,i)=>o+(i.periodDurationElapsed||0),0);return Ie(new Date(e-n),"HH'<br>'mm")},ri=({periods:t,currentPeriodIndex:e})=>{if(!Array.isArray(t)||!t.length)return[];const n=ti({periods:t,currentPeriodIndex:e}),o=ni({periods:t}),i=(s,l)=>({key:l,period:s,isActive:l===e,endTime:n[l],startTime:l===0?o:void 0,index:l});return t.map(i)},oi=()=>{const t=tt(()=>ri({periods:g.value.periods,currentPeriodIndex:g.value.currentPeriodIndex}),[g.value.periods,g.value.currentPeriodIndex,g.value.elapsed]);return t.length?v("div",{class:"timeline",style:`--total-minutes: ${j($t.value)}`,children:t.map(e=>v(jr,{...e}))}):null},ii=()=>{const t=async()=>{await ke(),g.value.runningIntervalId?Nt():g.value.timestampPaused?Oe():Un()};return v(X,{children:v("section",{class:"controls",children:[v(C,{onClick:Fr,disabled:!Mr.value,class:V.value?"highlighted":"",children:" Reset"}),v(C,{onClick:t,disabled:!Wn.value,children:g.value.runningIntervalId?"":g.value.timestampPaused?"":" Start"}),v("div",{className:"button-group",children:[v(C,{onClick:at,disabled:!Bn.value,children:""}),v(C,{onClick:Re,disabled:!Rn.value,class:!Ze.value&&kt.value?"highlighted":"",children:""})]}),v(C,{onClick:Gr,disabled:!Or.value,class:Ze.value&&kt.value?"highlighted":"",children:" Finish"})]})})},ai=()=>v(X,{children:[v("section",{className:"controls",children:[v("div",{class:"button-group",children:v(C,{onClick:Vn,disabled:!qn.value,children:"move time to previous"})}),v("div",{class:"button-group",children:[v(C,{onClick:()=>U(-J.value),disabled:!$r.value,children:""}),v(C,{onClick:()=>U(-360*1e3),disabled:!Z(-360*1e3),children:"<--- 6 m"}),v(C,{onClick:()=>U(-60*1e3),disabled:!Z(-60*1e3),children:"<-- 1 m"}),v(C,{onClick:()=>U(60*1e3),disabled:!Jt.value,children:"1 m -->"}),v(C,{onClick:()=>U(360*1e3),disabled:!Jt.value,children:"6 m --->"})]})]}),v("section",{className:"controls mb-0",children:v("div",{class:"button-group",children:[v(C,{onClick:()=>K(-360*1e3),disabled:!re(-360*1e3),children:" 6 min"}),v(C,{onClick:()=>K(-60*1e3),disabled:!re(-60*1e3),children:" 1 min"}),v(C,{onClick:()=>K(60*1e3),disabled:!zt.value,children:" 1 min"}),v(C,{onClick:()=>K(360*1e3),disabled:!zt.value,children:" 6 min"})]})}),v("section",{className:"controls",children:[v(C,{onClick:jn,disabled:!Gn.value,children:"change type"}),v("div",{class:"button-group",children:[v(C,{onClick:Kn,disabled:!Yn.value,children:"add period"}),v(C,{onClick:Br,disabled:!Cr.value,children:"remove period"})]})]})]}),si=({periodSums:t})=>{const e=(n,o)=>{const i=t[n][o],s=o==="current",l=s&&i.duration!==i.durationElapsed;return v("div",{class:`stats-bar stats-bar--${n} stats-bar--${o}`,children:[v("div",{class:"stats-text",children:s?Y(i.duration):`${n} ${Y(i.duration)}`}),l&&v("div",{class:`
                            stats-elapsed
                            ${i.durationElapsed<6e4?"stats-elapsed--none":""}
                        `,children:v("div",{class:"stats-text stats-elapsed-text",children:Y(i.durationElapsed,{mode:"elapsed"})})})]})};return v("div",{class:"stats-bars",children:[e("break","original"),e("break","current"),e("fun","original"),e("fun","current"),e("work","original"),e("work","current")]})},ui=()=>{const t=({periods:o,type:i})=>{const s=l=>o.reduce((p,y)=>y.type===i?p+y[l]:p,0);return{duration:s("periodDuration"),durationElapsed:s("periodDurationElapsed"),durationRemaining:s("periodDurationRemaining")}},n=(({initialPeriods:o,currentPeriods:i})=>{const s=p=>y=>t({periods:p,type:y});return g.value.types.reduce((p,y)=>({...p,[y]:{original:s(o)(y),current:s(i)(y)}}),{})})({initialPeriods:ot.periods,currentPeriods:g.value.periods});return v("div",{class:"stats",style:`
                --break-original: ${j(n.break.original.duration)};
                --break-planned: ${j(n.break.current.duration)};
                --break-elapsed: ${j(n.break.current.durationElapsed)};
            
                --fun-original: ${j(n.fun.original.duration)};
                --fun-planned: ${j(n.fun.current.duration)};
                --fun-elapsed: ${j(n.fun.current.durationElapsed)};
            
                --work-original: ${j(n.work.original.duration)};
                --work-planned: ${j(n.work.current.duration)};
                --work-elapsed: ${j(n.work.current.durationElapsed)};
            `,children:[v("h2",{children:["Stats",v("br",{}),v("small",{children:[Y($t.value)," total"]})]}),v(si,{periodSums:n})]})},li=()=>v("div",{class:"tempPeriods",children:[v("div",{class:"tempPeriod",children:[v("div",{class:"tempPeriod__data",children:"Type"}),v("div",{class:"tempPeriod__data",children:"Duration"}),v("div",{class:"tempPeriod__data",children:"User Intended"}),v("div",{class:"tempPeriod__data",children:"Remaining"}),v("div",{class:"tempPeriod__data",children:"Elapsed"}),v("div",{class:"tempPeriod__data",children:"Finished"})]}),g.value.periods.map((t,e)=>v("div",{class:`
                    tempPeriod 
                    ${e===g.value.currentPeriodIndex?"tempPeriod--current":""}
                    ${t.periodHasFinished?"tempPeriod--finished":""}
                `,children:[v("div",{class:"tempPeriod__data",children:t.type}),v("div",{class:"tempPeriod__data",children:Y(t.periodDuration,{debug:!0})}),v("div",{class:"tempPeriod__data",children:t.periodUserIntendedDuration===t.periodDuration?"same as duration":Y(t.periodUserIntendedDuration,{debug:!0})}),v("div",{class:"tempPeriod__data",children:Y(t.periodDurationRemaining,{mode:"remaining",debug:!0})}),v("div",{class:"tempPeriod__data",children:Y(t.periodDurationElapsed,{mode:"elapsed",debug:!0})}),v("div",{class:"tempPeriod__data",children:t.periodHasFinished?"yes":"no"})]},e))]}),_t=new Fn(5e3,z),di=()=>{if(!I.value)return v("p",{children:"No current period"});const t=I.value,e=t.periodUserIntendedDuration,n=t.type,o=t.periodDurationElapsed,s=g.value.currentPeriodIndex+1,l=g.value.periods[s],p=l?l.type:"finish",y=m=>Y(m,{debug:!0}),_=_t.getAllPossibleWindows(e,n,p),w=[],r=_t.getThreshold(e);for(const m of _){let b=!1;for(const k of w){const P=k[0].targetMs;if(Math.abs(m.targetMs-P)<=2e3){k.push(m),b=!0;break}}b||w.push([m])}const a=w.sort((m,b)=>m[0].targetMs-b[0].targetMs).map(m=>{const b=m.filter(A=>{const M=A.targetMs;return!(A.type==="elapsed"&&M>=r||A.type==="remaining"&&M<r)});if(b.length===0)return null;const k=_t.selectHighestPriority(b),P=b.filter(A=>A!==k),x=m.filter(A=>!b.includes(A));return{targetMs:m[0].targetMs,winner:k,competitors:P,filteredOut:x,allWindows:m,originalCount:m.length,validCount:b.length}}).filter(Boolean),u=m=>m.type==="timesup"?"timesup":m.type==="elapsed"?`elapsed ${m.minutes}min`:m.type==="remaining"?`remaining ${m.minutes}min`:m.type==="overtime"?`overtime ${m.minutes}min`:m.type,f=m=>m.type==="timesup"?`timesup_${p==="finish"?"finish":p}`:m.key,d=(m,b)=>{const P=b-m;return P<-2e3?"future":Math.abs(P)<=2e3?"current":"played"},h=m=>{switch(m){case"future":return{text:" Future",color:"#666",style:"normal"};case"current":return{text:" Active",color:"#e67e22",style:"bold"};case"played":return{text:" Played",color:"#27ae60",style:"normal"};default:return{text:m,color:"#666",style:"normal"}}},c=m=>new Date(m).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"});return v("div",{style:{marginBottom:"16px"},children:[v("h4",{style:{margin:"0 0 8px 0",fontSize:"0.9rem"},children:["Sound Notifications for Current Period (",n,")"]}),v("div",{class:"sound-notifications",children:[v("div",{class:"sound-notifications__header",children:[v("span",{children:"Status"}),v("span",{children:"Time from Start"}),v("span",{children:"Time from End"}),v("span",{children:"Time to Notification"}),v("span",{children:"Winner"}),v("span",{children:"Competitors"})]}),a.map((m,b)=>{const k=e-m.targetMs,P=d(m.targetMs,o),x=h(P),A=P==="current",M=m.targetMs-o;return v("div",{class:`sound-notifications__row ${A?"sound-notifications__row--active":""}`,children:[v("span",{style:{fontSize:"0.65rem",color:x.color,fontWeight:x.style},children:x.text}),v("code",{children:y(m.targetMs)}),v("code",{children:k>=0?`-${y(k)}`:`+${y(-k)}`}),v("code",{style:{color:M>0?"#2196F3":M<-2e3?"#999":"#e67e22",fontWeight:M<=2e3&&M>=-2e3?"bold":"normal"},children:M>=0?`in ${y(M)}`:`${y(-M)} ago`}),v("span",{style:{fontSize:"0.7rem",fontWeight:"bold",color:"#2d8f47"},children:f(m.winner)}),v("span",{style:{fontSize:"0.65rem",color:"#666",fontStyle:"italic"},children:m.competitors.length>0?m.competitors.map(S=>u(S)).join(", "):m.filteredOut.length>0?m.filteredOut.map(S=>u(S)).join(", "):""})]},b)})]}),Me.length>0&&v(X,{children:[v("h4",{style:{margin:"16px 0 8px 0",fontSize:"0.9rem"},children:"Recent Sound Playback Log"}),v("div",{class:"sound-playback-log",children:[v("div",{class:"sound-playback-log__header",children:[v("span",{children:"Time"}),v("span",{children:"Sound"}),v("span",{children:"Status"}),v("span",{children:"Period Context"}),v("span",{children:"Error"})]}),Me.slice(0,10).map((m,b)=>v("div",{class:"sound-playback-log__row",children:[v("code",{style:{fontSize:"0.65rem"},children:c(m.timestamp)}),v("span",{style:{fontSize:"0.7rem"},children:m.soundKey}),v("span",{style:{fontSize:"0.65rem",color:m.success?"#27ae60":"#e74c3c",fontWeight:"bold"},children:m.success?m.retry?" Success (retry)":" Success":m.retry?" Failed (retry)":" Failed"}),v("span",{style:{fontSize:"0.6rem",color:"#666"},children:m.periodContext?v("div",{style:{lineHeight:"1.2"},children:[v("div",{style:{color:"#2196F3",fontWeight:"bold"},children:[m.periodContext.periodType," #",m.periodContext.periodIndex+1]}),v("div",{children:["Duration:"," ",y(m.periodContext.periodDuration)]}),v("div",{children:["Elapsed:"," ",y(m.periodContext.elapsed)]}),v("div",{children:["Remaining:"," ",y(m.periodContext.remaining)]}),m.periodContext.overtime>0&&v("div",{style:{color:"#e67e22",fontWeight:"bold"},children:["Overtime:"," ",y(m.periodContext.overtime)]})]}):v("span",{style:{color:"#999",fontStyle:"italic"},children:"No period data"})}),v("span",{style:{fontSize:"0.6rem",color:"#999",fontStyle:"italic"},children:m.error||""})]},b))]})]})]})},ci=()=>v("details",{children:[v("summary",{children:"Debugging values"}),v(di,{}),v("p",{children:[v("code",{children:"timerDuration"})," ",Y($t.value,{debug:!0}),v("br",{}),v("code",{children:"timerDurationElapsed "})," ",Y(J.value,{mode:"elapsed",debug:!0}),v("br",{}),v("code",{children:"timerDurationRemaining "})," ",Y(Ct.value,{mode:"remaining",debug:!0}),v("br",{}),v("code",{children:"currentPeriodIndex "})," ",g.value.currentPeriodIndex,v("br",{}),v("code",{children:"timestampStarted "})," ",(g.value.timestampStarted||0).toLocaleString(),v("br",{}),v("code",{children:"timestampPaused "})," ",(g.value.timestampPaused||0).toLocaleString(),v("br",{}),v("code",{children:"shouldGoToNextPeriod "})," ",kt.value?"YES":"no",v("br",{}),v("code",{children:"timerOnLastPeriod "})," ",Ze.value?"YES":"no",v("br",{}),v("code",{children:"timerHasFinished "})," ",V.value?"YES":"no"]}),v(li,{})]});function fi(){return v("div",{class:"build-info",children:""})}function _i(){return we(()=>{const t=async e=>{const n=document.activeElement;if(!(n?.tagName==="INPUT"||n?.tagName==="TEXTAREA"||n?.tagName==="SELECT"||n?.isContentEditable))if(await ke(),e.key===" ")e.preventDefault(),Wn.value&&(g.value.runningIntervalId?Nt():g.value.timestampPaused?Oe():Un());else if(e.key==="PageUp")e.preventDefault(),Rn.value&&Re();else if(e.key==="PageDown")e.preventDefault(),Bn.value&&at();else if(e.key==="ArrowRight"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const i=Ge(J.value,"up");Z(i)&&U(i)}else if(e.key==="ArrowLeft"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const i=Ge(J.value,"down");Z(i)&&U(i)}else if(e.key==="ArrowRight"&&e.ctrlKey&&!e.altKey&&!e.shiftKey)e.preventDefault(),Z(36e4)&&U(36e4);else if(e.key==="ArrowLeft"&&e.ctrlKey&&!e.altKey&&!e.shiftKey)e.preventDefault(),Z(-36e4)&&U(-36e4);else if(e.key==="ArrowRight"&&e.shiftKey&&!e.altKey&&!e.ctrlKey)e.preventDefault(),Z(144e4)&&U(144e4);else if(e.key==="ArrowLeft"&&e.shiftKey&&!e.altKey&&!e.ctrlKey)e.preventDefault(),Z(-144e4)&&U(-144e4);else if(e.key==="ArrowRight"&&e.altKey&&!e.shiftKey&&!e.ctrlKey)e.preventDefault(),Z(6e4)&&U(6e4);else if(e.key==="ArrowLeft"&&e.altKey&&!e.shiftKey&&!e.ctrlKey)e.preventDefault(),Z(-6e4)&&U(-6e4);else if(e.key==="Home")e.preventDefault(),Z(-J.value)&&U(-J.value);else if(e.key==="End"){e.preventDefault();const s=(I.value?.periodDuration||0)-J.value;Z(s)&&U(s)}else if((e.key==="+"||e.key==="=")&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const i=I.value?.periodDuration||0,s=Ge(i,"up");re(s)&&K(s)}else if(e.key==="-"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey){e.preventDefault();const i=I.value?.periodDuration||0,s=Ge(i,"down");re(s)&&K(s)}else(e.key==="+"||e.key==="=")&&e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),re(36e4)&&K(36e4)):e.key==="-"&&e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),re(-36e4)&&K(-36e4)):(e.key==="+"||e.key==="=")&&e.shiftKey&&!e.altKey&&!e.ctrlKey?(e.preventDefault(),re(144e4)&&K(144e4)):e.key==="-"&&e.shiftKey&&!e.altKey&&!e.ctrlKey?(e.preventDefault(),re(-144e4)&&K(-144e4)):(e.key==="+"||e.key==="=")&&e.altKey&&!e.shiftKey&&!e.ctrlKey?(e.preventDefault(),re(6e4)&&K(6e4)):e.key==="-"&&e.altKey&&!e.shiftKey&&!e.ctrlKey?(e.preventDefault(),re(-6e4)&&K(-6e4)):(e.key==="t"||e.key==="T")&&!e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),Gn.value&&jn()):(e.key==="a"||e.key==="A")&&!e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),Yn.value&&Kn()):e.key==="Backspace"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey?(e.preventDefault(),qn.value&&Vn()):e.key==="Enter"&&!e.ctrlKey&&!e.altKey&&!e.shiftKey&&(e.preventDefault(),g.value.currentPeriodIndex!==null&&($e.value=g.value.currentPeriodIndex))};return document.addEventListener("keydown",t),()=>{document.removeEventListener("keydown",t)}},[]),null}function pi(){return we(()=>{Hr()},[]),we(()=>{const t=async()=>{await ke()},e=["click","touchstart","keydown"];return e.forEach(n=>{document.addEventListener(n,t,{once:!0})}),()=>{e.forEach(n=>{document.removeEventListener(n,t)})}},[]),we(()=>{const t=g.value.runningIntervalId!==null,e=I.value;if(t&&e){const n=e.periodDurationRemaining<36e5&&e.periodDuration<36e5;let o,i;n?(o=Math.ceil(e.periodDurationElapsed/(60*1e3)).toString(),i=Math.ceil(e.periodUserIntendedDuration/(60*1e3)).toString()):(o=Y(e.periodDurationElapsed,!0),i=Y(e.periodUserIntendedDuration,!0));const s=e.type.charAt(0).toUpperCase(),p=e.periodDurationElapsed>e.periodUserIntendedDuration?" ":"";document.title=`${s} ${p}${o}/${i}`}else document.title="Tymer"},[g.value.runningIntervalId,I.value?.periodDurationRemaining,I.value?.periodDurationElapsed,I.value?.periodUserIntendedDuration,I.value?.type]),v(X,{children:[v(_i,{}),v(fi,{}),v(ii,{}),v(oi,{}),v(ai,{}),v(ui,{}),v(ci,{})]})}var pt;(pt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:void 0)!=null&&pt.__PREACT_DEVTOOLS__&&pt.__PREACT_DEVTOOLS__.attachPreact("10.27.2",T,{Fragment:X,Component:ie});var un={};function oe(t){return t.type===X?"Fragment":typeof t.type=="function"?t.type.displayName||t.type.name:typeof t.type=="string"?t.type:"#text"}var Ce=[],ye=[];function zn(){return Ce.length>0?Ce[Ce.length-1]:null}var ln=!0;function ht(t){return typeof t.type=="function"&&t.type!=X}function R(t){for(var e=[t],n=t;n.__o!=null;)e.push(n.__o),n=n.__o;return e.reduce(function(o,i){o+="  in "+oe(i);var s=i.__source;return s?o+=" (at "+s.fileName+":"+s.lineNumber+")":ln&&console.warn("Add @babel/plugin-transform-react-jsx-source to get a more detailed component stack. Note that you should not add it to production builds of your App for bundle size reasons."),ln=!1,o+`
`},"")}var hi=typeof WeakMap=="function";function Pt(t){var e=[];return t.__k&&t.__k.forEach(function(n){n&&typeof n.type=="function"?e.push.apply(e,Pt(n)):n&&typeof n.type=="string"&&e.push(n.type)}),e}function er(t){return t?typeof t.type=="function"?t.__==null?t.__e!=null&&t.__e.parentNode!=null?t.__e.parentNode.localName:"":er(t.__):t.type:""}var mi=ie.prototype.setState;function mt(t){return t==="table"||t==="tfoot"||t==="tbody"||t==="thead"||t==="td"||t==="tr"||t==="th"}ie.prototype.setState=function(t,e){return this.__v==null&&this.state==null&&console.warn(`Calling "this.setState" inside the constructor of a component is a no-op and might be a bug in your application. Instead, set "this.state = {}" directly.

`+R(zn())),mi.call(this,t,e)};var vi=/^(address|article|aside|blockquote|details|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|main|menu|nav|ol|p|pre|search|section|table|ul)$/,yi=ie.prototype.forceUpdate;function Q(t){var e=t.props,n=oe(t),o="";for(var i in e)if(e.hasOwnProperty(i)&&i!=="children"){var s=e[i];typeof s=="function"&&(s="function "+(s.displayName||s.name)+"() {}"),s=Object(s)!==s||s.toString?s+"":Object.prototype.toString.call(s),o+=" "+i+"="+JSON.stringify(s)}var l=e.children;return"<"+n+o+(l&&l.length?">..</"+n+">":" />")}ie.prototype.forceUpdate=function(t){return this.__v==null?console.warn(`Calling "this.forceUpdate" inside the constructor of a component is a no-op and might be a bug in your application.

`+R(zn())):this.__P==null&&console.warn(`Can't call "this.forceUpdate" on an unmounted component. This is a no-op, but it indicates a memory leak in your application. To fix, cancel all subscriptions and asynchronous tasks in the componentWillUnmount method.

`+R(this.__v)),yi.call(this,t)},T.__m=function(t,e){var n=t.type,o=e.map(function(i){return i&&i.localName}).filter(Boolean);console.error('Expected a DOM node of type "'+n+'" but found "'+o.join(", ")+`" as available DOM-node(s), this is caused by the SSR'd HTML containing different DOM-nodes compared to the hydrated one.

`+R(t))},(function(){(function(){var d=T.__b,h=T.diffed,c=T.__,m=T.vnode,b=T.__r;T.diffed=function(k){ht(k)&&ye.pop(),Ce.pop(),h&&h(k)},T.__b=function(k){ht(k)&&Ce.push(k),d&&d(k)},T.__=function(k,P){ye=[],c&&c(k,P)},T.vnode=function(k){k.__o=ye.length>0?ye[ye.length-1]:null,m&&m(k)},T.__r=function(k){ht(k)&&ye.push(k),b&&b(k)}})();var t=!1,e=T.__b,n=T.diffed,o=T.vnode,i=T.__r,s=T.__e,l=T.__,p=T.__h,y=hi?{useEffect:new WeakMap,useLayoutEffect:new WeakMap,lazyPropTypes:new WeakMap}:null,_=[];T.__e=function(d,h,c,m){if(h&&h.__c&&typeof d.then=="function"){var b=d;d=new Error("Missing Suspense. The throwing component was: "+oe(h));for(var k=h;k;k=k.__)if(k.__c&&k.__c.__c){d=b;break}if(d instanceof Error)throw d}try{(m=m||{}).componentStack=R(h),s(d,h,c,m),typeof d.then!="function"&&setTimeout(function(){throw d})}catch(P){throw P}},T.__=function(d,h){if(!h)throw new Error(`Undefined parent passed to render(), this is the second argument.
Check if the element is available in the DOM/has the correct id.`);var c;switch(h.nodeType){case 1:case 11:case 9:c=!0;break;default:c=!1}if(!c){var m=oe(d);throw new Error("Expected a valid HTML node as a second argument to render.	Received "+h+" instead: render(<"+m+" />, "+h+");")}l&&l(d,h)},T.__b=function(d){var h=d.type;if(t=!0,h===void 0)throw new Error(`Undefined component passed to createElement()

You likely forgot to export your component or might have mixed up default and named imports`+Q(d)+`

`+R(d));if(h!=null&&typeof h=="object")throw h.__k!==void 0&&h.__e!==void 0?new Error("Invalid type passed to createElement(): "+h+`

Did you accidentally pass a JSX literal as JSX twice?

  let My`+oe(d)+" = "+Q(h)+`;
  let vnode = <My`+oe(d)+` />;

This usually happens when you export a JSX literal and not the component.

`+R(d)):new Error("Invalid type passed to createElement(): "+(Array.isArray(h)?"array":h));if(d.ref!==void 0&&typeof d.ref!="function"&&typeof d.ref!="object"&&!("$$typeof"in d))throw new Error(`Component's "ref" property should be a function, or an object created by createRef(), but got [`+typeof d.ref+`] instead
`+Q(d)+`

`+R(d));if(typeof d.type=="string"){for(var c in d.props)if(c[0]==="o"&&c[1]==="n"&&typeof d.props[c]!="function"&&d.props[c]!=null)throw new Error(`Component's "`+c+'" property should be a function, but got ['+typeof d.props[c]+`] instead
`+Q(d)+`

`+R(d))}if(typeof d.type=="function"&&d.type.propTypes){if(d.type.displayName==="Lazy"&&y&&!y.lazyPropTypes.has(d.type)){var m="PropTypes are not supported on lazy(). Use propTypes on the wrapped component itself. ";try{var b=d.type();y.lazyPropTypes.set(d.type,!0),console.warn(m+"Component wrapped in lazy() is "+oe(b))}catch{console.warn(m+"We will log the wrapped component's name once it is loaded.")}}var k=d.props;d.type.__f&&delete(k=(function(P,x){for(var A in x)P[A]=x[A];return P})({},k)).ref,(function(P,x,A,M,S){Object.keys(P).forEach(function(L){var $;try{$=P[L](x,L,M,"prop",null,"SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED")}catch(B){$=B}$&&!($.message in un)&&(un[$.message]=!0,console.error("Failed prop type: "+$.message+(S&&`
`+S()||"")))})})(d.type.propTypes,k,0,oe(d),function(){return R(d)})}e&&e(d)};var w,r=0;T.__r=function(d){i&&i(d),t=!0;var h=d.__c;if(h===w?r++:r=1,r>=25)throw new Error("Too many re-renders. This is limited to prevent an infinite loop which may lock up your browser. The component causing this is: "+oe(d));w=h},T.__h=function(d,h,c){if(!d||!t)throw new Error("Hook can only be invoked from render methods.");p&&p(d,h,c)};var a=function(d,h){return{get:function(){var c="get"+d+h;_&&_.indexOf(c)<0&&(_.push(c),console.warn("getting vnode."+d+" is deprecated, "+h))},set:function(){var c="set"+d+h;_&&_.indexOf(c)<0&&(_.push(c),console.warn("setting vnode."+d+" is not allowed, "+h))}}},u={nodeName:a("nodeName","use vnode.type"),attributes:a("attributes","use vnode.props"),children:a("children","use vnode.props.children")},f=Object.create({},u);T.vnode=function(d){var h=d.props;if(d.type!==null&&h!=null&&("__source"in h||"__self"in h)){var c=d.props={};for(var m in h){var b=h[m];m==="__source"?d.__source=b:m==="__self"?d.__self=b:c[m]=b}}d.__proto__=f,o&&o(d)},T.diffed=function(d){var h,c=d.type,m=d.__;if(d.__k&&d.__k.forEach(function(G){if(typeof G=="object"&&G&&G.type===void 0){var he=Object.keys(G).join(",");throw new Error("Objects are not valid as a child. Encountered an object with the keys {"+he+`}.

`+R(d))}}),d.__c===w&&(r=0),typeof c=="string"&&(mt(c)||c==="p"||c==="a"||c==="button")){var b=er(m);if(b!==""&&mt(c))c==="table"&&b!=="td"&&mt(b)?console.error("Improper nesting of table. Your <table> should not have a table-node parent."+Q(d)+`

`+R(d)):c!=="thead"&&c!=="tfoot"&&c!=="tbody"||b==="table"?c==="tr"&&b!=="thead"&&b!=="tfoot"&&b!=="tbody"?console.error("Improper nesting of table. Your <tr> should have a <thead/tbody/tfoot> parent."+Q(d)+`

`+R(d)):c==="td"&&b!=="tr"?console.error("Improper nesting of table. Your <td> should have a <tr> parent."+Q(d)+`

`+R(d)):c==="th"&&b!=="tr"&&console.error("Improper nesting of table. Your <th> should have a <tr>."+Q(d)+`

`+R(d)):console.error("Improper nesting of table. Your <thead/tbody/tfoot> should have a <table> parent."+Q(d)+`

`+R(d));else if(c==="p"){var k=Pt(d).filter(function(G){return vi.test(G)});k.length&&console.error("Improper nesting of paragraph. Your <p> should not have "+k.join(", ")+" as child-elements."+Q(d)+`

`+R(d))}else c!=="a"&&c!=="button"||Pt(d).indexOf(c)!==-1&&console.error("Improper nesting of interactive content. Your <"+c+"> should not have other "+(c==="a"?"anchor":"button")+" tags as child-elements."+Q(d)+`

`+R(d))}if(t=!1,n&&n(d),d.__k!=null)for(var P=[],x=0;x<d.__k.length;x++){var A=d.__k[x];if(A&&A.key!=null){var M=A.key;if(P.indexOf(M)!==-1){console.error('Following component has two or more children with the same key attribute: "'+M+`". This may cause glitches and misbehavior in rendering process. Component: 

`+Q(d)+`

`+R(d));break}P.push(M)}}if(d.__c!=null&&d.__c.__H!=null){var S=d.__c.__H.__;if(S)for(var L=0;L<S.length;L+=1){var $=S[L];if($.__H){for(var B=0;B<$.__H.length;B++)if((h=$.__H[B])!=h){var ce=oe(d);console.warn("Invalid argument passed to hook. Hooks should not be called with NaN in the dependency array. Hook index "+L+" in component "+ce+" was called with NaN.")}}}}}})();sr(v(pi,{}),document.getElementById("app"));
